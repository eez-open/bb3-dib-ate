{
  "settings": {
    "general": {
      "projectVersion": "v3",
      "projectType": "dashboard",
      "imports": [],
      "css": ".page {\n    background-color: #eee;\n    border-radius: 4px;\n    box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);\n}\n\n.device {\n    background-color: #ddd;\n    border-radius: 4px;\n    box-shadow: 1px 1px 4px rgb(133 133 133 / 50%);\n}\n\n.device_title {\n    font-weight: bold;\n}\n\n.blink_status {\n    color: blue;\n    font-weight: bold;\n    animation: blinker 1s linear infinite;\n}\n\n.success_status {\n    color: green;\n    font-weight: bold;\n}\n\n@keyframes blinker {\n  50% {\n    opacity: 0;\n  }\n}\n\n.success {\n    color: green;\n    font-weight: bold;\n}\n\n.error {\n    color: red;\n    font-weight: bold;\n}\n\n.help {\n    border: 1px solid #999;\n    padding: 10px;\n    background-color: white;\n}"
    },
    "build": {
      "configurations": [
        {
          "name": "Default"
        }
      ],
      "files": []
    }
  },
  "variables": {
    "globalVariables": [
      {
        "name": "db_connection",
        "description": "PostgreSQL connection",
        "type": "object:eez-flow-ext-postgres/PostgreSQLConnection",
        "defaultValue": "null",
        "persistent": true
      },
      {
        "name": "automatic_testing",
        "type": "boolean",
        "defaultValue": "false",
        "persistent": true
      },
      {
        "name": "auto_refresh",
        "type": "boolean",
        "defaultValue": "false",
        "persistent": true
      },
      {
        "name": "update_database",
        "type": "boolean",
        "defaultValue": "true",
        "persistent": true
      },
      {
        "name": "test_step_enabled",
        "type": "array:boolean",
        "defaultValue": "[false, true, true, true, true, true, true, true]",
        "persistent": true
      },
      {
        "name": "test_steps",
        "type": "array:struct:TestStep",
        "defaultValue": "[\n  {name: \"FTDI programming\",      action_name: \"do_test_step_ftdi_programming\"},\n  {name: \"ESP32 passthru\",        action_name: \"do_test_step_esp32_passthru\"},\n  {name: \"ESP32 erase\",           action_name: \"do_test_step_esp32_erase\"},\n  {name: \"ESP32 programming\",     action_name: \"do_test_step_esp32_prog\"},\n  {name: \"MP test\",               action_name: \"do_test_step_mp_test\"},\n  {name: \"Self-test programming\", action_name: \"do_test_step_selftest_prog\"},\n  {name: \"Self-test\",             action_name: \"do_test_step_selftest\"},\n  {name: \"ESP32 passthru flash\",  action_name: \"do_test_step_esp32_perm_prog\"}\n]",
        "persistent": false
      },
      {
        "name": "devices",
        "description": "10 slots for devices",
        "type": "array:struct:Device",
        "defaultValue": "[null, null, null, null, null, null, null, null, null, null]",
        "persistent": false
      }
    ],
    "structures": [
      {
        "name": "TestStep",
        "fields": [
          {
            "name": "name",
            "type": "string"
          },
          {
            "name": "action_name",
            "type": "string"
          }
        ]
      },
      {
        "name": "Device",
        "fields": [
          {
            "name": "serialNumber",
            "type": "string"
          },
          {
            "name": "serialPortPath",
            "type": "string"
          },
          {
            "name": "deviceNumber",
            "type": "string"
          },
          {
            "name": "version",
            "type": "string"
          },
          {
            "name": "currentStep",
            "type": "integer"
          },
          {
            "name": "stepStatus",
            "type": "struct:StepStatus"
          },
          {
            "name": "allTestsOK",
            "type": "boolean"
          }
        ]
      },
      {
        "name": "StepStatus",
        "fields": [
          {
            "name": "status",
            "type": "enum:StepStatus"
          },
          {
            "name": "progress",
            "type": "integer"
          },
          {
            "name": "selfTest",
            "type": "struct:SelfTest"
          }
        ]
      },
      {
        "name": "SelfTest",
        "fields": [
          {
            "name": "DAC",
            "type": "boolean"
          },
          {
            "name": "FLASH",
            "type": "boolean"
          },
          {
            "name": "ADC",
            "type": "boolean"
          },
          {
            "name": "RTC",
            "type": "boolean"
          },
          {
            "name": "EDID",
            "type": "boolean"
          },
          {
            "name": "SD_CARD",
            "type": "boolean"
          },
          {
            "name": "BTN",
            "type": "boolean"
          },
          {
            "name": "HDMI",
            "type": "boolean"
          }
        ]
      }
    ],
    "enums": [
      {
        "name": "StepStatus",
        "members": [
          {
            "name": "NotStarted",
            "value": 0
          },
          {
            "name": "InProgress",
            "value": 1
          },
          {
            "name": "Success",
            "value": 2
          },
          {
            "name": "Error",
            "value": 3
          }
        ]
      }
    ]
  },
  "actions": [
    {
      "components": [
        {
          "type": "CallActionActionComponent",
          "left": -282,
          "top": -96,
          "width": 120,
          "height": 83,
          "wireID": "a20da2e3-6cc6-4847-f447-57eb175b64a8",
          "customInputs": [],
          "customOutputs": [],
          "action": "enum_devices"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 257,
          "top": -435,
          "width": 168,
          "height": 83,
          "wireID": "c41e1530-7b06-4923-e66f-0f7f92f15a49",
          "customInputs": [],
          "customOutputs": [],
          "value": "automatic_testing"
        },
        {
          "type": "StartActionComponent",
          "left": -444,
          "top": -96,
          "width": 87,
          "height": 29,
          "wireID": "8c811cbe-9b57-4c6b-b96a-bd770dae76e2",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "OutputActionComponent",
          "left": 688,
          "top": -87,
          "width": 87,
          "height": 29,
          "wireID": "4dce99dd-a04a-4b68-847c-45a8215faea4",
          "customInputs": [],
          "customOutputs": [],
          "name": "stdout",
          "outputType": "string"
        },
        {
          "type": "OutputActionComponent",
          "left": 688,
          "top": -42,
          "width": 87,
          "height": 29,
          "wireID": "a18c72ae-c708-47fd-cfd9-d13bb899e1a6",
          "customInputs": [],
          "customOutputs": [],
          "name": "stderr",
          "outputType": "string"
        },
        {
          "type": "CallActionActionComponent",
          "left": 492,
          "top": -435,
          "width": 113,
          "height": 83,
          "wireID": "373f9d38-dc07-42fc-f67d-d1ee184373bd",
          "customInputs": [],
          "customOutputs": [],
          "action": "do_auto_test"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 714,
          "top": -297,
          "width": 478,
          "height": 83,
          "wireID": "74f49669-fb21-4e17-cfab-a60fcc28c331",
          "customInputs": [],
          "customOutputs": [],
          "value": "auto_refresh && (System.getTick() - lastAutoRefreshTick > 1000)"
        },
        {
          "type": "SetVariableActionComponent",
          "left": -122,
          "top": -266,
          "width": 294,
          "height": 62,
          "wireID": "2c7ec764-f56a-4df7-f479-bb91f7089b5b",
          "customInputs": [],
          "customOutputs": [],
          "variable": "lastAutoRefreshTick",
          "value": "System.getTick()"
        },
        {
          "type": "CommentActionComponent",
          "left": 714,
          "top": -390,
          "width": 435,
          "height": 57,
          "wireID": "e4640360-6f63-4959-ca9e-5374aa5c923d",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Do auto refresh every 1 second if enabled</div>"
        },
        {
          "type": "CommentActionComponent",
          "left": 253,
          "top": -503,
          "width": 352,
          "height": 57,
          "wireID": "52938743-71ba-4c59-b983-ecb43c7bd215",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Do auto test if enabled</div>"
        }
      ],
      "connectionLines": [
        {
          "source": "8c811cbe-9b57-4c6b-b96a-bd770dae76e2",
          "output": "@seqout",
          "target": "a20da2e3-6cc6-4847-f447-57eb175b64a8",
          "input": "@seqin"
        },
        {
          "source": "a20da2e3-6cc6-4847-f447-57eb175b64a8",
          "output": "245a891f-9fce-4e4b-a94b-37b2a018e1b9",
          "target": "4dce99dd-a04a-4b68-847c-45a8215faea4",
          "input": "@seqin"
        },
        {
          "source": "a20da2e3-6cc6-4847-f447-57eb175b64a8",
          "output": "a61f4b3b-2c7a-447b-82da-9cec0ad5721a",
          "target": "a18c72ae-c708-47fd-cfd9-d13bb899e1a6",
          "input": "@seqin"
        },
        {
          "source": "a20da2e3-6cc6-4847-f447-57eb175b64a8",
          "output": "@seqout",
          "target": "2c7ec764-f56a-4df7-f479-bb91f7089b5b",
          "input": "@seqin"
        },
        {
          "source": "2c7ec764-f56a-4df7-f479-bb91f7089b5b",
          "output": "@seqout",
          "target": "c41e1530-7b06-4923-e66f-0f7f92f15a49",
          "input": "@seqin"
        },
        {
          "source": "74f49669-fb21-4e17-cfab-a60fcc28c331",
          "output": "True",
          "target": "a20da2e3-6cc6-4847-f447-57eb175b64a8",
          "input": "@seqin"
        },
        {
          "source": "74f49669-fb21-4e17-cfab-a60fcc28c331",
          "output": "False",
          "target": "c41e1530-7b06-4923-e66f-0f7f92f15a49",
          "input": "@seqin"
        },
        {
          "source": "c41e1530-7b06-4923-e66f-0f7f92f15a49",
          "output": "True",
          "target": "373f9d38-dc07-42fc-f67d-d1ee184373bd",
          "input": "@seqin"
        },
        {
          "source": "c41e1530-7b06-4923-e66f-0f7f92f15a49",
          "output": "False",
          "target": "74f49669-fb21-4e17-cfab-a60fcc28c331",
          "input": "@seqin"
        },
        {
          "source": "373f9d38-dc07-42fc-f67d-d1ee184373bd",
          "output": "@seqout",
          "target": "74f49669-fb21-4e17-cfab-a60fcc28c331",
          "input": "@seqin"
        },
        {
          "source": "373f9d38-dc07-42fc-f67d-d1ee184373bd",
          "output": "867eb9aa-8a06-440c-9739-438fc92cb2f6",
          "target": "4dce99dd-a04a-4b68-847c-45a8215faea4",
          "input": "@seqin"
        },
        {
          "source": "373f9d38-dc07-42fc-f67d-d1ee184373bd",
          "output": "5c0bddf6-a1e8-43cb-e6e4-cef69786e7f3",
          "target": "a18c72ae-c708-47fd-cfd9-d13bb899e1a6",
          "input": "@seqin"
        }
      ],
      "localVariables": [
        {
          "name": "lastAutoRefreshTick",
          "type": "integer",
          "defaultValue": "0",
          "persistent": false
        }
      ],
      "name": "main_loop",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "ExecuteCommand",
          "left": -83,
          "top": -90,
          "width": 383,
          "height": 105,
          "wireID": "5c879c4a-0c84-4e8d-f192-9e1f5fd1c1e4",
          "customInputs": [],
          "customOutputs": [],
          "command": "System.ProjectFolder + \"/FT_Prog-CmdLine.exe\"",
          "arguments": "[\"scan\"]"
        },
        {
          "type": "Regexp",
          "left": 420,
          "top": -162,
          "width": 318,
          "height": 83,
          "wireID": "01e3bfc3-2da4-439f-866b-b6c206f9e0c1",
          "customInputs": [
            {
              "name": "data",
              "type": "string"
            }
          ],
          "customOutputs": [],
          "pattern": "\"^Device (.*):.*ULX3S.*, (.*)$\"",
          "data": "data"
        },
        {
          "type": "CommentActionComponent",
          "left": 824,
          "top": -299,
          "width": 259,
          "height": 78,
          "wireID": "ea402933-4565-4a03-b2f1-07f6b455faf9",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->match[1] is deviceNumber (0, 1, 2, ...)<br>match[2] is serialNumber</div>"
        },
        {
          "type": "OutputActionComponent",
          "left": 1689,
          "top": -90,
          "width": 87,
          "height": 29,
          "wireID": "245a891f-9fce-4e4b-a94b-37b2a018e1b9",
          "customInputs": [],
          "customOutputs": [],
          "name": "stdout",
          "outputType": "string"
        },
        {
          "type": "OutputActionComponent",
          "left": 1718,
          "top": -47,
          "width": 87,
          "height": 29,
          "wireID": "a61f4b3b-2c7a-447b-82da-9cec0ad5721a",
          "customInputs": [],
          "customOutputs": [],
          "name": "stderr",
          "outputType": "string"
        },
        {
          "type": "StartActionComponent",
          "left": -198,
          "top": -90,
          "width": 87,
          "height": 29,
          "wireID": "8f761592-bb60-48f8-ab85-628a1a55a229",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "SetVariableActionComponent",
          "left": 824,
          "top": -206,
          "width": 477,
          "height": 206,
          "wireID": "dae28c6f-0978-4cef-8c55-2bec450a1ce7",
          "customInputs": [
            {
              "name": "match",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "new_devices[match[1]]",
          "value": "{\n  serialNumber: match[2],\n  deviceNumber: match[1],\n  stepStatus: {\n    status: StepStatus.NotStarted,\n    progress: 0,\n    message: \"\"\n  }\n}"
        },
        {
          "type": "LoopActionComponent",
          "left": -83,
          "top": 162,
          "width": 503,
          "height": 83,
          "wireID": "4b654a00-e817-47ce-e990-2be8e47dd6f9",
          "customInputs": [],
          "customOutputs": [],
          "variable": "idx_new_device",
          "from": "0",
          "to": "Array.length(new_devices) - 1",
          "step": "1",
          "version": 1
        },
        {
          "type": "CallActionActionComponent",
          "left": 1176,
          "top": 151,
          "width": 161,
          "height": 61,
          "wireID": "f4ae28f7-6768-47c5-a8cc-69d613882739",
          "customInputs": [],
          "customOutputs": [],
          "action": "find_serial_port_path"
        },
        {
          "type": "EvalExprActionComponent",
          "left": 814,
          "top": 151,
          "width": 336,
          "height": 62,
          "wireID": "61e40128-853b-403e-d359-4910b6f17565",
          "customInputs": [],
          "customOutputs": [],
          "expression": "new_devices[idx_new_device].serialNumber"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 894,
          "top": 265,
          "width": 407,
          "height": 62,
          "wireID": "5cc7d84f-80e2-4304-9f39-e36863fe8d8d",
          "customInputs": [
            {
              "name": "path",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "new_devices[idx_new_device].serialPortPath",
          "value": "path"
        },
        {
          "type": "CommentActionComponent",
          "left": -83,
          "top": 94,
          "width": 251,
          "height": 57,
          "wireID": "8a4f68d8-f441-48a9-bff6-304aedc46b63",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Find serial port path for new_devices</div>"
        },
        {
          "type": "CommentActionComponent",
          "left": -83,
          "top": -162,
          "width": 293,
          "height": 57,
          "wireID": "c67e8211-41a9-43b1-ed9a-40eb30f9ca69",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Scan devices and store into new_devices</div>"
        },
        {
          "type": "CommentActionComponent",
          "left": -74,
          "top": 295,
          "width": 171,
          "height": 57,
          "wireID": "19ee38f5-c061-4a26-e713-22cb663fb566",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Reuse existing devices</div>"
        },
        {
          "type": "LoopActionComponent",
          "left": -74,
          "top": 366,
          "width": 503,
          "height": 83,
          "wireID": "f9757f11-4358-4852-8c53-18fe014953e1",
          "customInputs": [],
          "customOutputs": [],
          "variable": "idx_new_device",
          "from": "0",
          "to": "Array.length(new_devices) - 1",
          "step": "1",
          "version": 1
        },
        {
          "type": "LoopActionComponent",
          "left": 461,
          "top": 493,
          "width": 449,
          "height": 83,
          "wireID": "f88fa2bb-b58e-4817-a12f-759bc47e216f",
          "customInputs": [],
          "customOutputs": [],
          "variable": "idx_device",
          "from": "0",
          "to": "Array.length(devices) - 1",
          "step": "1",
          "version": 1
        },
        {
          "type": "IsTrueActionComponent",
          "left": 1298,
          "top": 493,
          "width": 343,
          "height": 83,
          "wireID": "71956643-8cec-4407-9f4b-b34f6177a9bb",
          "customInputs": [],
          "customOutputs": [],
          "value": "new_devices[idx_new_device].serialNumber ==\ndevices[idx_device].serialNumber"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2119,
          "top": 493,
          "width": 368,
          "height": 62,
          "wireID": "ccc18b0d-b727-43c8-ae82-b9291d163347",
          "customInputs": [],
          "customOutputs": [],
          "variable": "new_devices[idx_new_device]",
          "value": "devices[idx_device]"
        },
        {
          "type": "EvalExprActionComponent",
          "left": 1692,
          "top": 493,
          "width": 350,
          "height": 62,
          "wireID": "c8822492-6a70-4773-cc04-7cf2ca8123c5",
          "customInputs": [],
          "customOutputs": [],
          "expression": "new_devices[idx_new_device].serialPortPath"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2351,
          "top": 616,
          "width": 407,
          "height": 62,
          "wireID": "15a4055c-8ab6-43f8-de7a-1d421742ae82",
          "customInputs": [
            {
              "name": "path",
              "type": "string"
            }
          ],
          "customOutputs": [],
          "variable": "new_devices[idx_new_device].serialPortPath",
          "value": "path"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2631,
          "top": 493,
          "width": 455,
          "height": 62,
          "wireID": "23dc0d39-6c16-43cc-aafa-8daa20e56b73",
          "customInputs": [],
          "customOutputs": [],
          "variable": "new_devices[idx_new_device].deviceNumber",
          "value": "idx_new_device + \"\""
        },
        {
          "type": "EvalExprActionComponent",
          "left": 738,
          "top": 748,
          "width": 249,
          "height": 62,
          "wireID": "0f7f2cbb-0225-40df-ab13-acb928ca9d1b",
          "customInputs": [],
          "customOutputs": [],
          "expression": "new_devices[idx_new_device]"
        },
        {
          "type": "EndActionComponent",
          "left": 151,
          "top": 970,
          "width": 87,
          "height": 29,
          "wireID": "ecfe11f5-574f-4a8c-efd0-d4798000ac6b",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "IsTrueActionComponent",
          "left": 461,
          "top": 151,
          "width": 290,
          "height": 83,
          "wireID": "ffea4cd6-a82d-4fd2-ff5d-74c503f2c908",
          "customInputs": [],
          "customOutputs": [],
          "value": "new_devices[idx_new_device] != null"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 491,
          "top": 366,
          "width": 290,
          "height": 83,
          "wireID": "5dee8388-327e-4d38-f75a-1879f1d8f602",
          "customInputs": [],
          "customOutputs": [],
          "value": "new_devices[idx_new_device] != null"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 1013,
          "top": 493,
          "width": 236,
          "height": 83,
          "wireID": "d63f168e-fca5-4112-f1db-1522b8ee3fce",
          "customInputs": [],
          "customOutputs": [],
          "value": "devices[idx_device] != null"
        },
        {
          "type": "SetVariableActionComponent",
          "left": -83,
          "top": 970,
          "width": 179,
          "height": 62,
          "wireID": "4b16eb3a-63b8-411a-f158-5cdd595b147a",
          "customInputs": [],
          "customOutputs": [],
          "variable": "devices",
          "value": "new_devices"
        },
        {
          "type": "CommentActionComponent",
          "left": 1692,
          "top": 414,
          "width": 435,
          "height": 57,
          "wireID": "334aa811-40ea-48cd-be91-5875d6d1a0aa",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Use existing device but update serialPortPath and deviceNumber</div>"
        },
        {
          "type": "CommentActionComponent",
          "left": 738,
          "top": 678,
          "width": 435,
          "height": 57,
          "wireID": "6f61b8cb-a5b7-4d93-fa40-93242eec6458",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->New device found, get from database</div>"
        },
        {
          "type": "CommentActionComponent",
          "left": -83,
          "top": 901,
          "width": 239,
          "height": 57,
          "wireID": "62741d64-51e7-4c63-b321-228102c15251",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Replace devices with new_devices</div>"
        },
        {
          "type": "CallActionActionComponent",
          "left": 1028,
          "top": 748,
          "width": 122,
          "height": 83,
          "wireID": "49f1c1be-ba53-4564-d1f9-0a524c723ddc",
          "customInputs": [],
          "customOutputs": [],
          "action": "db_get_device"
        }
      ],
      "connectionLines": [
        {
          "source": "5c879c4a-0c84-4e8d-f192-9e1f5fd1c1e4",
          "output": "stdout",
          "target": "01e3bfc3-2da4-439f-866b-b6c206f9e0c1",
          "input": "data"
        },
        {
          "source": "5c879c4a-0c84-4e8d-f192-9e1f5fd1c1e4",
          "output": "stdout",
          "target": "01e3bfc3-2da4-439f-866b-b6c206f9e0c1",
          "input": "@seqin"
        },
        {
          "source": "5c879c4a-0c84-4e8d-f192-9e1f5fd1c1e4",
          "output": "stdout",
          "target": "245a891f-9fce-4e4b-a94b-37b2a018e1b9",
          "input": "@seqin"
        },
        {
          "source": "5c879c4a-0c84-4e8d-f192-9e1f5fd1c1e4",
          "output": "stderr",
          "target": "a61f4b3b-2c7a-447b-82da-9cec0ad5721a",
          "input": "@seqin"
        },
        {
          "source": "8f761592-bb60-48f8-ab85-628a1a55a229",
          "output": "@seqout",
          "target": "5c879c4a-0c84-4e8d-f192-9e1f5fd1c1e4",
          "input": "@seqin"
        },
        {
          "source": "01e3bfc3-2da4-439f-866b-b6c206f9e0c1",
          "output": "match",
          "target": "dae28c6f-0978-4cef-8c55-2bec450a1ce7",
          "input": "match"
        },
        {
          "source": "01e3bfc3-2da4-439f-866b-b6c206f9e0c1",
          "output": "done",
          "target": "4b654a00-e817-47ce-e990-2be8e47dd6f9",
          "input": "start"
        },
        {
          "source": "4b654a00-e817-47ce-e990-2be8e47dd6f9",
          "output": "@seqout",
          "target": "ffea4cd6-a82d-4fd2-ff5d-74c503f2c908",
          "input": "@seqin"
        },
        {
          "source": "61e40128-853b-403e-d359-4910b6f17565",
          "output": "result",
          "target": "f4ae28f7-6768-47c5-a8cc-69d613882739",
          "input": "a497339e-24e8-4237-a04a-3ecb0c768d8b"
        },
        {
          "source": "f4ae28f7-6768-47c5-a8cc-69d613882739",
          "output": "02d2de79-3cff-4933-96f5-78efcdab3b1f",
          "target": "5cc7d84f-80e2-4304-9f39-e36863fe8d8d",
          "input": "path"
        },
        {
          "source": "5cc7d84f-80e2-4304-9f39-e36863fe8d8d",
          "output": "@seqout",
          "target": "4b654a00-e817-47ce-e990-2be8e47dd6f9",
          "input": "next"
        },
        {
          "source": "4b654a00-e817-47ce-e990-2be8e47dd6f9",
          "output": "done",
          "target": "f9757f11-4358-4852-8c53-18fe014953e1",
          "input": "start"
        },
        {
          "source": "f9757f11-4358-4852-8c53-18fe014953e1",
          "output": "@seqout",
          "target": "5dee8388-327e-4d38-f75a-1879f1d8f602",
          "input": "@seqin"
        },
        {
          "source": "f88fa2bb-b58e-4817-a12f-759bc47e216f",
          "output": "@seqout",
          "target": "d63f168e-fca5-4112-f1db-1522b8ee3fce",
          "input": "@seqin"
        },
        {
          "source": "71956643-8cec-4407-9f4b-b34f6177a9bb",
          "output": "True",
          "target": "c8822492-6a70-4773-cc04-7cf2ca8123c5",
          "input": "@seqin"
        },
        {
          "source": "c8822492-6a70-4773-cc04-7cf2ca8123c5",
          "output": "@seqout",
          "target": "ccc18b0d-b727-43c8-ae82-b9291d163347",
          "input": "@seqin"
        },
        {
          "source": "ccc18b0d-b727-43c8-ae82-b9291d163347",
          "output": "@seqout",
          "target": "15a4055c-8ab6-43f8-de7a-1d421742ae82",
          "input": "@seqin"
        },
        {
          "source": "c8822492-6a70-4773-cc04-7cf2ca8123c5",
          "output": "result",
          "target": "15a4055c-8ab6-43f8-de7a-1d421742ae82",
          "input": "path"
        },
        {
          "source": "15a4055c-8ab6-43f8-de7a-1d421742ae82",
          "output": "@seqout",
          "target": "23dc0d39-6c16-43cc-aafa-8daa20e56b73",
          "input": "@seqin"
        },
        {
          "source": "23dc0d39-6c16-43cc-aafa-8daa20e56b73",
          "output": "@seqout",
          "target": "f9757f11-4358-4852-8c53-18fe014953e1",
          "input": "next"
        },
        {
          "source": "71956643-8cec-4407-9f4b-b34f6177a9bb",
          "output": "False",
          "target": "f88fa2bb-b58e-4817-a12f-759bc47e216f",
          "input": "next"
        },
        {
          "source": "f88fa2bb-b58e-4817-a12f-759bc47e216f",
          "output": "done",
          "target": "0f7f2cbb-0225-40df-ab13-acb928ca9d1b",
          "input": "@seqin"
        },
        {
          "source": "f9757f11-4358-4852-8c53-18fe014953e1",
          "output": "done",
          "target": "4b16eb3a-63b8-411a-f158-5cdd595b147a",
          "input": "@seqin"
        },
        {
          "source": "dae28c6f-0978-4cef-8c55-2bec450a1ce7",
          "output": "@seqout",
          "target": "01e3bfc3-2da4-439f-866b-b6c206f9e0c1",
          "input": "next"
        },
        {
          "source": "5dee8388-327e-4d38-f75a-1879f1d8f602",
          "output": "True",
          "target": "f88fa2bb-b58e-4817-a12f-759bc47e216f",
          "input": "start"
        },
        {
          "source": "5dee8388-327e-4d38-f75a-1879f1d8f602",
          "output": "False",
          "target": "4b16eb3a-63b8-411a-f158-5cdd595b147a",
          "input": "@seqin"
        },
        {
          "source": "ffea4cd6-a82d-4fd2-ff5d-74c503f2c908",
          "output": "False",
          "target": "f9757f11-4358-4852-8c53-18fe014953e1",
          "input": "start"
        },
        {
          "source": "d63f168e-fca5-4112-f1db-1522b8ee3fce",
          "output": "True",
          "target": "71956643-8cec-4407-9f4b-b34f6177a9bb",
          "input": "@seqin"
        },
        {
          "source": "d63f168e-fca5-4112-f1db-1522b8ee3fce",
          "output": "False",
          "target": "0f7f2cbb-0225-40df-ab13-acb928ca9d1b",
          "input": "@seqin"
        },
        {
          "source": "ffea4cd6-a82d-4fd2-ff5d-74c503f2c908",
          "output": "True",
          "target": "61e40128-853b-403e-d359-4910b6f17565",
          "input": "@seqin"
        },
        {
          "source": "4b16eb3a-63b8-411a-f158-5cdd595b147a",
          "output": "@seqout",
          "target": "ecfe11f5-574f-4a8c-efd0-d4798000ac6b",
          "input": "@seqin"
        },
        {
          "source": "49f1c1be-ba53-4564-d1f9-0a524c723ddc",
          "output": "7409c12c-f563-4178-b42d-c705259b7004",
          "target": "245a891f-9fce-4e4b-a94b-37b2a018e1b9",
          "input": "@seqin"
        },
        {
          "source": "49f1c1be-ba53-4564-d1f9-0a524c723ddc",
          "output": "a30aa194-4aa3-4f2a-8fbb-c2fa4f63e767",
          "target": "a61f4b3b-2c7a-447b-82da-9cec0ad5721a",
          "input": "@seqin"
        },
        {
          "source": "0f7f2cbb-0225-40df-ab13-acb928ca9d1b",
          "output": "result",
          "target": "49f1c1be-ba53-4564-d1f9-0a524c723ddc",
          "input": "171575fc-8624-4642-8ee6-7e84778fe98c"
        },
        {
          "source": "49f1c1be-ba53-4564-d1f9-0a524c723ddc",
          "output": "@seqout",
          "target": "f9757f11-4358-4852-8c53-18fe014953e1",
          "input": "next"
        }
      ],
      "localVariables": [
        {
          "name": "new_devices",
          "type": "array:struct:Device",
          "defaultValue": "[null, null, null, null, null, null, null, null, null, null]",
          "persistent": false
        },
        {
          "name": "idx_new_device",
          "type": "integer",
          "defaultValue": "0",
          "persistent": false
        },
        {
          "name": "idx_device",
          "type": "integer",
          "defaultValue": "0",
          "persistent": false
        }
      ],
      "name": "enum_devices",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "SerialListPorts",
          "left": -287,
          "top": -57,
          "width": 135,
          "height": 61,
          "wireID": "770bdaf7-0d50-4dd7-bff4-1856e30027c6",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "LoopActionComponent",
          "left": 82,
          "top": -57,
          "width": 375,
          "height": 83,
          "wireID": "8e821858-45d3-4faa-ff12-fdee4d30c83e",
          "customInputs": [],
          "customOutputs": [],
          "variable": "idx_port",
          "from": "0",
          "to": "ports.length - 1",
          "step": "1",
          "version": 1
        },
        {
          "type": "SetVariableActionComponent",
          "left": -120,
          "top": -57,
          "width": 169,
          "height": 62,
          "wireID": "160af38e-9a15-4459-b4b2-b0205760802f",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "ports",
          "value": "value"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 496,
          "top": -57,
          "width": 448,
          "height": 83,
          "wireID": "050e14dd-0b1f-422d-c6e3-62232b3b4044",
          "customInputs": [
            {
              "name": "serial_number",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "value": "ports[idx_port].manufacturer == \"FTDI\" &&\nports[idx_port].serialNumber == serial_number"
        },
        {
          "type": "OutputActionComponent",
          "left": 1245,
          "top": 12,
          "width": 87,
          "height": 29,
          "wireID": "02d2de79-3cff-4933-96f5-78efcdab3b1f",
          "customInputs": [],
          "customOutputs": [],
          "name": "path",
          "outputType": "string"
        },
        {
          "type": "EvalExprActionComponent",
          "left": 986,
          "top": -58,
          "width": 201,
          "height": 62,
          "wireID": "26ef8e9a-0b35-4690-c882-340c68f69ab0",
          "customInputs": [],
          "customOutputs": [],
          "expression": "ports[idx_port].path"
        },
        {
          "type": "ConstantActionComponent",
          "left": 1098,
          "top": 41,
          "width": 89,
          "height": 61,
          "wireID": "3aaef4ed-0ae4-4dcd-d5fc-7a149ab400f6",
          "customInputs": [],
          "customOutputs": [],
          "value": "\"\""
        },
        {
          "type": "InputActionComponent",
          "left": 329,
          "top": -113,
          "width": 128,
          "height": 29,
          "wireID": "a497339e-24e8-4237-a04a-3ecb0c768d8b",
          "customInputs": [],
          "customOutputs": [],
          "name": "serial_number",
          "inputType": "string"
        },
        {
          "type": "CommentActionComponent",
          "left": -287,
          "top": -162,
          "width": 463,
          "height": 78,
          "wireID": "caf24fb2-c77a-4d0e-cf05-5df952deab82",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Loop over serial ports and find serial port path that matches given serial_number.</div>"
        }
      ],
      "connectionLines": [
        {
          "source": "160af38e-9a15-4459-b4b2-b0205760802f",
          "output": "@seqout",
          "target": "8e821858-45d3-4faa-ff12-fdee4d30c83e",
          "input": "start"
        },
        {
          "source": "770bdaf7-0d50-4dd7-bff4-1856e30027c6",
          "output": "ports",
          "target": "160af38e-9a15-4459-b4b2-b0205760802f",
          "input": "value"
        },
        {
          "source": "050e14dd-0b1f-422d-c6e3-62232b3b4044",
          "output": "False",
          "target": "8e821858-45d3-4faa-ff12-fdee4d30c83e",
          "input": "next"
        },
        {
          "source": "8e821858-45d3-4faa-ff12-fdee4d30c83e",
          "output": "@seqout",
          "target": "050e14dd-0b1f-422d-c6e3-62232b3b4044",
          "input": "@seqin"
        },
        {
          "source": "050e14dd-0b1f-422d-c6e3-62232b3b4044",
          "output": "True",
          "target": "26ef8e9a-0b35-4690-c882-340c68f69ab0",
          "input": "@seqin"
        },
        {
          "source": "26ef8e9a-0b35-4690-c882-340c68f69ab0",
          "output": "result",
          "target": "02d2de79-3cff-4933-96f5-78efcdab3b1f",
          "input": "@seqin"
        },
        {
          "source": "8e821858-45d3-4faa-ff12-fdee4d30c83e",
          "output": "done",
          "target": "3aaef4ed-0ae4-4dcd-d5fc-7a149ab400f6",
          "input": "@seqin"
        },
        {
          "source": "3aaef4ed-0ae4-4dcd-d5fc-7a149ab400f6",
          "output": "value",
          "target": "02d2de79-3cff-4933-96f5-78efcdab3b1f",
          "input": "@seqin"
        },
        {
          "source": "a497339e-24e8-4237-a04a-3ecb0c768d8b",
          "output": "@seqout",
          "target": "050e14dd-0b1f-422d-c6e3-62232b3b4044",
          "input": "serial_number"
        }
      ],
      "localVariables": [
        {
          "name": "ports",
          "type": "any",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "idx_port",
          "type": "integer",
          "defaultValue": "0",
          "persistent": false
        }
      ],
      "name": "find_serial_port_path",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "InputActionComponent",
          "left": -289,
          "top": -67,
          "width": 87,
          "height": 29,
          "wireID": "3fc58eb5-8399-4235-a489-bef5db4f2b4f",
          "customInputs": [],
          "customOutputs": [],
          "name": "device",
          "inputType": "struct:Device"
        },
        {
          "type": "ExecuteCommand",
          "left": 43,
          "top": -67,
          "width": 302,
          "height": 152,
          "wireID": "483cdb93-5935-406c-a28d-053b271f58a9",
          "customInputs": [],
          "customOutputs": [],
          "command": "System.ProjectFolder + \"/fujprog\"",
          "arguments": "[\n  \"-p\", device.deviceNumber, \n  System.ProjectFolder +\n    \"/ulx3s_85f_passthru.bit\"\n]"
        },
        {
          "type": "OutputActionComponent",
          "left": 459,
          "top": -170,
          "width": 87,
          "height": 29,
          "wireID": "6eb08fef-9d0b-490c-f889-9deb5fdd550f",
          "customInputs": [],
          "customOutputs": [],
          "name": "stdout",
          "outputType": "string"
        },
        {
          "type": "OutputActionComponent",
          "left": 459,
          "top": -125,
          "width": 87,
          "height": 29,
          "wireID": "d89c4ad0-fb95-4473-f033-22de07339232",
          "customInputs": [],
          "customOutputs": [],
          "name": "stderr",
          "outputType": "string"
        },
        {
          "type": "Regexp",
          "left": 450,
          "top": 57,
          "width": 244,
          "height": 83,
          "wireID": "71630faf-3c6c-4438-ce5c-d99fa899b820",
          "customInputs": [
            {
              "name": "data",
              "type": "string"
            }
          ],
          "customOutputs": [],
          "pattern": "\"Programming: (.+)%\"",
          "data": "data"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 735,
          "top": 166,
          "width": 209,
          "height": 62,
          "wireID": "745e2904-68ff-4adc-e160-a1cf33e2fc2b",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "progress",
          "value": "value[1]"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 735,
          "top": -18,
          "width": 301,
          "height": 83,
          "wireID": "ec7df1b3-e747-454a-b0ae-2bd6d1f8d036",
          "customInputs": [
            {
              "name": "result",
              "type": "integer"
            }
          ],
          "customOutputs": [],
          "value": "progress == 100 && result == 0"
        },
        {
          "type": "SetVariableActionComponent",
          "left": -167,
          "top": -67,
          "width": 175,
          "height": 62,
          "wireID": "3ce506a4-414a-4a3f-e5bb-02853882acf0",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "device",
          "value": "value"
        },
        {
          "type": "OutputActionComponent",
          "left": 1233,
          "top": 38,
          "width": 87,
          "height": 29,
          "wireID": "e087430e-0c46-4e7e-c104-08e0d377cdf8",
          "customInputs": [],
          "customOutputs": [],
          "name": "version",
          "outputType": "string"
        },
        {
          "type": "ConstantActionComponent",
          "left": 1076,
          "top": -18,
          "width": 89,
          "height": 61,
          "wireID": "a4072b46-45c3-49c6-dc1b-91e0bde52611",
          "customInputs": [],
          "customOutputs": [],
          "value": "\"85\""
        },
        {
          "type": "ConstantActionComponent",
          "left": 1076,
          "top": 67,
          "width": 89,
          "height": 61,
          "wireID": "a1804281-ef75-4f94-add5-e125c2fd39a8",
          "customInputs": [],
          "customOutputs": [],
          "value": "\"12\""
        },
        {
          "type": "CommentActionComponent",
          "left": -177,
          "top": -170,
          "width": 435,
          "height": 57,
          "wireID": "2db80752-f507-4068-e9bc-36f43440345c",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Try fujprog with 85F bitstram, if fails then device version is 15F.</div>"
        }
      ],
      "connectionLines": [
        {
          "source": "483cdb93-5935-406c-a28d-053b271f58a9",
          "output": "stdout",
          "target": "6eb08fef-9d0b-490c-f889-9deb5fdd550f",
          "input": "@seqin"
        },
        {
          "source": "483cdb93-5935-406c-a28d-053b271f58a9",
          "output": "stderr",
          "target": "d89c4ad0-fb95-4473-f033-22de07339232",
          "input": "@seqin"
        },
        {
          "source": "483cdb93-5935-406c-a28d-053b271f58a9",
          "output": "stderr",
          "target": "71630faf-3c6c-4438-ce5c-d99fa899b820",
          "input": "data"
        },
        {
          "source": "71630faf-3c6c-4438-ce5c-d99fa899b820",
          "output": "match",
          "target": "745e2904-68ff-4adc-e160-a1cf33e2fc2b",
          "input": "value"
        },
        {
          "source": "745e2904-68ff-4adc-e160-a1cf33e2fc2b",
          "output": "@seqout",
          "target": "71630faf-3c6c-4438-ce5c-d99fa899b820",
          "input": "next"
        },
        {
          "source": "71630faf-3c6c-4438-ce5c-d99fa899b820",
          "output": "done",
          "target": "ec7df1b3-e747-454a-b0ae-2bd6d1f8d036",
          "input": "@seqin"
        },
        {
          "source": "483cdb93-5935-406c-a28d-053b271f58a9",
          "output": "stderr",
          "target": "71630faf-3c6c-4438-ce5c-d99fa899b820",
          "input": "@seqin"
        },
        {
          "source": "3fc58eb5-8399-4235-a489-bef5db4f2b4f",
          "output": "@seqout",
          "target": "3ce506a4-414a-4a3f-e5bb-02853882acf0",
          "input": "value"
        },
        {
          "source": "a4072b46-45c3-49c6-dc1b-91e0bde52611",
          "output": "value",
          "target": "e087430e-0c46-4e7e-c104-08e0d377cdf8",
          "input": "@seqin"
        },
        {
          "source": "ec7df1b3-e747-454a-b0ae-2bd6d1f8d036",
          "output": "True",
          "target": "a4072b46-45c3-49c6-dc1b-91e0bde52611",
          "input": "@seqin"
        },
        {
          "source": "ec7df1b3-e747-454a-b0ae-2bd6d1f8d036",
          "output": "False",
          "target": "a1804281-ef75-4f94-add5-e125c2fd39a8",
          "input": "@seqin"
        },
        {
          "source": "a1804281-ef75-4f94-add5-e125c2fd39a8",
          "output": "value",
          "target": "e087430e-0c46-4e7e-c104-08e0d377cdf8",
          "input": "@seqin"
        },
        {
          "source": "483cdb93-5935-406c-a28d-053b271f58a9",
          "output": "finished",
          "target": "ec7df1b3-e747-454a-b0ae-2bd6d1f8d036",
          "input": "result"
        },
        {
          "source": "3ce506a4-414a-4a3f-e5bb-02853882acf0",
          "output": "@seqout",
          "target": "483cdb93-5935-406c-a28d-053b271f58a9",
          "input": "@seqin"
        }
      ],
      "localVariables": [
        {
          "name": "device",
          "type": "struct:Device",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "progress",
          "type": "integer",
          "defaultValue": "0",
          "persistent": false
        }
      ],
      "name": "find_device_version",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "InputActionComponent",
          "left": -323,
          "top": -48,
          "width": 118,
          "height": 29,
          "wireID": "5052d1e0-a07a-48e4-f9c1-8dab11cf5733",
          "customInputs": [],
          "customOutputs": [],
          "name": "current_step",
          "inputType": "integer"
        },
        {
          "type": "LoopActionComponent",
          "left": -113,
          "top": -48,
          "width": 601,
          "height": 105,
          "wireID": "a27896b4-7ac4-4eed-a7ea-a3e7cafeeec4",
          "customInputs": [
            {
              "name": "current_step",
              "type": "integer"
            }
          ],
          "customOutputs": [],
          "variable": "idx_step",
          "from": "current_step + 1",
          "to": "Array.length(test_steps) - 1",
          "step": "1",
          "version": 1
        },
        {
          "type": "IsTrueActionComponent",
          "left": 522,
          "top": -48,
          "width": 236,
          "height": 83,
          "wireID": "1130d7ad-0fc9-4e8a-b326-b1af7b17c54b",
          "customInputs": [],
          "customOutputs": [],
          "value": "test_step_enabled[idx_step]"
        },
        {
          "type": "OutputActionComponent",
          "left": 1003,
          "top": 44,
          "width": 100,
          "height": 29,
          "wireID": "f799f405-c02a-4bcc-a6d0-e14522382ea8",
          "customInputs": [],
          "customOutputs": [],
          "name": "next_step",
          "outputType": "integer"
        },
        {
          "type": "EvalExprActionComponent",
          "left": 817,
          "top": -48,
          "width": 126,
          "height": 62,
          "wireID": "f47db3c3-4312-4095-9e5c-5f49752dc6c7",
          "customInputs": [],
          "customOutputs": [],
          "expression": "idx_step"
        },
        {
          "type": "ConstantActionComponent",
          "left": 817,
          "top": 57,
          "width": 89,
          "height": 61,
          "wireID": "7c2f6de8-d7d7-41b1-a136-551db03e2124",
          "customInputs": [],
          "customOutputs": [],
          "value": "-1"
        },
        {
          "type": "CommentActionComponent",
          "left": -323,
          "top": -139,
          "width": 323,
          "height": 78,
          "wireID": "3b569681-4ad6-4c6b-cb37-a4249d89e712",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Returns next step, takes care of which tests are enabled (uses test_step_enabled global variable).</div>"
        }
      ],
      "connectionLines": [
        {
          "source": "a27896b4-7ac4-4eed-a7ea-a3e7cafeeec4",
          "output": "@seqout",
          "target": "1130d7ad-0fc9-4e8a-b326-b1af7b17c54b",
          "input": "@seqin"
        },
        {
          "source": "1130d7ad-0fc9-4e8a-b326-b1af7b17c54b",
          "output": "False",
          "target": "a27896b4-7ac4-4eed-a7ea-a3e7cafeeec4",
          "input": "next"
        },
        {
          "source": "5052d1e0-a07a-48e4-f9c1-8dab11cf5733",
          "output": "@seqout",
          "target": "a27896b4-7ac4-4eed-a7ea-a3e7cafeeec4",
          "input": "current_step"
        },
        {
          "source": "5052d1e0-a07a-48e4-f9c1-8dab11cf5733",
          "output": "@seqout",
          "target": "a27896b4-7ac4-4eed-a7ea-a3e7cafeeec4",
          "input": "start"
        },
        {
          "source": "1130d7ad-0fc9-4e8a-b326-b1af7b17c54b",
          "output": "True",
          "target": "f47db3c3-4312-4095-9e5c-5f49752dc6c7",
          "input": "@seqin"
        },
        {
          "source": "f47db3c3-4312-4095-9e5c-5f49752dc6c7",
          "output": "result",
          "target": "f799f405-c02a-4bcc-a6d0-e14522382ea8",
          "input": "@seqin"
        },
        {
          "source": "a27896b4-7ac4-4eed-a7ea-a3e7cafeeec4",
          "output": "done",
          "target": "7c2f6de8-d7d7-41b1-a136-551db03e2124",
          "input": "@seqin"
        },
        {
          "source": "7c2f6de8-d7d7-41b1-a136-551db03e2124",
          "output": "value",
          "target": "f799f405-c02a-4bcc-a6d0-e14522382ea8",
          "input": "@seqin"
        }
      ],
      "localVariables": [
        {
          "name": "device",
          "type": "struct:Device",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "idx_step",
          "type": "integer",
          "defaultValue": "0",
          "persistent": false
        }
      ],
      "name": "next_step",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "InputActionComponent",
          "left": -323,
          "top": -48,
          "width": 118,
          "height": 29,
          "wireID": "5052d1e0-a07a-48e4-f9c1-8dab11cf5733",
          "customInputs": [],
          "customOutputs": [],
          "name": "current_step",
          "inputType": "integer"
        },
        {
          "type": "LoopActionComponent",
          "left": -113,
          "top": -48,
          "width": 473,
          "height": 105,
          "wireID": "a27896b4-7ac4-4eed-a7ea-a3e7cafeeec4",
          "customInputs": [
            {
              "name": "current_step",
              "type": "integer"
            }
          ],
          "customOutputs": [],
          "variable": "idx_step",
          "from": "current_step - 1",
          "to": "0",
          "step": "-1",
          "version": 1
        },
        {
          "type": "IsTrueActionComponent",
          "left": 414,
          "top": -48,
          "width": 236,
          "height": 83,
          "wireID": "1130d7ad-0fc9-4e8a-b326-b1af7b17c54b",
          "customInputs": [],
          "customOutputs": [],
          "value": "test_step_enabled[idx_step]"
        },
        {
          "type": "OutputActionComponent",
          "left": 1003,
          "top": 44,
          "width": 100,
          "height": 29,
          "wireID": "f799f405-c02a-4bcc-a6d0-e14522382ea8",
          "customInputs": [],
          "customOutputs": [],
          "name": "next_step",
          "outputType": "integer"
        },
        {
          "type": "EvalExprActionComponent",
          "left": 725,
          "top": -48,
          "width": 126,
          "height": 62,
          "wireID": "f47db3c3-4312-4095-9e5c-5f49752dc6c7",
          "customInputs": [],
          "customOutputs": [],
          "expression": "idx_step"
        },
        {
          "type": "ConstantActionComponent",
          "left": 762,
          "top": 57,
          "width": 89,
          "height": 61,
          "wireID": "7c2f6de8-d7d7-41b1-a136-551db03e2124",
          "customInputs": [],
          "customOutputs": [],
          "value": "-1"
        },
        {
          "type": "CommentActionComponent",
          "left": -313,
          "top": -140,
          "width": 333,
          "height": 78,
          "wireID": "31ded320-a291-404c-e905-64f924257633",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Returns previousstep, takes care of which tests are enabled (uses test_step_enabled global variable).</div>"
        }
      ],
      "connectionLines": [
        {
          "source": "a27896b4-7ac4-4eed-a7ea-a3e7cafeeec4",
          "output": "@seqout",
          "target": "1130d7ad-0fc9-4e8a-b326-b1af7b17c54b",
          "input": "@seqin"
        },
        {
          "source": "1130d7ad-0fc9-4e8a-b326-b1af7b17c54b",
          "output": "False",
          "target": "a27896b4-7ac4-4eed-a7ea-a3e7cafeeec4",
          "input": "next"
        },
        {
          "source": "5052d1e0-a07a-48e4-f9c1-8dab11cf5733",
          "output": "@seqout",
          "target": "a27896b4-7ac4-4eed-a7ea-a3e7cafeeec4",
          "input": "current_step"
        },
        {
          "source": "5052d1e0-a07a-48e4-f9c1-8dab11cf5733",
          "output": "@seqout",
          "target": "a27896b4-7ac4-4eed-a7ea-a3e7cafeeec4",
          "input": "start"
        },
        {
          "source": "1130d7ad-0fc9-4e8a-b326-b1af7b17c54b",
          "output": "True",
          "target": "f47db3c3-4312-4095-9e5c-5f49752dc6c7",
          "input": "@seqin"
        },
        {
          "source": "f47db3c3-4312-4095-9e5c-5f49752dc6c7",
          "output": "result",
          "target": "f799f405-c02a-4bcc-a6d0-e14522382ea8",
          "input": "@seqin"
        },
        {
          "source": "a27896b4-7ac4-4eed-a7ea-a3e7cafeeec4",
          "output": "done",
          "target": "7c2f6de8-d7d7-41b1-a136-551db03e2124",
          "input": "@seqin"
        },
        {
          "source": "7c2f6de8-d7d7-41b1-a136-551db03e2124",
          "output": "value",
          "target": "f799f405-c02a-4bcc-a6d0-e14522382ea8",
          "input": "@seqin"
        }
      ],
      "localVariables": [
        {
          "name": "device",
          "type": "struct:Device",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "idx_step",
          "type": "integer",
          "defaultValue": "0",
          "persistent": false
        }
      ],
      "name": "prev_step",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "InputActionComponent",
          "left": -404,
          "top": -48,
          "width": 105,
          "height": 29,
          "wireID": "5052d1e0-a07a-48e4-f9c1-8dab11cf5733",
          "customInputs": [],
          "customOutputs": [],
          "name": "idx_device",
          "inputType": "integer"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 742,
          "top": -49,
          "width": 306,
          "height": 62,
          "wireID": "e402c90e-ce36-48d5-8b24-11d804cf4335",
          "customInputs": [
            {
              "name": "next_step",
              "type": "integer"
            }
          ],
          "customOutputs": [],
          "variable": "device.currentStep",
          "value": "next_step"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1085,
          "top": -48,
          "width": 361,
          "height": 62,
          "wireID": "ae331442-05e1-4709-a9b1-0e744e680896",
          "customInputs": [],
          "customOutputs": [],
          "variable": "device.stepStatus.status",
          "value": "StepStatus.NotStarted"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 472,
          "top": -102,
          "width": 221,
          "height": 83,
          "wireID": "1130d7ad-0fc9-4e8a-b326-b1af7b17c54b",
          "customInputs": [
            {
              "name": "next_step",
              "type": "integer"
            }
          ],
          "customOutputs": [],
          "value": "next_step != -1"
        },
        {
          "type": "CallActionActionComponent",
          "left": 278,
          "top": -49,
          "width": 155,
          "height": 61,
          "wireID": "817dd57a-566d-4007-f6c9-db8713e36f23",
          "customInputs": [],
          "customOutputs": [],
          "action": "next_step"
        },
        {
          "type": "EvalExprActionComponent",
          "left": 61,
          "top": -49,
          "width": 188,
          "height": 62,
          "wireID": "cc37f417-b7e4-4c2f-9df3-6301ddf696ee",
          "customInputs": [],
          "customOutputs": [],
          "expression": "device.currentStep"
        },
        {
          "type": "SetVariableActionComponent",
          "left": -257,
          "top": -49,
          "width": 297,
          "height": 62,
          "wireID": "31419c11-221b-436f-aa0c-08ceb8c54101",
          "customInputs": [
            {
              "name": "idx_device",
              "type": "integer"
            }
          ],
          "customOutputs": [],
          "variable": "device",
          "value": "devices[idx_device]"
        },
        {
          "type": "EndActionComponent",
          "left": 1511,
          "top": 65,
          "width": 87,
          "height": 29,
          "wireID": "8b681be2-73c4-443a-ad4c-f52282d27ab5",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "OutputActionComponent",
          "left": 1511,
          "top": 120,
          "width": 91,
          "height": 29,
          "wireID": "210c0d91-efe0-445e-9777-bd1db36a6dab",
          "customInputs": [],
          "customOutputs": [],
          "name": "No step",
          "outputType": "boolean"
        },
        {
          "type": "CommentActionComponent",
          "left": -404,
          "top": -138,
          "width": 435,
          "height": 57,
          "wireID": "475b3738-4e75-471e-8e16-8604f91a1a51",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Move device to the next step (updates device's currentStep field).</div>"
        }
      ],
      "connectionLines": [
        {
          "source": "e402c90e-ce36-48d5-8b24-11d804cf4335",
          "output": "@seqout",
          "target": "ae331442-05e1-4709-a9b1-0e744e680896",
          "input": "@seqin"
        },
        {
          "source": "1130d7ad-0fc9-4e8a-b326-b1af7b17c54b",
          "output": "True",
          "target": "e402c90e-ce36-48d5-8b24-11d804cf4335",
          "input": "@seqin"
        },
        {
          "source": "5052d1e0-a07a-48e4-f9c1-8dab11cf5733",
          "output": "@seqout",
          "target": "31419c11-221b-436f-aa0c-08ceb8c54101",
          "input": "idx_device"
        },
        {
          "source": "cc37f417-b7e4-4c2f-9df3-6301ddf696ee",
          "output": "result",
          "target": "817dd57a-566d-4007-f6c9-db8713e36f23",
          "input": "5052d1e0-a07a-48e4-f9c1-8dab11cf5733"
        },
        {
          "source": "817dd57a-566d-4007-f6c9-db8713e36f23",
          "output": "f799f405-c02a-4bcc-a6d0-e14522382ea8",
          "target": "1130d7ad-0fc9-4e8a-b326-b1af7b17c54b",
          "input": "next_step"
        },
        {
          "source": "817dd57a-566d-4007-f6c9-db8713e36f23",
          "output": "f799f405-c02a-4bcc-a6d0-e14522382ea8",
          "target": "e402c90e-ce36-48d5-8b24-11d804cf4335",
          "input": "next_step"
        },
        {
          "source": "31419c11-221b-436f-aa0c-08ceb8c54101",
          "output": "@seqout",
          "target": "cc37f417-b7e4-4c2f-9df3-6301ddf696ee",
          "input": "@seqin"
        },
        {
          "source": "ae331442-05e1-4709-a9b1-0e744e680896",
          "output": "@seqout",
          "target": "8b681be2-73c4-443a-ad4c-f52282d27ab5",
          "input": "@seqin"
        },
        {
          "source": "1130d7ad-0fc9-4e8a-b326-b1af7b17c54b",
          "output": "False",
          "target": "210c0d91-efe0-445e-9777-bd1db36a6dab",
          "input": "@seqin"
        }
      ],
      "localVariables": [
        {
          "name": "device",
          "type": "struct:Device",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "idx_step",
          "type": "integer",
          "defaultValue": "0",
          "persistent": false
        }
      ],
      "name": "move_to_next_step",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "SetVariableActionComponent",
          "left": 854,
          "top": -7,
          "width": 306,
          "height": 62,
          "wireID": "9c298cb7-0420-4fb3-f87c-ea2748436b6b",
          "customInputs": [
            {
              "name": "next_step",
              "type": "integer"
            }
          ],
          "customOutputs": [],
          "variable": "device.currentStep",
          "value": "next_step"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 585,
          "top": -61,
          "width": 221,
          "height": 83,
          "wireID": "641b77f6-01ee-47f1-ca79-ff56ded0ab82",
          "customInputs": [
            {
              "name": "next_step",
              "type": "integer"
            }
          ],
          "customOutputs": [],
          "value": "next_step != -1"
        },
        {
          "type": "CallActionActionComponent",
          "left": 391,
          "top": -7,
          "width": 155,
          "height": 61,
          "wireID": "2eca9241-266f-494b-9c5d-474a691da2ce",
          "customInputs": [],
          "customOutputs": [],
          "action": "prev_step"
        },
        {
          "type": "InputActionComponent",
          "left": -289,
          "top": -6,
          "width": 105,
          "height": 29,
          "wireID": "c925fa05-7e25-452d-c3ef-5f11cae2c077",
          "customInputs": [],
          "customOutputs": [],
          "name": "idx_device",
          "inputType": "integer"
        },
        {
          "type": "EvalExprActionComponent",
          "left": 176,
          "top": -7,
          "width": 188,
          "height": 62,
          "wireID": "468935f3-f184-482c-c91c-a23dd3f31bbc",
          "customInputs": [],
          "customOutputs": [],
          "expression": "device.currentStep"
        },
        {
          "type": "SetVariableActionComponent",
          "left": -142,
          "top": -7,
          "width": 297,
          "height": 62,
          "wireID": "bd3a36d3-fb1b-421b-ecc1-e4dec7514a3a",
          "customInputs": [
            {
              "name": "idx_device",
              "type": "integer"
            }
          ],
          "customOutputs": [],
          "variable": "device",
          "value": "devices[idx_device]"
        },
        {
          "type": "CommentActionComponent",
          "left": -289,
          "top": -118,
          "width": 435,
          "height": 78,
          "wireID": "d951e24f-d5c1-460e-e25a-b0488aae94d8",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Move device to the previous step (updates device's currentStep field).</div>"
        }
      ],
      "connectionLines": [
        {
          "source": "641b77f6-01ee-47f1-ca79-ff56ded0ab82",
          "output": "True",
          "target": "9c298cb7-0420-4fb3-f87c-ea2748436b6b",
          "input": "@seqin"
        },
        {
          "source": "2eca9241-266f-494b-9c5d-474a691da2ce",
          "output": "f799f405-c02a-4bcc-a6d0-e14522382ea8",
          "target": "641b77f6-01ee-47f1-ca79-ff56ded0ab82",
          "input": "next_step"
        },
        {
          "source": "2eca9241-266f-494b-9c5d-474a691da2ce",
          "output": "f799f405-c02a-4bcc-a6d0-e14522382ea8",
          "target": "9c298cb7-0420-4fb3-f87c-ea2748436b6b",
          "input": "next_step"
        },
        {
          "source": "c925fa05-7e25-452d-c3ef-5f11cae2c077",
          "output": "@seqout",
          "target": "bd3a36d3-fb1b-421b-ecc1-e4dec7514a3a",
          "input": "idx_device"
        },
        {
          "source": "bd3a36d3-fb1b-421b-ecc1-e4dec7514a3a",
          "output": "@seqout",
          "target": "468935f3-f184-482c-c91c-a23dd3f31bbc",
          "input": "@seqin"
        },
        {
          "source": "468935f3-f184-482c-c91c-a23dd3f31bbc",
          "output": "result",
          "target": "2eca9241-266f-494b-9c5d-474a691da2ce",
          "input": "5052d1e0-a07a-48e4-f9c1-8dab11cf5733"
        }
      ],
      "localVariables": [
        {
          "name": "device",
          "type": "struct:Device",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "idx_step",
          "type": "integer",
          "defaultValue": "0",
          "persistent": false
        }
      ],
      "name": "move_to_prev_step",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "StartActionComponent",
          "left": -314,
          "top": -62,
          "width": 87,
          "height": 29,
          "wireID": "0a15ae28-a08f-4381-e671-f991e680cfd2",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "EndActionComponent",
          "left": 757,
          "top": 177,
          "width": 87,
          "height": 29,
          "wireID": "62a57e1f-c5b4-433b-c84c-46a8f2711879",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "LoopActionComponent",
          "left": -156,
          "top": -62,
          "width": 449,
          "height": 83,
          "wireID": "b5e506b8-6a43-428b-aeda-4e92639e06f3",
          "customInputs": [],
          "customOutputs": [],
          "variable": "idx_device",
          "from": "0",
          "to": "Array.length(devices) - 1",
          "step": "1",
          "version": 1
        },
        {
          "type": "IsTrueActionComponent",
          "left": 319,
          "top": -197,
          "width": 236,
          "height": 83,
          "wireID": "3b7753b0-a3d3-4700-cf64-21801a69298e",
          "customInputs": [],
          "customOutputs": [],
          "value": "devices[idx_device] != null"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 910,
          "top": -337,
          "width": 471,
          "height": 83,
          "wireID": "5f6447d9-919d-4712-8352-b31c8df4efa2",
          "customInputs": [],
          "customOutputs": [],
          "value": "devices[idx_device].stepStatus.status == StepStatus.NotStarted"
        },
        {
          "type": "CallActionActionComponent",
          "left": 1899,
          "top": -176,
          "width": 127,
          "height": 83,
          "wireID": "17c9ccbd-4615-48a2-95ca-0d9daf734d10",
          "customInputs": [],
          "customOutputs": [],
          "action": "do_test_step"
        },
        {
          "type": "OutputActionComponent",
          "left": 2076,
          "top": -176,
          "width": 87,
          "height": 29,
          "wireID": "867eb9aa-8a06-440c-9739-438fc92cb2f6",
          "customInputs": [],
          "customOutputs": [],
          "name": "stdout",
          "outputType": "any"
        },
        {
          "type": "OutputActionComponent",
          "left": 2076,
          "top": -122,
          "width": 87,
          "height": 29,
          "wireID": "5c0bddf6-a1e8-43cb-e6e4-cef69786e7f3",
          "customInputs": [],
          "customOutputs": [],
          "name": "stderr",
          "outputType": "any"
        },
        {
          "type": "EvalExprActionComponent",
          "left": 1714,
          "top": -176,
          "width": 134,
          "height": 62,
          "wireID": "9b8e9fe8-e516-4a2d-8008-aca75462f87a",
          "customInputs": [],
          "customOutputs": [],
          "expression": "idx_device"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 996,
          "top": -62,
          "width": 451,
          "height": 83,
          "wireID": "c6b4f071-2449-4cf2-a322-854ee5facdae",
          "customInputs": [],
          "customOutputs": [],
          "value": "devices[idx_device].stepStatus.status == StepStatus.Success"
        },
        {
          "type": "CallActionActionComponent",
          "left": 1584,
          "top": 87,
          "width": 151,
          "height": 61,
          "wireID": "79607b93-e015-49b4-db2c-94d4c1cac14a",
          "customInputs": [],
          "customOutputs": [],
          "action": "move_to_next_step"
        },
        {
          "type": "EvalExprActionComponent",
          "left": 1497,
          "top": -62,
          "width": 134,
          "height": 62,
          "wireID": "d0ed901b-e3c9-417e-aed0-daa1a1dfdd99",
          "customInputs": [],
          "customOutputs": [],
          "expression": "idx_device"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1805,
          "top": 157,
          "width": 287,
          "height": 62,
          "wireID": "831f3473-02ae-4686-fca0-a03dcf98e7e3",
          "customInputs": [],
          "customOutputs": [],
          "variable": "devices[idx_device].allTestsOK",
          "value": "true"
        },
        {
          "type": "CommentActionComponent",
          "left": -157,
          "top": -161,
          "width": 435,
          "height": 78,
          "wireID": "25279d00-8f32-4e25-b3bc-1ce2aa2039d0",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Loop over all devices, checks if device is ready to start next step, if yes then starts the next step.</div>"
        },
        {
          "type": "CommentActionComponent",
          "left": 1565,
          "top": 0,
          "width": 435,
          "height": 57,
          "wireID": "98275f94-93c0-4e7f-87dd-530a78b1cc49",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Current step finished successfully, move to the next step</div>"
        },
        {
          "type": "CommentActionComponent",
          "left": 1714,
          "top": -254,
          "width": 435,
          "height": 57,
          "wireID": "22d69f2c-11fd-4cae-d041-9869015af29e",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Start step execution</div>"
        },
        {
          "type": "CommentActionComponent",
          "left": 1805,
          "top": 87,
          "width": 435,
          "height": 57,
          "wireID": "6b6343dd-af73-48ba-9126-355415dd8fd1",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->No more steps, testing is done for this device</div>"
        },
        {
          "type": "CallActionActionComponent",
          "left": 2342,
          "top": 157,
          "width": 145,
          "height": 61,
          "wireID": "15b1c5aa-33e5-4c0c-df35-e1ca693a491e",
          "customInputs": [],
          "customOutputs": [],
          "action": "db_update_device"
        },
        {
          "type": "EvalExprActionComponent",
          "left": 2118,
          "top": 157,
          "width": 195,
          "height": 62,
          "wireID": "18475950-bb00-47b5-a3cd-1d5b7c289bed",
          "customInputs": [],
          "customOutputs": [],
          "expression": "devices[idx_device]"
        },
        {
          "type": "CallActionActionComponent",
          "left": 1506,
          "top": -161,
          "width": 145,
          "height": 61,
          "wireID": "3c3defb0-9a80-476b-a205-600424004c03",
          "customInputs": [],
          "customOutputs": [],
          "action": "db_update_device"
        },
        {
          "type": "EvalExprActionComponent",
          "left": 1282,
          "top": -161,
          "width": 195,
          "height": 62,
          "wireID": "cebf13b2-4363-4925-fca4-6f8d6119f83a",
          "customInputs": [],
          "customOutputs": [],
          "expression": "devices[idx_device]"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 597,
          "top": -337,
          "width": 256,
          "height": 83,
          "wireID": "4967139b-cd14-4b6d-bae7-3a16181f189e",
          "customInputs": [],
          "customOutputs": [],
          "value": "devices[idx_device].allTestsOK"
        }
      ],
      "connectionLines": [
        {
          "source": "0a15ae28-a08f-4381-e671-f991e680cfd2",
          "output": "@seqout",
          "target": "b5e506b8-6a43-428b-aeda-4e92639e06f3",
          "input": "start"
        },
        {
          "source": "3b7753b0-a3d3-4700-cf64-21801a69298e",
          "output": "False",
          "target": "62a57e1f-c5b4-433b-c84c-46a8f2711879",
          "input": "@seqin"
        },
        {
          "source": "b5e506b8-6a43-428b-aeda-4e92639e06f3",
          "output": "done",
          "target": "62a57e1f-c5b4-433b-c84c-46a8f2711879",
          "input": "@seqin"
        },
        {
          "source": "b5e506b8-6a43-428b-aeda-4e92639e06f3",
          "output": "@seqout",
          "target": "3b7753b0-a3d3-4700-cf64-21801a69298e",
          "input": "@seqin"
        },
        {
          "source": "3b7753b0-a3d3-4700-cf64-21801a69298e",
          "output": "True",
          "target": "4967139b-cd14-4b6d-bae7-3a16181f189e",
          "input": "@seqin"
        },
        {
          "source": "17c9ccbd-4615-48a2-95ca-0d9daf734d10",
          "output": "a7528088-85ca-4e84-f248-89f546e1b7f9",
          "target": "867eb9aa-8a06-440c-9739-438fc92cb2f6",
          "input": "@seqin"
        },
        {
          "source": "17c9ccbd-4615-48a2-95ca-0d9daf734d10",
          "output": "4161fdc3-14ad-4a71-c67d-e12cc282f7b9",
          "target": "5c0bddf6-a1e8-43cb-e6e4-cef69786e7f3",
          "input": "@seqin"
        },
        {
          "source": "9b8e9fe8-e516-4a2d-8008-aca75462f87a",
          "output": "result",
          "target": "17c9ccbd-4615-48a2-95ca-0d9daf734d10",
          "input": "33f7ba7d-f940-42c1-ae57-e14ad7625976"
        },
        {
          "source": "5f6447d9-919d-4712-8352-b31c8df4efa2",
          "output": "True",
          "target": "9b8e9fe8-e516-4a2d-8008-aca75462f87a",
          "input": "@seqin"
        },
        {
          "source": "5f6447d9-919d-4712-8352-b31c8df4efa2",
          "output": "False",
          "target": "c6b4f071-2449-4cf2-a322-854ee5facdae",
          "input": "@seqin"
        },
        {
          "source": "c6b4f071-2449-4cf2-a322-854ee5facdae",
          "output": "True",
          "target": "d0ed901b-e3c9-417e-aed0-daa1a1dfdd99",
          "input": "@seqin"
        },
        {
          "source": "c6b4f071-2449-4cf2-a322-854ee5facdae",
          "output": "False",
          "target": "b5e506b8-6a43-428b-aeda-4e92639e06f3",
          "input": "next"
        },
        {
          "source": "9b8e9fe8-e516-4a2d-8008-aca75462f87a",
          "output": "@seqout",
          "target": "b5e506b8-6a43-428b-aeda-4e92639e06f3",
          "input": "next"
        },
        {
          "source": "d0ed901b-e3c9-417e-aed0-daa1a1dfdd99",
          "output": "result",
          "target": "79607b93-e015-49b4-db2c-94d4c1cac14a",
          "input": "5052d1e0-a07a-48e4-f9c1-8dab11cf5733"
        },
        {
          "source": "79607b93-e015-49b4-db2c-94d4c1cac14a",
          "output": "@seqout",
          "target": "cebf13b2-4363-4925-fca4-6f8d6119f83a",
          "input": "@seqin"
        },
        {
          "source": "79607b93-e015-49b4-db2c-94d4c1cac14a",
          "output": "210c0d91-efe0-445e-9777-bd1db36a6dab",
          "target": "831f3473-02ae-4686-fca0-a03dcf98e7e3",
          "input": "@seqin"
        },
        {
          "source": "15b1c5aa-33e5-4c0c-df35-e1ca693a491e",
          "output": "@seqout",
          "target": "b5e506b8-6a43-428b-aeda-4e92639e06f3",
          "input": "next"
        },
        {
          "source": "18475950-bb00-47b5-a3cd-1d5b7c289bed",
          "output": "result",
          "target": "15b1c5aa-33e5-4c0c-df35-e1ca693a491e",
          "input": "2cad6570-0fe7-4965-e995-6525559a83b3"
        },
        {
          "source": "831f3473-02ae-4686-fca0-a03dcf98e7e3",
          "output": "@seqout",
          "target": "18475950-bb00-47b5-a3cd-1d5b7c289bed",
          "input": "@seqin"
        },
        {
          "source": "cebf13b2-4363-4925-fca4-6f8d6119f83a",
          "output": "result",
          "target": "3c3defb0-9a80-476b-a205-600424004c03",
          "input": "2cad6570-0fe7-4965-e995-6525559a83b3"
        },
        {
          "source": "3c3defb0-9a80-476b-a205-600424004c03",
          "output": "@seqout",
          "target": "9b8e9fe8-e516-4a2d-8008-aca75462f87a",
          "input": "@seqin"
        },
        {
          "source": "4967139b-cd14-4b6d-bae7-3a16181f189e",
          "output": "False",
          "target": "5f6447d9-919d-4712-8352-b31c8df4efa2",
          "input": "@seqin"
        },
        {
          "source": "4967139b-cd14-4b6d-bae7-3a16181f189e",
          "output": "True",
          "target": "b5e506b8-6a43-428b-aeda-4e92639e06f3",
          "input": "next"
        }
      ],
      "localVariables": [
        {
          "name": "idx_device",
          "type": "integer",
          "defaultValue": "0",
          "persistent": false
        }
      ],
      "name": "do_auto_test",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "InputActionComponent",
          "left": -342,
          "top": -79,
          "width": 105,
          "height": 29,
          "wireID": "33f7ba7d-f940-42c1-ae57-e14ad7625976",
          "customInputs": [],
          "customOutputs": [],
          "name": "idx_device",
          "inputType": "integer"
        },
        {
          "type": "EvalExprActionComponent",
          "left": 144,
          "top": -120,
          "width": 350,
          "height": 62,
          "wireID": "06e4062b-e4b1-45a8-e635-3bbe00f4b6b3",
          "customInputs": [],
          "customOutputs": [],
          "expression": "test_steps[device.currentStep].action_name"
        },
        {
          "type": "EvalExprActionComponent",
          "left": 283,
          "top": 19,
          "width": 126,
          "height": 62,
          "wireID": "75445d83-e490-4d4f-e4c6-308a8c712e62",
          "customInputs": [],
          "customOutputs": [],
          "expression": "device"
        },
        {
          "type": "DynamicCallActionActionComponent",
          "left": 520,
          "top": -120,
          "width": 153,
          "height": 83,
          "wireID": "e62707ce-c9c4-4f52-eb27-5bc62d624f07",
          "customInputs": [
            {
              "name": "action",
              "type": "string"
            },
            {
              "name": "device",
              "type": "struct:Device"
            }
          ],
          "customOutputs": [
            {
              "name": "stdout",
              "type": "any"
            },
            {
              "name": "stderr",
              "type": "any"
            }
          ],
          "action": "action"
        },
        {
          "type": "EndActionComponent",
          "left": 1322,
          "top": -182,
          "width": 87,
          "height": 29,
          "wireID": "54876174-8a7c-4c47-8efc-58d148409e62",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "SetVariableActionComponent",
          "left": -190,
          "top": -77,
          "width": 297,
          "height": 62,
          "wireID": "f819fba6-437f-4a18-c986-d072016e4920",
          "customInputs": [
            {
              "name": "idx_device",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "device",
          "value": "devices[idx_device]"
        },
        {
          "type": "OutputActionComponent",
          "left": 722,
          "top": -79,
          "width": 87,
          "height": 29,
          "wireID": "a7528088-85ca-4e84-f248-89f546e1b7f9",
          "customInputs": [],
          "customOutputs": [],
          "name": "stdout",
          "outputType": "any"
        },
        {
          "type": "OutputActionComponent",
          "left": 722,
          "top": -33,
          "width": 87,
          "height": 29,
          "wireID": "4161fdc3-14ad-4a71-c67d-e12cc282f7b9",
          "customInputs": [],
          "customOutputs": [],
          "name": "stderr",
          "outputType": "any"
        },
        {
          "type": "DelayActionComponent",
          "left": 1204,
          "top": -182,
          "width": 87,
          "height": 62,
          "wireID": "d66186b4-9099-429b-9154-e18ae85725af",
          "customInputs": [],
          "customOutputs": [],
          "milliseconds": "1000"
        },
        {
          "type": "CallActionActionComponent",
          "left": 1031,
          "top": -182,
          "width": 145,
          "height": 61,
          "wireID": "87c573b1-e502-4d3d-cbde-4d264cdf4ac8",
          "customInputs": [],
          "customOutputs": [],
          "action": "db_update_device"
        },
        {
          "type": "EvalExprActionComponent",
          "left": 829,
          "top": -120,
          "width": 126,
          "height": 62,
          "wireID": "2d35b19c-7114-4fa8-e870-2d2ef9ce64a8",
          "customInputs": [],
          "customOutputs": [],
          "expression": "device"
        },
        {
          "type": "CollectStream",
          "left": 787,
          "top": 197,
          "width": 119,
          "height": 61,
          "wireID": "4ba16a5f-098a-448e-d704-fa69b785ace4",
          "customInputs": [
            {
              "name": "stream",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "stream": "stream"
        },
        {
          "type": "CollectStream",
          "left": 787,
          "top": 276,
          "width": 119,
          "height": 61,
          "wireID": "4de427fb-b513-46c6-d004-4d5d5bed356c",
          "customInputs": [
            {
              "name": "stream",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "stream": "stream"
        },
        {
          "type": "CallActionActionComponent",
          "left": 1031,
          "top": -4,
          "width": 119,
          "height": 105,
          "wireID": "6d8475c1-21df-4696-deb1-4fdb30ec50fd",
          "customInputs": [],
          "customOutputs": [],
          "action": "db_insert_test"
        },
        {
          "type": "ConstantActionComponent",
          "left": 829,
          "top": 19,
          "width": 89,
          "height": 61,
          "wireID": "74820ad9-b8c1-46dc-dbeb-8a8d0a08c88d",
          "customInputs": [],
          "customOutputs": [],
          "value": "\"\""
        }
      ],
      "connectionLines": [
        {
          "source": "06e4062b-e4b1-45a8-e635-3bbe00f4b6b3",
          "output": "result",
          "target": "e62707ce-c9c4-4f52-eb27-5bc62d624f07",
          "input": "action"
        },
        {
          "source": "75445d83-e490-4d4f-e4c6-308a8c712e62",
          "output": "result",
          "target": "e62707ce-c9c4-4f52-eb27-5bc62d624f07",
          "input": "device"
        },
        {
          "source": "e62707ce-c9c4-4f52-eb27-5bc62d624f07",
          "output": "@seqout",
          "target": "2d35b19c-7114-4fa8-e870-2d2ef9ce64a8",
          "input": "@seqin"
        },
        {
          "source": "33f7ba7d-f940-42c1-ae57-e14ad7625976",
          "output": "@seqout",
          "target": "f819fba6-437f-4a18-c986-d072016e4920",
          "input": "idx_device"
        },
        {
          "source": "f819fba6-437f-4a18-c986-d072016e4920",
          "output": "@seqout",
          "target": "06e4062b-e4b1-45a8-e635-3bbe00f4b6b3",
          "input": "@seqin"
        },
        {
          "source": "f819fba6-437f-4a18-c986-d072016e4920",
          "output": "@seqout",
          "target": "75445d83-e490-4d4f-e4c6-308a8c712e62",
          "input": "@seqin"
        },
        {
          "source": "06e4062b-e4b1-45a8-e635-3bbe00f4b6b3",
          "output": "@seqout",
          "target": "e62707ce-c9c4-4f52-eb27-5bc62d624f07",
          "input": "@seqin"
        },
        {
          "source": "e62707ce-c9c4-4f52-eb27-5bc62d624f07",
          "output": "stdout",
          "target": "a7528088-85ca-4e84-f248-89f546e1b7f9",
          "input": "@seqin"
        },
        {
          "source": "e62707ce-c9c4-4f52-eb27-5bc62d624f07",
          "output": "stderr",
          "target": "4161fdc3-14ad-4a71-c67d-e12cc282f7b9",
          "input": "@seqin"
        },
        {
          "source": "d66186b4-9099-429b-9154-e18ae85725af",
          "output": "@seqout",
          "target": "54876174-8a7c-4c47-8efc-58d148409e62",
          "input": "@seqin"
        },
        {
          "source": "87c573b1-e502-4d3d-cbde-4d264cdf4ac8",
          "output": "@seqout",
          "target": "d66186b4-9099-429b-9154-e18ae85725af",
          "input": "@seqin"
        },
        {
          "source": "e62707ce-c9c4-4f52-eb27-5bc62d624f07",
          "output": "stdout",
          "target": "4ba16a5f-098a-448e-d704-fa69b785ace4",
          "input": "stream"
        },
        {
          "source": "e62707ce-c9c4-4f52-eb27-5bc62d624f07",
          "output": "stderr",
          "target": "4de427fb-b513-46c6-d004-4d5d5bed356c",
          "input": "stream"
        },
        {
          "source": "2d35b19c-7114-4fa8-e870-2d2ef9ce64a8",
          "output": "result",
          "target": "6d8475c1-21df-4696-deb1-4fdb30ec50fd",
          "input": "2cad6570-0fe7-4965-e995-6525559a83b3"
        },
        {
          "source": "4ba16a5f-098a-448e-d704-fa69b785ace4",
          "output": "data",
          "target": "6d8475c1-21df-4696-deb1-4fdb30ec50fd",
          "input": "695ccaf5-9e26-4177-ec2e-8fd17c90b2a0"
        },
        {
          "source": "4de427fb-b513-46c6-d004-4d5d5bed356c",
          "output": "data",
          "target": "6d8475c1-21df-4696-deb1-4fdb30ec50fd",
          "input": "3ae807e7-d4b6-4d90-d55a-9b141374f351"
        },
        {
          "source": "74820ad9-b8c1-46dc-dbeb-8a8d0a08c88d",
          "output": "value",
          "target": "6d8475c1-21df-4696-deb1-4fdb30ec50fd",
          "input": "695ccaf5-9e26-4177-ec2e-8fd17c90b2a0"
        },
        {
          "source": "74820ad9-b8c1-46dc-dbeb-8a8d0a08c88d",
          "output": "value",
          "target": "6d8475c1-21df-4696-deb1-4fdb30ec50fd",
          "input": "3ae807e7-d4b6-4d90-d55a-9b141374f351"
        },
        {
          "source": "2d35b19c-7114-4fa8-e870-2d2ef9ce64a8",
          "output": "result",
          "target": "87c573b1-e502-4d3d-cbde-4d264cdf4ac8",
          "input": "2cad6570-0fe7-4965-e995-6525559a83b3"
        }
      ],
      "localVariables": [
        {
          "name": "device",
          "type": "struct:Device",
          "defaultValue": "null",
          "persistent": false
        }
      ],
      "name": "do_test_step",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "FileRead",
          "left": 892,
          "top": -140,
          "width": 314,
          "height": 62,
          "wireID": "d9a8fe7c-849e-4fee-e99f-c304a3d98cdd",
          "customInputs": [],
          "customOutputs": [],
          "filePath": "System.ProjectFolder + \"/ULX3S.xml\"",
          "encoding": "\"utf16le\""
        },
        {
          "type": "SetVariableActionComponent",
          "left": 576,
          "top": -140,
          "width": 274,
          "height": 62,
          "wireID": "5d063801-f867-47c8-de9b-983057d7e177",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.InProgress"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 391,
          "top": -140,
          "width": 152,
          "height": 62,
          "wireID": "8e245695-a2b7-463e-98da-256362257258",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "0"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2305,
          "top": -140,
          "width": 159,
          "height": 62,
          "wireID": "59f2fdc0-c554-42ba-e134-a9adb7912bbc",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "50"
        },
        {
          "type": "InputActionComponent",
          "left": -277,
          "top": -58,
          "width": 87,
          "height": 29,
          "wireID": "82e8bf12-f606-4826-fb1a-f7a7a8e412b0",
          "customInputs": [],
          "customOutputs": [],
          "name": "device",
          "inputType": "struct:Device"
        },
        {
          "type": "StartActionComponent",
          "left": -277,
          "top": -140,
          "width": 87,
          "height": 29,
          "wireID": "1f0aac52-c235-4e58-c27d-e8ff406cb081",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "SetVariableActionComponent",
          "left": 103,
          "top": -140,
          "width": 199,
          "height": 62,
          "wireID": "6f09a87b-8150-41f9-aba0-22603b1d261f",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step",
          "value": "device.stepStatus"
        },
        {
          "type": "SetVariableActionComponent",
          "left": -133,
          "top": -140,
          "width": 175,
          "height": 62,
          "wireID": "263a1935-6588-40ed-cdf9-00a0a7adb3a1",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "device",
          "value": "value"
        },
        {
          "type": "EvalJSExprActionComponent",
          "left": 1340,
          "top": -140,
          "width": 721,
          "height": 170,
          "wireID": "a8532d7d-cef8-42f6-af23-8dfe85fb05bd",
          "customInputs": [
            {
              "name": "xml_str",
              "type": "string"
            },
            {
              "name": "manufacturer",
              "type": "string"
            },
            {
              "name": "product",
              "type": "string"
            },
            {
              "name": "serial",
              "type": "string"
            }
          ],
          "customOutputs": [],
          "expression": "const parser = new DOMParser();\nconst d = parser.parseFromString({xml_str}.substring(1), \"text/xml\");\nd.querySelector('USB_String_Descriptors Manufacturer').innerHTML = {manufacturer};\nd.querySelector('USB_String_Descriptors Product_Description').innerHTML = {product};\nd.querySelector('USB_String_Descriptors SerialNumber').innerHTML = {serial};\nconst s = new XMLSerializer();\ns.serializeToString(d);"
        },
        {
          "type": "ConstantActionComponent",
          "left": 1049,
          "top": -51,
          "width": 157,
          "height": 61,
          "wireID": "1014bfc5-d545-4e13-f0ae-b8674e664d6f",
          "customInputs": [],
          "customOutputs": [],
          "value": "\"FER-RADIONA-EMARD\""
        },
        {
          "type": "FileWrite",
          "left": 2132,
          "top": -140,
          "width": 132,
          "height": 83,
          "wireID": "e46f1069-8583-47d0-8f6e-d141a23f71a2",
          "customInputs": [
            {
              "name": "filePath",
              "type": "string"
            },
            {
              "name": "content",
              "type": "string"
            }
          ],
          "customOutputs": [],
          "filePath": "filePath",
          "content": "content",
          "encoding": "\"utf8\""
        },
        {
          "type": "EvalExprActionComponent",
          "left": 2154,
          "top": 97,
          "width": 595,
          "height": 62,
          "wireID": "1cefdaa8-7a09-4494-a1a9-9e386fc4925b",
          "customInputs": [
            {
              "name": "serial",
              "type": "string"
            }
          ],
          "customOutputs": [],
          "expression": "System.ProjectFolder + \"/tmp/\" + serial + \"_\" + device.version + \"F.xml\""
        },
        {
          "type": "EvalExprActionComponent",
          "left": 850,
          "top": 35,
          "width": 356,
          "height": 62,
          "wireID": "8af0e53d-50e4-4d66-bde3-36b4cfc2908a",
          "customInputs": [],
          "customOutputs": [],
          "expression": "\"ULX3S FPGA \" + device.version + \"K v3.0.8\""
        },
        {
          "type": "EndActionComponent",
          "left": 3887,
          "top": -156,
          "width": 87,
          "height": 29,
          "wireID": "09346476-a444-425f-cdb2-f073ffc8996f",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "ExecuteCommand",
          "left": 2779,
          "top": -140,
          "width": 438,
          "height": 170,
          "wireID": "a30400c9-eb8a-47cb-d4d5-97a08209ff76",
          "customInputs": [
            {
              "name": "filePath",
              "type": "string"
            }
          ],
          "customOutputs": [],
          "command": "System.ProjectFolder + \"/FT_Prog-CmdLine.exe\"",
          "arguments": "[\n  \"scan\",\n  \"prog\", device.deviceNumber, \n  filePath,\n  \"cycl\", \"0\"\n]"
        },
        {
          "type": "OutputActionComponent",
          "left": 3366,
          "top": -258,
          "width": 87,
          "height": 29,
          "wireID": "688ae43a-6b9b-4a7d-a2f8-6572a3ea35b1",
          "customInputs": [],
          "customOutputs": [],
          "name": "stdout",
          "outputType": "string"
        },
        {
          "type": "OutputActionComponent",
          "left": 3366,
          "top": -213,
          "width": 87,
          "height": 29,
          "wireID": "e7149e20-7635-419c-df80-507c1b0c2efe",
          "customInputs": [],
          "customOutputs": [],
          "name": "stderr",
          "outputType": "string"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 3346,
          "top": -156,
          "width": 173,
          "height": 83,
          "wireID": "ba8c34f4-a713-4c5a-ca73-a38620082006",
          "customInputs": [
            {
              "name": "result",
              "type": "integer"
            }
          ],
          "customOutputs": [],
          "value": "result == 0"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 3576,
          "top": -156,
          "width": 253,
          "height": 62,
          "wireID": "0a45ace2-861e-41f0-ada1-a0daa55447ab",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.Success"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 3576,
          "top": -78,
          "width": 240,
          "height": 62,
          "wireID": "0a2b9ee4-8d43-4b5b-ff68-5b896dcec782",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.Error"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 2625,
          "top": -140,
          "width": 87,
          "height": 83,
          "wireID": "50fcf0b5-2beb-47ad-dd7a-14b0d3ceaa0d",
          "customInputs": [
            {
              "name": "value",
              "type": "boolean"
            }
          ],
          "customOutputs": [],
          "value": "value"
        },
        {
          "type": "ConstantActionComponent",
          "left": 3128,
          "top": 60,
          "width": 89,
          "height": 61,
          "wireID": "ab695faf-0dec-4894-d4e1-7952a61cbf27",
          "customInputs": [],
          "customOutputs": [],
          "value": "0"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 3353,
          "top": -16,
          "width": 166,
          "height": 62,
          "wireID": "c9fa93d0-dbeb-4a14-af34-86cdd9a6b516",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "100"
        },
        {
          "type": "EvalExprActionComponent",
          "left": 1011,
          "top": 121,
          "width": 195,
          "height": 62,
          "wireID": "a366d95c-5348-41de-fa57-cd420bab54de",
          "customInputs": [],
          "customOutputs": [],
          "expression": "device.serialNumber"
        },
        {
          "type": "ConstantActionComponent",
          "left": 2507,
          "top": -140,
          "width": 89,
          "height": 61,
          "wireID": "37a54493-902a-4d0f-8c3f-a34bcc502221",
          "customInputs": [],
          "customOutputs": [],
          "value": "true"
        },
        {
          "type": "CommentActionComponent",
          "left": 2486,
          "top": -213,
          "width": 263,
          "height": 57,
          "wireID": "7c5b1a49-a4f6-4eef-c137-18fb2a59d3e8",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Set to false to skip FTDI programming!</div>"
        }
      ],
      "connectionLines": [
        {
          "source": "8e245695-a2b7-463e-98da-256362257258",
          "output": "@seqout",
          "target": "5d063801-f867-47c8-de9b-983057d7e177",
          "input": "@seqin"
        },
        {
          "source": "5d063801-f867-47c8-de9b-983057d7e177",
          "output": "@seqout",
          "target": "d9a8fe7c-849e-4fee-e99f-c304a3d98cdd",
          "input": "@seqin"
        },
        {
          "source": "59f2fdc0-c554-42ba-e134-a9adb7912bbc",
          "output": "@seqout",
          "target": "37a54493-902a-4d0f-8c3f-a34bcc502221",
          "input": "@seqin"
        },
        {
          "source": "1f0aac52-c235-4e58-c27d-e8ff406cb081",
          "output": "@seqout",
          "target": "263a1935-6588-40ed-cdf9-00a0a7adb3a1",
          "input": "@seqin"
        },
        {
          "source": "263a1935-6588-40ed-cdf9-00a0a7adb3a1",
          "output": "@seqout",
          "target": "6f09a87b-8150-41f9-aba0-22603b1d261f",
          "input": "@seqin"
        },
        {
          "source": "82e8bf12-f606-4826-fb1a-f7a7a8e412b0",
          "output": "@seqout",
          "target": "263a1935-6588-40ed-cdf9-00a0a7adb3a1",
          "input": "value"
        },
        {
          "source": "6f09a87b-8150-41f9-aba0-22603b1d261f",
          "output": "@seqout",
          "target": "8e245695-a2b7-463e-98da-256362257258",
          "input": "@seqin"
        },
        {
          "source": "d9a8fe7c-849e-4fee-e99f-c304a3d98cdd",
          "output": "content",
          "target": "a8532d7d-cef8-42f6-af23-8dfe85fb05bd",
          "input": "xml_str"
        },
        {
          "source": "d9a8fe7c-849e-4fee-e99f-c304a3d98cdd",
          "output": "@seqout",
          "target": "a8532d7d-cef8-42f6-af23-8dfe85fb05bd",
          "input": "@seqin"
        },
        {
          "source": "1014bfc5-d545-4e13-f0ae-b8674e664d6f",
          "output": "value",
          "target": "a8532d7d-cef8-42f6-af23-8dfe85fb05bd",
          "input": "manufacturer"
        },
        {
          "source": "a8532d7d-cef8-42f6-af23-8dfe85fb05bd",
          "output": "result",
          "target": "e46f1069-8583-47d0-8f6e-d141a23f71a2",
          "input": "content"
        },
        {
          "source": "e46f1069-8583-47d0-8f6e-d141a23f71a2",
          "output": "@seqout",
          "target": "59f2fdc0-c554-42ba-e134-a9adb7912bbc",
          "input": "@seqin"
        },
        {
          "source": "a8532d7d-cef8-42f6-af23-8dfe85fb05bd",
          "output": "@seqout",
          "target": "e46f1069-8583-47d0-8f6e-d141a23f71a2",
          "input": "@seqin"
        },
        {
          "source": "1cefdaa8-7a09-4494-a1a9-9e386fc4925b",
          "output": "result",
          "target": "e46f1069-8583-47d0-8f6e-d141a23f71a2",
          "input": "filePath"
        },
        {
          "source": "d9a8fe7c-849e-4fee-e99f-c304a3d98cdd",
          "output": "@seqout",
          "target": "8af0e53d-50e4-4d66-bde3-36b4cfc2908a",
          "input": "@seqin"
        },
        {
          "source": "8af0e53d-50e4-4d66-bde3-36b4cfc2908a",
          "output": "result",
          "target": "a8532d7d-cef8-42f6-af23-8dfe85fb05bd",
          "input": "product"
        },
        {
          "source": "a30400c9-eb8a-47cb-d4d5-97a08209ff76",
          "output": "stdout",
          "target": "688ae43a-6b9b-4a7d-a2f8-6572a3ea35b1",
          "input": "@seqin"
        },
        {
          "source": "a30400c9-eb8a-47cb-d4d5-97a08209ff76",
          "output": "stderr",
          "target": "e7149e20-7635-419c-df80-507c1b0c2efe",
          "input": "@seqin"
        },
        {
          "source": "ba8c34f4-a713-4c5a-ca73-a38620082006",
          "output": "True",
          "target": "0a45ace2-861e-41f0-ada1-a0daa55447ab",
          "input": "@seqin"
        },
        {
          "source": "0a45ace2-861e-41f0-ada1-a0daa55447ab",
          "output": "@seqout",
          "target": "09346476-a444-425f-cdb2-f073ffc8996f",
          "input": "@seqin"
        },
        {
          "source": "0a2b9ee4-8d43-4b5b-ff68-5b896dcec782",
          "output": "@seqout",
          "target": "09346476-a444-425f-cdb2-f073ffc8996f",
          "input": "@seqin"
        },
        {
          "source": "ba8c34f4-a713-4c5a-ca73-a38620082006",
          "output": "False",
          "target": "0a2b9ee4-8d43-4b5b-ff68-5b896dcec782",
          "input": "@seqin"
        },
        {
          "source": "a30400c9-eb8a-47cb-d4d5-97a08209ff76",
          "output": "finished",
          "target": "ba8c34f4-a713-4c5a-ca73-a38620082006",
          "input": "result"
        },
        {
          "source": "1cefdaa8-7a09-4494-a1a9-9e386fc4925b",
          "output": "result",
          "target": "a30400c9-eb8a-47cb-d4d5-97a08209ff76",
          "input": "filePath"
        },
        {
          "source": "ab695faf-0dec-4894-d4e1-7952a61cbf27",
          "output": "value",
          "target": "ba8c34f4-a713-4c5a-ca73-a38620082006",
          "input": "result"
        },
        {
          "source": "a30400c9-eb8a-47cb-d4d5-97a08209ff76",
          "output": "finished",
          "target": "c9fa93d0-dbeb-4a14-af34-86cdd9a6b516",
          "input": "@seqin"
        },
        {
          "source": "a366d95c-5348-41de-fa57-cd420bab54de",
          "output": "result",
          "target": "a8532d7d-cef8-42f6-af23-8dfe85fb05bd",
          "input": "serial"
        },
        {
          "source": "a366d95c-5348-41de-fa57-cd420bab54de",
          "output": "result",
          "target": "1cefdaa8-7a09-4494-a1a9-9e386fc4925b",
          "input": "serial"
        },
        {
          "source": "8af0e53d-50e4-4d66-bde3-36b4cfc2908a",
          "output": "@seqout",
          "target": "a366d95c-5348-41de-fa57-cd420bab54de",
          "input": "@seqin"
        },
        {
          "source": "50fcf0b5-2beb-47ad-dd7a-14b0d3ceaa0d",
          "output": "True",
          "target": "a30400c9-eb8a-47cb-d4d5-97a08209ff76",
          "input": "@seqin"
        },
        {
          "source": "37a54493-902a-4d0f-8c3f-a34bcc502221",
          "output": "value",
          "target": "50fcf0b5-2beb-47ad-dd7a-14b0d3ceaa0d",
          "input": "value"
        },
        {
          "source": "50fcf0b5-2beb-47ad-dd7a-14b0d3ceaa0d",
          "output": "False",
          "target": "ab695faf-0dec-4894-d4e1-7952a61cbf27",
          "input": "@seqin"
        },
        {
          "source": "ab695faf-0dec-4894-d4e1-7952a61cbf27",
          "output": "value",
          "target": "c9fa93d0-dbeb-4a14-af34-86cdd9a6b516",
          "input": "@seqin"
        }
      ],
      "localVariables": [
        {
          "name": "device",
          "type": "struct:Device",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "step",
          "type": "struct:StepStatus",
          "defaultValue": "null",
          "persistent": false
        }
      ],
      "name": "do_test_step_ftdi_programming",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "InputActionComponent",
          "left": -415,
          "top": -105,
          "width": 87,
          "height": 29,
          "wireID": "33f7ba7d-f940-42c1-ae57-e14ad7625976",
          "customInputs": [],
          "customOutputs": [],
          "name": "device",
          "inputType": "struct:Device"
        },
        {
          "type": "EndActionComponent",
          "left": 2115,
          "top": -154,
          "width": 87,
          "height": 29,
          "wireID": "e68b8db7-ae42-409a-8f76-dff73dcdb261",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "ExecuteCommand",
          "left": 697,
          "top": -145,
          "width": 410,
          "height": 152,
          "wireID": "cead0866-14e5-46a3-c4a5-3887c2bebe47",
          "customInputs": [],
          "customOutputs": [],
          "command": "System.ProjectFolder + \"/fujprog\"",
          "arguments": "[\n  \"-p\", device.deviceNumber, \n  System.ProjectFolder +\n    \"/ulx3s_\" + device.version + \"f_passthru.bit\"\n]"
        },
        {
          "type": "OutputActionComponent",
          "left": 1291,
          "top": -257,
          "width": 87,
          "height": 29,
          "wireID": "b0eb09ce-e58d-49e3-ddcb-13becbd6a7fe",
          "customInputs": [],
          "customOutputs": [],
          "name": "stdout",
          "outputType": "string"
        },
        {
          "type": "OutputActionComponent",
          "left": 1291,
          "top": -212,
          "width": 87,
          "height": 29,
          "wireID": "430be645-55f2-433f-9fe7-c00fef74ae6a",
          "customInputs": [],
          "customOutputs": [],
          "name": "stderr",
          "outputType": "string"
        },
        {
          "type": "StartActionComponent",
          "left": -415,
          "top": -154,
          "width": 87,
          "height": 29,
          "wireID": "5af8a9d7-2981-4a08-84c8-60e012850f17",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "Regexp",
          "left": 1247,
          "top": -27,
          "width": 244,
          "height": 83,
          "wireID": "35c9e544-b540-4c2f-e8a5-d73183fc6d99",
          "customInputs": [
            {
              "name": "data",
              "type": "string"
            }
          ],
          "customOutputs": [],
          "pattern": "\"Programming: (.+)%\"",
          "data": "data"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1372,
          "top": 150,
          "width": 243,
          "height": 62,
          "wireID": "bc004ba2-c8a8-4ff5-fe26-41a15ce8506d",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "value[1]"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 371,
          "top": -145,
          "width": 274,
          "height": 62,
          "wireID": "2d816cc9-8b9c-495d-f7d2-c7c2b1de9a8d",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.InProgress"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 1514,
          "top": -154,
          "width": 254,
          "height": 83,
          "wireID": "9274f8d8-6241-4487-bdde-ea372b36a6f9",
          "customInputs": [
            {
              "name": "result",
              "type": "integer"
            }
          ],
          "customOutputs": [],
          "value": "step.progress == 100 &&\nresult == 0"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1804,
          "top": -154,
          "width": 253,
          "height": 62,
          "wireID": "383a40f0-1225-4f11-d174-16577984fb45",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.Success"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1804,
          "top": -76,
          "width": 240,
          "height": 62,
          "wireID": "331e4e37-faa1-42ef-c8f0-60ecd0eb3793",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.Error"
        },
        {
          "type": "SetVariableActionComponent",
          "left": -67,
          "top": -145,
          "width": 199,
          "height": 62,
          "wireID": "fcb81f18-39a7-4a55-b9c1-c4c0529e1d42",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step",
          "value": "device.stepStatus"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 177,
          "top": -145,
          "width": 152,
          "height": 62,
          "wireID": "edc9e5c9-8422-4e53-a246-0dde3b1f7749",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "0"
        },
        {
          "type": "SetVariableActionComponent",
          "left": -271,
          "top": -145,
          "width": 175,
          "height": 62,
          "wireID": "e40dcc12-c40c-47df-f308-c361e0aff502",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "device",
          "value": "value"
        },
        {
          "type": "CommentActionComponent",
          "left": 1572,
          "top": -228,
          "width": 435,
          "height": 57,
          "wireID": "514d1783-7fcc-4a46-eccc-ad31cd8ee6a0",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Update progress</div>"
        },
        {
          "type": "CommentActionComponent",
          "left": 251,
          "top": -228,
          "width": 435,
          "height": 57,
          "wireID": "9a636ac0-c41c-42f4-fd68-1f273ff45060",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Start with progress 0%</div>"
        }
      ],
      "connectionLines": [
        {
          "source": "cead0866-14e5-46a3-c4a5-3887c2bebe47",
          "output": "stdout",
          "target": "b0eb09ce-e58d-49e3-ddcb-13becbd6a7fe",
          "input": "@seqin"
        },
        {
          "source": "cead0866-14e5-46a3-c4a5-3887c2bebe47",
          "output": "stderr",
          "target": "430be645-55f2-433f-9fe7-c00fef74ae6a",
          "input": "@seqin"
        },
        {
          "source": "cead0866-14e5-46a3-c4a5-3887c2bebe47",
          "output": "stderr",
          "target": "35c9e544-b540-4c2f-e8a5-d73183fc6d99",
          "input": "data"
        },
        {
          "source": "35c9e544-b540-4c2f-e8a5-d73183fc6d99",
          "output": "match",
          "target": "bc004ba2-c8a8-4ff5-fe26-41a15ce8506d",
          "input": "value"
        },
        {
          "source": "edc9e5c9-8422-4e53-a246-0dde3b1f7749",
          "output": "@seqout",
          "target": "2d816cc9-8b9c-495d-f7d2-c7c2b1de9a8d",
          "input": "@seqin"
        },
        {
          "source": "9274f8d8-6241-4487-bdde-ea372b36a6f9",
          "output": "True",
          "target": "383a40f0-1225-4f11-d174-16577984fb45",
          "input": "@seqin"
        },
        {
          "source": "383a40f0-1225-4f11-d174-16577984fb45",
          "output": "@seqout",
          "target": "e68b8db7-ae42-409a-8f76-dff73dcdb261",
          "input": "@seqin"
        },
        {
          "source": "331e4e37-faa1-42ef-c8f0-60ecd0eb3793",
          "output": "@seqout",
          "target": "e68b8db7-ae42-409a-8f76-dff73dcdb261",
          "input": "@seqin"
        },
        {
          "source": "9274f8d8-6241-4487-bdde-ea372b36a6f9",
          "output": "False",
          "target": "331e4e37-faa1-42ef-c8f0-60ecd0eb3793",
          "input": "@seqin"
        },
        {
          "source": "5af8a9d7-2981-4a08-84c8-60e012850f17",
          "output": "@seqout",
          "target": "e40dcc12-c40c-47df-f308-c361e0aff502",
          "input": "@seqin"
        },
        {
          "source": "fcb81f18-39a7-4a55-b9c1-c4c0529e1d42",
          "output": "@seqout",
          "target": "edc9e5c9-8422-4e53-a246-0dde3b1f7749",
          "input": "@seqin"
        },
        {
          "source": "2d816cc9-8b9c-495d-f7d2-c7c2b1de9a8d",
          "output": "@seqout",
          "target": "cead0866-14e5-46a3-c4a5-3887c2bebe47",
          "input": "@seqin"
        },
        {
          "source": "bc004ba2-c8a8-4ff5-fe26-41a15ce8506d",
          "output": "@seqout",
          "target": "35c9e544-b540-4c2f-e8a5-d73183fc6d99",
          "input": "next"
        },
        {
          "source": "35c9e544-b540-4c2f-e8a5-d73183fc6d99",
          "output": "done",
          "target": "9274f8d8-6241-4487-bdde-ea372b36a6f9",
          "input": "@seqin"
        },
        {
          "source": "cead0866-14e5-46a3-c4a5-3887c2bebe47",
          "output": "stderr",
          "target": "35c9e544-b540-4c2f-e8a5-d73183fc6d99",
          "input": "@seqin"
        },
        {
          "source": "e40dcc12-c40c-47df-f308-c361e0aff502",
          "output": "@seqout",
          "target": "fcb81f18-39a7-4a55-b9c1-c4c0529e1d42",
          "input": "@seqin"
        },
        {
          "source": "33f7ba7d-f940-42c1-ae57-e14ad7625976",
          "output": "@seqout",
          "target": "e40dcc12-c40c-47df-f308-c361e0aff502",
          "input": "value"
        },
        {
          "source": "cead0866-14e5-46a3-c4a5-3887c2bebe47",
          "output": "finished",
          "target": "9274f8d8-6241-4487-bdde-ea372b36a6f9",
          "input": "result"
        }
      ],
      "localVariables": [
        {
          "name": "device",
          "type": "struct:Device",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "step",
          "type": "struct:StepStatus",
          "defaultValue": "null",
          "persistent": false
        }
      ],
      "name": "do_test_step_esp32_passthru",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "ExecuteCommand",
          "left": 877,
          "top": -102,
          "width": 309,
          "height": 152,
          "wireID": "bc122b83-ce45-413f-a902-637dc85b3975",
          "customInputs": [],
          "customOutputs": [],
          "command": "System.ProjectFolder + \"/esptool\"",
          "arguments": "[\n  \"--chip\", \"esp32\",\n  \"--port\", device.serialPortPath,\n  \"erase_flash\"\n]"
        },
        {
          "type": "InputActionComponent",
          "left": -306,
          "top": -62,
          "width": 87,
          "height": 29,
          "wireID": "b4417c5d-1c9e-4781-c453-78a1ccf4a1d5",
          "customInputs": [],
          "customOutputs": [],
          "name": "device",
          "inputType": "struct:Device"
        },
        {
          "type": "StartActionComponent",
          "left": -306,
          "top": -111,
          "width": 87,
          "height": 29,
          "wireID": "b6d8f8a8-a647-4399-c973-606bb59d9f79",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "SetVariableActionComponent",
          "left": 545,
          "top": -102,
          "width": 274,
          "height": 62,
          "wireID": "ae8321e3-1c4e-4a2b-cdeb-1a20a6892e7b",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.InProgress"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 39,
          "top": -102,
          "width": 199,
          "height": 62,
          "wireID": "89b512bd-dac2-4f84-a512-08afe1ed6583",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step",
          "value": "device.stepStatus"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 360,
          "top": -102,
          "width": 152,
          "height": 62,
          "wireID": "1932f219-135c-4a6f-e7ec-4faf4e4fb07f",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "0"
        },
        {
          "type": "SetVariableActionComponent",
          "left": -176,
          "top": -102,
          "width": 175,
          "height": 62,
          "wireID": "5da4a7fc-1d41-43f3-dc7a-143d70ef6a76",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "device",
          "value": "value"
        },
        {
          "type": "CommentActionComponent",
          "left": 360,
          "top": -185,
          "width": 435,
          "height": 57,
          "wireID": "edd3a52c-f004-4dfc-83b6-7e26aecb4cfa",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Start with progress 0%</div>"
        },
        {
          "type": "OutputActionComponent",
          "left": 1266,
          "top": -249,
          "width": 87,
          "height": 29,
          "wireID": "18097ac9-2216-4f0c-94e4-00555f3c8cdb",
          "customInputs": [],
          "customOutputs": [],
          "name": "stdout",
          "outputType": "string"
        },
        {
          "type": "OutputActionComponent",
          "left": 1289,
          "top": -200,
          "width": 87,
          "height": 29,
          "wireID": "8e2f3f38-ea36-456f-ae75-08cdd8baaae3",
          "customInputs": [],
          "customOutputs": [],
          "name": "stderr",
          "outputType": "string"
        },
        {
          "type": "EndActionComponent",
          "left": 1832,
          "top": -102,
          "width": 87,
          "height": 29,
          "wireID": "098f1698-b7f7-4c2b-8ffe-cb916e1847c0",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "IsTrueActionComponent",
          "left": 1289,
          "top": -102,
          "width": 173,
          "height": 83,
          "wireID": "216d9eb3-dd30-43ef-da97-2ed7c13f41ad",
          "customInputs": [
            {
              "name": "result",
              "type": "integer"
            }
          ],
          "customOutputs": [],
          "value": "result == 0"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1521,
          "top": -102,
          "width": 253,
          "height": 62,
          "wireID": "981e2da0-ada6-45cb-fee3-dfdb27852128",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.Success"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1521,
          "top": -24,
          "width": 240,
          "height": 62,
          "wireID": "92239ea2-3e72-496c-aea3-5df7cec1560b",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.Error"
        },
        {
          "type": "CommentActionComponent",
          "left": 1027,
          "top": 253,
          "width": 435,
          "height": 78,
          "wireID": "002e3439-64c4-4098-c65a-9d1c3c7562e3",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Simulate progress from 0 do 100% under 48 seconds, which should be approximate time for this step.</div>"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1068,
          "top": 153,
          "width": 199,
          "height": 62,
          "wireID": "3cae406e-62de-441a-9175-51bb4b12958e",
          "customInputs": [],
          "customOutputs": [],
          "variable": "start",
          "value": "System.getTick()"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1321,
          "top": 153,
          "width": 415,
          "height": 62,
          "wireID": "d5937e41-5021-4949-c5ed-a222bb9b5276",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "100 * (System.getTick() - start) / 48000"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 1774,
          "top": 153,
          "width": 108,
          "height": 83,
          "wireID": "a71a1dee-265d-48f2-8c7e-d51029824421",
          "customInputs": [],
          "customOutputs": [],
          "value": "finished"
        },
        {
          "type": "DelayActionComponent",
          "left": 1575,
          "top": 269,
          "width": 87,
          "height": 62,
          "wireID": "04fe2a56-b9e4-4ddb-a570-ec792d7edef0",
          "customInputs": [],
          "customOutputs": [],
          "milliseconds": "100"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1267,
          "top": 26,
          "width": 139,
          "height": 62,
          "wireID": "004692a6-ccfa-4194-ce03-f01f2760436d",
          "customInputs": [],
          "customOutputs": [],
          "variable": "finished",
          "value": "true"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1919,
          "top": 153,
          "width": 166,
          "height": 62,
          "wireID": "d487762f-32bd-4e8a-f679-7cc8cbdbf181",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "100"
        }
      ],
      "connectionLines": [
        {
          "source": "1932f219-135c-4a6f-e7ec-4faf4e4fb07f",
          "output": "@seqout",
          "target": "ae8321e3-1c4e-4a2b-cdeb-1a20a6892e7b",
          "input": "@seqin"
        },
        {
          "source": "b6d8f8a8-a647-4399-c973-606bb59d9f79",
          "output": "@seqout",
          "target": "5da4a7fc-1d41-43f3-dc7a-143d70ef6a76",
          "input": "@seqin"
        },
        {
          "source": "89b512bd-dac2-4f84-a512-08afe1ed6583",
          "output": "@seqout",
          "target": "1932f219-135c-4a6f-e7ec-4faf4e4fb07f",
          "input": "@seqin"
        },
        {
          "source": "5da4a7fc-1d41-43f3-dc7a-143d70ef6a76",
          "output": "@seqout",
          "target": "89b512bd-dac2-4f84-a512-08afe1ed6583",
          "input": "@seqin"
        },
        {
          "source": "b4417c5d-1c9e-4781-c453-78a1ccf4a1d5",
          "output": "@seqout",
          "target": "5da4a7fc-1d41-43f3-dc7a-143d70ef6a76",
          "input": "value"
        },
        {
          "source": "ae8321e3-1c4e-4a2b-cdeb-1a20a6892e7b",
          "output": "@seqout",
          "target": "bc122b83-ce45-413f-a902-637dc85b3975",
          "input": "@seqin"
        },
        {
          "source": "bc122b83-ce45-413f-a902-637dc85b3975",
          "output": "stdout",
          "target": "18097ac9-2216-4f0c-94e4-00555f3c8cdb",
          "input": "@seqin"
        },
        {
          "source": "bc122b83-ce45-413f-a902-637dc85b3975",
          "output": "stderr",
          "target": "8e2f3f38-ea36-456f-ae75-08cdd8baaae3",
          "input": "@seqin"
        },
        {
          "source": "216d9eb3-dd30-43ef-da97-2ed7c13f41ad",
          "output": "True",
          "target": "981e2da0-ada6-45cb-fee3-dfdb27852128",
          "input": "@seqin"
        },
        {
          "source": "981e2da0-ada6-45cb-fee3-dfdb27852128",
          "output": "@seqout",
          "target": "098f1698-b7f7-4c2b-8ffe-cb916e1847c0",
          "input": "@seqin"
        },
        {
          "source": "92239ea2-3e72-496c-aea3-5df7cec1560b",
          "output": "@seqout",
          "target": "098f1698-b7f7-4c2b-8ffe-cb916e1847c0",
          "input": "@seqin"
        },
        {
          "source": "216d9eb3-dd30-43ef-da97-2ed7c13f41ad",
          "output": "False",
          "target": "92239ea2-3e72-496c-aea3-5df7cec1560b",
          "input": "@seqin"
        },
        {
          "source": "bc122b83-ce45-413f-a902-637dc85b3975",
          "output": "finished",
          "target": "216d9eb3-dd30-43ef-da97-2ed7c13f41ad",
          "input": "result"
        },
        {
          "source": "d5937e41-5021-4949-c5ed-a222bb9b5276",
          "output": "@seqout",
          "target": "a71a1dee-265d-48f2-8c7e-d51029824421",
          "input": "@seqin"
        },
        {
          "source": "3cae406e-62de-441a-9175-51bb4b12958e",
          "output": "@seqout",
          "target": "d5937e41-5021-4949-c5ed-a222bb9b5276",
          "input": "@seqin"
        },
        {
          "source": "04fe2a56-b9e4-4ddb-a570-ec792d7edef0",
          "output": "@seqout",
          "target": "d5937e41-5021-4949-c5ed-a222bb9b5276",
          "input": "@seqin"
        },
        {
          "source": "bc122b83-ce45-413f-a902-637dc85b3975",
          "output": "@seqout",
          "target": "3cae406e-62de-441a-9175-51bb4b12958e",
          "input": "@seqin"
        },
        {
          "source": "bc122b83-ce45-413f-a902-637dc85b3975",
          "output": "finished",
          "target": "004692a6-ccfa-4194-ce03-f01f2760436d",
          "input": "@seqin"
        },
        {
          "source": "a71a1dee-265d-48f2-8c7e-d51029824421",
          "output": "False",
          "target": "04fe2a56-b9e4-4ddb-a570-ec792d7edef0",
          "input": "@seqin"
        },
        {
          "source": "a71a1dee-265d-48f2-8c7e-d51029824421",
          "output": "True",
          "target": "d487762f-32bd-4e8a-f679-7cc8cbdbf181",
          "input": "@seqin"
        }
      ],
      "localVariables": [
        {
          "name": "device",
          "type": "struct:Device",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "step",
          "type": "struct:StepStatus",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "start",
          "type": "integer",
          "defaultValue": "0",
          "persistent": false
        },
        {
          "name": "finished",
          "type": "boolean",
          "defaultValue": "false",
          "persistent": false
        }
      ],
      "name": "do_test_step_esp32_erase",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "ExecuteCommand",
          "left": 843,
          "top": -132,
          "width": 504,
          "height": 206,
          "wireID": "dbe9bf5d-dccf-4f9c-8316-1dda2e59fe8c",
          "customInputs": [],
          "customOutputs": [],
          "command": "System.ProjectFolder + \"/esptool\"",
          "arguments": "[\n  \"--chip\", \"esp32\",\n  \"--port\", device.serialPortPath,\n  \"--baud\", \"460800\",\n  \"write_flash\",\n  \"-z\", \"0x1000\",\n  System.ProjectFolder + \"/esp32spiram-idf3-20210202-v1.14.bin\"\n]"
        },
        {
          "type": "InputActionComponent",
          "left": -340,
          "top": -92,
          "width": 87,
          "height": 29,
          "wireID": "ecfc6fa9-5e1c-4851-d455-18a9b47b7223",
          "customInputs": [],
          "customOutputs": [],
          "name": "device",
          "inputType": "struct:Device"
        },
        {
          "type": "StartActionComponent",
          "left": -340,
          "top": -141,
          "width": 87,
          "height": 29,
          "wireID": "5dbc3cc9-2a35-45c2-ec82-3937d08591a9",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "SetVariableActionComponent",
          "left": 511,
          "top": -132,
          "width": 274,
          "height": 62,
          "wireID": "8a6d608a-db54-4ef3-8607-2bf14ddae415",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.InProgress"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 5,
          "top": -132,
          "width": 199,
          "height": 62,
          "wireID": "773e1644-bff6-4901-eeae-a9301b40b8dc",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step",
          "value": "device.stepStatus"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 326,
          "top": -132,
          "width": 152,
          "height": 62,
          "wireID": "5ae2cf92-ae99-454f-bd0c-8ef8c4c2b04b",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "0"
        },
        {
          "type": "SetVariableActionComponent",
          "left": -210,
          "top": -132,
          "width": 175,
          "height": 62,
          "wireID": "50077b55-66f6-4032-b7a7-e3ab3b6fcfcc",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "device",
          "value": "value"
        },
        {
          "type": "CommentActionComponent",
          "left": 326,
          "top": -215,
          "width": 435,
          "height": 57,
          "wireID": "78c85584-cbdd-49b6-c2fc-748633fc806d",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Start with progress 0%</div>"
        },
        {
          "type": "OutputActionComponent",
          "left": 1414,
          "top": -279,
          "width": 87,
          "height": 29,
          "wireID": "98fa0ea0-0310-4a7e-a575-6449ba0ec04d",
          "customInputs": [],
          "customOutputs": [],
          "name": "stdout",
          "outputType": "string"
        },
        {
          "type": "OutputActionComponent",
          "left": 1437,
          "top": -230,
          "width": 87,
          "height": 29,
          "wireID": "a773fa7e-433f-4da8-8733-e16bf74119ac",
          "customInputs": [],
          "customOutputs": [],
          "name": "stderr",
          "outputType": "string"
        },
        {
          "type": "EndActionComponent",
          "left": 2647,
          "top": -132,
          "width": 87,
          "height": 29,
          "wireID": "a266005e-f2ad-4dec-bac3-f2083cee95e3",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "Regexp",
          "left": 1456,
          "top": -23,
          "width": 311,
          "height": 83,
          "wireID": "0079d9b8-7f8d-4f3b-b4e9-8397216900b3",
          "customInputs": [
            {
              "name": "data",
              "type": "string"
            }
          ],
          "customOutputs": [],
          "pattern": "\"^Writing at .* \\\\((.*) %\\\\)$\"",
          "data": "data"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1628,
          "top": 147,
          "width": 243,
          "height": 62,
          "wireID": "4e3c217d-5d2a-4e44-e476-ebf611c0bd45",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "value[1]"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 1767,
          "top": -141,
          "width": 254,
          "height": 83,
          "wireID": "a53fbd77-ac88-4350-e074-9fb740ff5b93",
          "customInputs": [
            {
              "name": "result",
              "type": "integer"
            }
          ],
          "customOutputs": [],
          "value": "step.progress == 100 &&\nresult == 0"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2253,
          "top": -174,
          "width": 253,
          "height": 62,
          "wireID": "6c3b85f2-cbf0-4e6d-cc81-596eed23ad17",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.Success"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2061,
          "top": -49,
          "width": 240,
          "height": 62,
          "wireID": "c2631024-77ae-46c9-a36c-80b74590dff1",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.Error"
        },
        {
          "type": "CommentActionComponent",
          "left": 1588,
          "top": -215,
          "width": 435,
          "height": 57,
          "wireID": "2f626e88-16eb-454d-a702-4b931ed06ff5",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Update progress</div>"
        },
        {
          "type": "DelayActionComponent",
          "left": 2126,
          "top": -174,
          "width": 87,
          "height": 62,
          "wireID": "a472aa6d-e60e-4ddc-a052-fb7cdc4b4521",
          "customInputs": [],
          "customOutputs": [],
          "milliseconds": "2000"
        },
        {
          "type": "CommentActionComponent",
          "left": 2126,
          "top": -250,
          "width": 435,
          "height": 57,
          "wireID": "5b330c1e-6b8b-49c8-bd85-756a2e18531e",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Wait for ESP32 to boot</div>"
        }
      ],
      "connectionLines": [
        {
          "source": "5ae2cf92-ae99-454f-bd0c-8ef8c4c2b04b",
          "output": "@seqout",
          "target": "8a6d608a-db54-4ef3-8607-2bf14ddae415",
          "input": "@seqin"
        },
        {
          "source": "5dbc3cc9-2a35-45c2-ec82-3937d08591a9",
          "output": "@seqout",
          "target": "50077b55-66f6-4032-b7a7-e3ab3b6fcfcc",
          "input": "@seqin"
        },
        {
          "source": "773e1644-bff6-4901-eeae-a9301b40b8dc",
          "output": "@seqout",
          "target": "5ae2cf92-ae99-454f-bd0c-8ef8c4c2b04b",
          "input": "@seqin"
        },
        {
          "source": "50077b55-66f6-4032-b7a7-e3ab3b6fcfcc",
          "output": "@seqout",
          "target": "773e1644-bff6-4901-eeae-a9301b40b8dc",
          "input": "@seqin"
        },
        {
          "source": "ecfc6fa9-5e1c-4851-d455-18a9b47b7223",
          "output": "@seqout",
          "target": "50077b55-66f6-4032-b7a7-e3ab3b6fcfcc",
          "input": "value"
        },
        {
          "source": "8a6d608a-db54-4ef3-8607-2bf14ddae415",
          "output": "@seqout",
          "target": "dbe9bf5d-dccf-4f9c-8316-1dda2e59fe8c",
          "input": "@seqin"
        },
        {
          "source": "dbe9bf5d-dccf-4f9c-8316-1dda2e59fe8c",
          "output": "stdout",
          "target": "98fa0ea0-0310-4a7e-a575-6449ba0ec04d",
          "input": "@seqin"
        },
        {
          "source": "dbe9bf5d-dccf-4f9c-8316-1dda2e59fe8c",
          "output": "stderr",
          "target": "a773fa7e-433f-4da8-8733-e16bf74119ac",
          "input": "@seqin"
        },
        {
          "source": "0079d9b8-7f8d-4f3b-b4e9-8397216900b3",
          "output": "match",
          "target": "4e3c217d-5d2a-4e44-e476-ebf611c0bd45",
          "input": "value"
        },
        {
          "source": "a53fbd77-ac88-4350-e074-9fb740ff5b93",
          "output": "True",
          "target": "a472aa6d-e60e-4ddc-a052-fb7cdc4b4521",
          "input": "@seqin"
        },
        {
          "source": "6c3b85f2-cbf0-4e6d-cc81-596eed23ad17",
          "output": "@seqout",
          "target": "a266005e-f2ad-4dec-bac3-f2083cee95e3",
          "input": "@seqin"
        },
        {
          "source": "c2631024-77ae-46c9-a36c-80b74590dff1",
          "output": "@seqout",
          "target": "a266005e-f2ad-4dec-bac3-f2083cee95e3",
          "input": "@seqin"
        },
        {
          "source": "a53fbd77-ac88-4350-e074-9fb740ff5b93",
          "output": "False",
          "target": "c2631024-77ae-46c9-a36c-80b74590dff1",
          "input": "@seqin"
        },
        {
          "source": "4e3c217d-5d2a-4e44-e476-ebf611c0bd45",
          "output": "@seqout",
          "target": "0079d9b8-7f8d-4f3b-b4e9-8397216900b3",
          "input": "next"
        },
        {
          "source": "0079d9b8-7f8d-4f3b-b4e9-8397216900b3",
          "output": "done",
          "target": "a53fbd77-ac88-4350-e074-9fb740ff5b93",
          "input": "@seqin"
        },
        {
          "source": "dbe9bf5d-dccf-4f9c-8316-1dda2e59fe8c",
          "output": "stdout",
          "target": "0079d9b8-7f8d-4f3b-b4e9-8397216900b3",
          "input": "data"
        },
        {
          "source": "dbe9bf5d-dccf-4f9c-8316-1dda2e59fe8c",
          "output": "@seqout",
          "target": "0079d9b8-7f8d-4f3b-b4e9-8397216900b3",
          "input": "@seqin"
        },
        {
          "source": "dbe9bf5d-dccf-4f9c-8316-1dda2e59fe8c",
          "output": "finished",
          "target": "a53fbd77-ac88-4350-e074-9fb740ff5b93",
          "input": "result"
        },
        {
          "source": "a472aa6d-e60e-4ddc-a052-fb7cdc4b4521",
          "output": "@seqout",
          "target": "6c3b85f2-cbf0-4e6d-cc81-596eed23ad17",
          "input": "@seqin"
        }
      ],
      "localVariables": [
        {
          "name": "device",
          "type": "struct:Device",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "step",
          "type": "struct:StepStatus",
          "defaultValue": "null",
          "persistent": false
        }
      ],
      "name": "do_test_step_esp32_prog",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "InputActionComponent",
          "left": -317,
          "top": -14,
          "width": 87,
          "height": 29,
          "wireID": "b16496cc-4860-4078-f363-60a021f31019",
          "customInputs": [],
          "customOutputs": [],
          "name": "device",
          "inputType": "struct:Device"
        },
        {
          "type": "StartActionComponent",
          "left": -317,
          "top": -63,
          "width": 87,
          "height": 29,
          "wireID": "013153de-9c90-46ea-dae0-6ac0da80c5c9",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "SetVariableActionComponent",
          "left": 28,
          "top": -54,
          "width": 199,
          "height": 62,
          "wireID": "be7d2a96-92ca-4e2b-cf5b-16b95b52ab97",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step",
          "value": "device.stepStatus"
        },
        {
          "type": "SetVariableActionComponent",
          "left": -187,
          "top": -54,
          "width": 175,
          "height": 62,
          "wireID": "43f54dd1-7d62-47ea-8123-66ea80488a99",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "device",
          "value": "value"
        },
        {
          "type": "SerialConnect",
          "left": 1236,
          "top": -54,
          "width": 135,
          "height": 62,
          "wireID": "caec4343-9d29-4472-d657-870504f17e71",
          "customInputs": [],
          "customOutputs": [],
          "connection": "connection"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 870,
          "top": -54,
          "width": 327,
          "height": 170,
          "wireID": "d736bdb2-3be7-49f3-b2b9-5ac51e1fcae5",
          "customInputs": [],
          "customOutputs": [],
          "variable": "connection",
          "value": "{\n  port: device.serialPortPath,\n  baudRate: 115200,\n  dataBits: 8,\n  stopBits: 1,\n  parity: \"none\"\n}"
        },
        {
          "type": "SerialRead",
          "left": 1645,
          "top": -54,
          "width": 114,
          "height": 61,
          "wireID": "9a713ba5-4510-42fb-e4f5-e1b8e943c806",
          "customInputs": [],
          "customOutputs": [],
          "connection": "connection"
        },
        {
          "type": "OutputActionComponent",
          "left": 1836,
          "top": -154,
          "width": 87,
          "height": 29,
          "wireID": "97836c10-db65-4da7-82c3-9c4421f1aeeb",
          "customInputs": [],
          "customOutputs": [],
          "name": "stdout",
          "outputType": "string"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 546,
          "top": -54,
          "width": 274,
          "height": 62,
          "wireID": "6a128852-162e-4c82-db51-a5adcdcc6582",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.InProgress"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 355,
          "top": -54,
          "width": 152,
          "height": 62,
          "wireID": "24454c5e-e13e-4966-9669-56f13b7ef801",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "0"
        },
        {
          "type": "SerialWrite",
          "left": 1411,
          "top": -54,
          "width": 204,
          "height": 116,
          "wireID": "18fb6d37-7242-4e94-9804-3d166afadd4e",
          "customInputs": [],
          "customOutputs": [],
          "connection": "connection",
          "data": "\"\\r\\n\" + \n\"import time\\r\\n\" +\n\"time.sleep_ms(1000)\\r\\n\" +\n'print(\"TEST OK\")\\r\\n'"
        },
        {
          "type": "Regexp",
          "left": 1836,
          "top": -56,
          "width": 170,
          "height": 83,
          "wireID": "309b5ce0-a9b1-4582-c8ab-c6a451daa241",
          "customInputs": [
            {
              "name": "data",
              "type": "string"
            }
          ],
          "customOutputs": [],
          "pattern": "\"TEST OK\"",
          "data": "data"
        },
        {
          "type": "EndActionComponent",
          "left": 2895,
          "top": -56,
          "width": 87,
          "height": 29,
          "wireID": "08f66751-461b-4538-d616-9be71325eafe",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2603,
          "top": -56,
          "width": 253,
          "height": 62,
          "wireID": "15863dfb-2950-4081-abe6-c98f459534f4",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.Success"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2041,
          "top": -141,
          "width": 169,
          "height": 62,
          "wireID": "94a7fff6-515d-4c91-a428-38977583c0cc",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "match",
          "value": "value"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2603,
          "top": 15,
          "width": 240,
          "height": 62,
          "wireID": "3c8098a6-ccba-49bd-9be0-428ffcc1b8df",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.Error"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 2472,
          "top": -54,
          "width": 87,
          "height": 83,
          "wireID": "e0ae3114-b9a4-4541-c6ce-5aba82aec966",
          "customInputs": [],
          "customOutputs": [],
          "value": "match"
        },
        {
          "type": "SerialDisconnect",
          "left": 2244,
          "top": -54,
          "width": 152,
          "height": 62,
          "wireID": "7c55468c-2db7-43b6-ed0a-41ee04d51875",
          "customInputs": [],
          "customOutputs": [],
          "connection": "connection"
        },
        {
          "type": "CommentActionComponent",
          "left": 1340,
          "top": 216,
          "width": 435,
          "height": 78,
          "wireID": "37b1c214-72ee-43ab-e538-d72984e04465",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Simulate progress from 0 do 100% under 1.5 seconds, which should be approximate time for this step.</div>"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1379,
          "top": 116,
          "width": 199,
          "height": 62,
          "wireID": "a1060b31-0316-4007-c2e3-dad8878ef671",
          "customInputs": [],
          "customOutputs": [],
          "variable": "start",
          "value": "System.getTick()"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1632,
          "top": 116,
          "width": 408,
          "height": 62,
          "wireID": "45c531a8-48c5-47bd-9f2d-3c7e7f3ac50f",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "100 * (System.getTick() - start) / 2000"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 2085,
          "top": 116,
          "width": 269,
          "height": 83,
          "wireID": "601ff873-a0df-4081-9c17-a16358be4060",
          "customInputs": [],
          "customOutputs": [],
          "value": "finished || step.progress >= 100"
        },
        {
          "type": "DelayActionComponent",
          "left": 1886,
          "top": 232,
          "width": 87,
          "height": 62,
          "wireID": "ef4effd2-1634-4076-fa4f-8d62a9b2bc7c",
          "customInputs": [],
          "customOutputs": [],
          "milliseconds": "100"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2396,
          "top": 116,
          "width": 166,
          "height": 62,
          "wireID": "dce3de20-e0a6-46c6-9b2a-08c60c5457bf",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "100"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2244,
          "top": -141,
          "width": 139,
          "height": 62,
          "wireID": "60c7f9a7-90ef-47be-d733-7c4795fb1dfa",
          "customInputs": [],
          "customOutputs": [],
          "variable": "finished",
          "value": "true"
        }
      ],
      "connectionLines": [
        {
          "source": "013153de-9c90-46ea-dae0-6ac0da80c5c9",
          "output": "@seqout",
          "target": "43f54dd1-7d62-47ea-8123-66ea80488a99",
          "input": "@seqin"
        },
        {
          "source": "43f54dd1-7d62-47ea-8123-66ea80488a99",
          "output": "@seqout",
          "target": "be7d2a96-92ca-4e2b-cf5b-16b95b52ab97",
          "input": "@seqin"
        },
        {
          "source": "b16496cc-4860-4078-f363-60a021f31019",
          "output": "@seqout",
          "target": "43f54dd1-7d62-47ea-8123-66ea80488a99",
          "input": "value"
        },
        {
          "source": "be7d2a96-92ca-4e2b-cf5b-16b95b52ab97",
          "output": "@seqout",
          "target": "24454c5e-e13e-4966-9669-56f13b7ef801",
          "input": "@seqin"
        },
        {
          "source": "d736bdb2-3be7-49f3-b2b9-5ac51e1fcae5",
          "output": "@seqout",
          "target": "caec4343-9d29-4472-d657-870504f17e71",
          "input": "@seqin"
        },
        {
          "source": "caec4343-9d29-4472-d657-870504f17e71",
          "output": "@seqout",
          "target": "18fb6d37-7242-4e94-9804-3d166afadd4e",
          "input": "@seqin"
        },
        {
          "source": "9a713ba5-4510-42fb-e4f5-e1b8e943c806",
          "output": "data",
          "target": "97836c10-db65-4da7-82c3-9c4421f1aeeb",
          "input": "@seqin"
        },
        {
          "source": "24454c5e-e13e-4966-9669-56f13b7ef801",
          "output": "@seqout",
          "target": "6a128852-162e-4c82-db51-a5adcdcc6582",
          "input": "@seqin"
        },
        {
          "source": "6a128852-162e-4c82-db51-a5adcdcc6582",
          "output": "@seqout",
          "target": "d736bdb2-3be7-49f3-b2b9-5ac51e1fcae5",
          "input": "@seqin"
        },
        {
          "source": "18fb6d37-7242-4e94-9804-3d166afadd4e",
          "output": "@seqout",
          "target": "9a713ba5-4510-42fb-e4f5-e1b8e943c806",
          "input": "@seqin"
        },
        {
          "source": "9a713ba5-4510-42fb-e4f5-e1b8e943c806",
          "output": "data",
          "target": "309b5ce0-a9b1-4582-c8ab-c6a451daa241",
          "input": "data"
        },
        {
          "source": "9a713ba5-4510-42fb-e4f5-e1b8e943c806",
          "output": "@seqout",
          "target": "309b5ce0-a9b1-4582-c8ab-c6a451daa241",
          "input": "@seqin"
        },
        {
          "source": "309b5ce0-a9b1-4582-c8ab-c6a451daa241",
          "output": "match",
          "target": "94a7fff6-515d-4c91-a428-38977583c0cc",
          "input": "value"
        },
        {
          "source": "15863dfb-2950-4081-abe6-c98f459534f4",
          "output": "@seqout",
          "target": "08f66751-461b-4538-d616-9be71325eafe",
          "input": "@seqin"
        },
        {
          "source": "3c8098a6-ccba-49bd-9be0-428ffcc1b8df",
          "output": "@seqout",
          "target": "08f66751-461b-4538-d616-9be71325eafe",
          "input": "@seqin"
        },
        {
          "source": "e0ae3114-b9a4-4541-c6ce-5aba82aec966",
          "output": "True",
          "target": "15863dfb-2950-4081-abe6-c98f459534f4",
          "input": "@seqin"
        },
        {
          "source": "e0ae3114-b9a4-4541-c6ce-5aba82aec966",
          "output": "False",
          "target": "3c8098a6-ccba-49bd-9be0-428ffcc1b8df",
          "input": "@seqin"
        },
        {
          "source": "caec4343-9d29-4472-d657-870504f17e71",
          "output": "@seqout",
          "target": "a1060b31-0316-4007-c2e3-dad8878ef671",
          "input": "@seqin"
        },
        {
          "source": "45c531a8-48c5-47bd-9f2d-3c7e7f3ac50f",
          "output": "@seqout",
          "target": "601ff873-a0df-4081-9c17-a16358be4060",
          "input": "@seqin"
        },
        {
          "source": "a1060b31-0316-4007-c2e3-dad8878ef671",
          "output": "@seqout",
          "target": "45c531a8-48c5-47bd-9f2d-3c7e7f3ac50f",
          "input": "@seqin"
        },
        {
          "source": "ef4effd2-1634-4076-fa4f-8d62a9b2bc7c",
          "output": "@seqout",
          "target": "45c531a8-48c5-47bd-9f2d-3c7e7f3ac50f",
          "input": "@seqin"
        },
        {
          "source": "601ff873-a0df-4081-9c17-a16358be4060",
          "output": "False",
          "target": "ef4effd2-1634-4076-fa4f-8d62a9b2bc7c",
          "input": "@seqin"
        },
        {
          "source": "601ff873-a0df-4081-9c17-a16358be4060",
          "output": "True",
          "target": "dce3de20-e0a6-46c6-9b2a-08c60c5457bf",
          "input": "@seqin"
        },
        {
          "source": "94a7fff6-515d-4c91-a428-38977583c0cc",
          "output": "@seqout",
          "target": "60c7f9a7-90ef-47be-d733-7c4795fb1dfa",
          "input": "@seqin"
        },
        {
          "source": "dce3de20-e0a6-46c6-9b2a-08c60c5457bf",
          "output": "@seqout",
          "target": "7c55468c-2db7-43b6-ed0a-41ee04d51875",
          "input": "@seqin"
        },
        {
          "source": "7c55468c-2db7-43b6-ed0a-41ee04d51875",
          "output": "@seqout",
          "target": "e0ae3114-b9a4-4541-c6ce-5aba82aec966",
          "input": "@seqin"
        }
      ],
      "localVariables": [
        {
          "name": "device",
          "type": "struct:Device",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "step",
          "type": "struct:StepStatus",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "connection",
          "type": "object:SerialConnection",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "match",
          "type": "any",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "start",
          "type": "integer",
          "defaultValue": "0",
          "persistent": false
        },
        {
          "name": "finished",
          "type": "boolean",
          "defaultValue": "false",
          "persistent": false
        }
      ],
      "name": "do_test_step_mp_test",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "ExecuteCommand",
          "left": 956,
          "top": -77,
          "width": 396,
          "height": 170,
          "wireID": "38929f79-5e0c-49e0-a9d1-85b799e12a30",
          "customInputs": [],
          "customOutputs": [],
          "command": "System.ProjectFolder + \"/fujprog\"",
          "arguments": "[\n  \"-j\", \"flash\",\n  \"-p\", device.deviceNumber,\n  System.ProjectFolder +\n    \"/new_\" + device.version + \"F_selftest.img\"\n]"
        },
        {
          "type": "InputActionComponent",
          "left": -227,
          "top": -37,
          "width": 87,
          "height": 29,
          "wireID": "bd00625a-ea3b-43ea-ebfa-45934e25d5ab",
          "customInputs": [],
          "customOutputs": [],
          "name": "device",
          "inputType": "struct:Device"
        },
        {
          "type": "StartActionComponent",
          "left": -227,
          "top": -86,
          "width": 87,
          "height": 29,
          "wireID": "2a06f1db-318e-443f-ea24-03da7d022343",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "SetVariableActionComponent",
          "left": 624,
          "top": -77,
          "width": 274,
          "height": 62,
          "wireID": "40002d2f-901c-487e-c9d8-bffb6fe13e67",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.InProgress"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 118,
          "top": -77,
          "width": 199,
          "height": 62,
          "wireID": "437dbfe0-b3ea-4093-a1ba-4c9293260711",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step",
          "value": "device.stepStatus"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 439,
          "top": -77,
          "width": 152,
          "height": 62,
          "wireID": "cbe7ac28-3c74-4e02-c0cd-4d577dc2a6d2",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "0"
        },
        {
          "type": "SetVariableActionComponent",
          "left": -97,
          "top": -77,
          "width": 175,
          "height": 62,
          "wireID": "0bd70d71-6511-47bf-8cbe-7b7cb6c8def7",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "device",
          "value": "value"
        },
        {
          "type": "CommentActionComponent",
          "left": 439,
          "top": -160,
          "width": 435,
          "height": 57,
          "wireID": "d7c2aaef-cf49-4ab6-8ce6-f81d870ad528",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Start with progress 0%</div>"
        },
        {
          "type": "OutputActionComponent",
          "left": 1527,
          "top": -224,
          "width": 87,
          "height": 29,
          "wireID": "3c113348-a024-46e0-c800-e264957750c2",
          "customInputs": [],
          "customOutputs": [],
          "name": "stdout",
          "outputType": "string"
        },
        {
          "type": "OutputActionComponent",
          "left": 1550,
          "top": -175,
          "width": 87,
          "height": 29,
          "wireID": "ab6f9729-fa44-45b6-ddc9-0375a89ac031",
          "customInputs": [],
          "customOutputs": [],
          "name": "stderr",
          "outputType": "string"
        },
        {
          "type": "Regexp",
          "left": 1564,
          "top": 31,
          "width": 244,
          "height": 83,
          "wireID": "05237948-a3a1-4184-fa28-4f93e6b6b131",
          "customInputs": [
            {
              "name": "data",
              "type": "string"
            }
          ],
          "customOutputs": [],
          "pattern": "\"Programming: (.+)%\"",
          "data": "data"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1736,
          "top": 201,
          "width": 243,
          "height": 62,
          "wireID": "3989c51e-5317-4699-a109-279efe476ef5",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "value[1]"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 1912,
          "top": -77,
          "width": 254,
          "height": 83,
          "wireID": "4dc188bb-88ef-432e-e436-846802b7a127",
          "customInputs": [
            {
              "name": "result",
              "type": "integer"
            }
          ],
          "customOutputs": [],
          "value": "step.progress == 100 &&\nresult == 0"
        },
        {
          "type": "CommentActionComponent",
          "left": 1822,
          "top": -160,
          "width": 435,
          "height": 57,
          "wireID": "e329fcee-d303-4bf4-c10d-b8062b31d1f7",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Update progress</div>"
        },
        {
          "type": "EndActionComponent",
          "left": 2568,
          "top": -83,
          "width": 87,
          "height": 29,
          "wireID": "ed4c600c-58be-4c3c-ea8d-8ea9e81c3bba",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2257,
          "top": -83,
          "width": 253,
          "height": 62,
          "wireID": "d6d7fa44-1ea2-4083-95b1-4f421408bce9",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.Success"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2257,
          "top": -5,
          "width": 240,
          "height": 62,
          "wireID": "2de0e6a3-036c-41b1-d04e-7641e8592cbd",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.Error"
        }
      ],
      "connectionLines": [
        {
          "source": "cbe7ac28-3c74-4e02-c0cd-4d577dc2a6d2",
          "output": "@seqout",
          "target": "40002d2f-901c-487e-c9d8-bffb6fe13e67",
          "input": "@seqin"
        },
        {
          "source": "2a06f1db-318e-443f-ea24-03da7d022343",
          "output": "@seqout",
          "target": "0bd70d71-6511-47bf-8cbe-7b7cb6c8def7",
          "input": "@seqin"
        },
        {
          "source": "437dbfe0-b3ea-4093-a1ba-4c9293260711",
          "output": "@seqout",
          "target": "cbe7ac28-3c74-4e02-c0cd-4d577dc2a6d2",
          "input": "@seqin"
        },
        {
          "source": "0bd70d71-6511-47bf-8cbe-7b7cb6c8def7",
          "output": "@seqout",
          "target": "437dbfe0-b3ea-4093-a1ba-4c9293260711",
          "input": "@seqin"
        },
        {
          "source": "bd00625a-ea3b-43ea-ebfa-45934e25d5ab",
          "output": "@seqout",
          "target": "0bd70d71-6511-47bf-8cbe-7b7cb6c8def7",
          "input": "value"
        },
        {
          "source": "38929f79-5e0c-49e0-a9d1-85b799e12a30",
          "output": "stdout",
          "target": "3c113348-a024-46e0-c800-e264957750c2",
          "input": "@seqin"
        },
        {
          "source": "38929f79-5e0c-49e0-a9d1-85b799e12a30",
          "output": "stderr",
          "target": "ab6f9729-fa44-45b6-ddc9-0375a89ac031",
          "input": "@seqin"
        },
        {
          "source": "05237948-a3a1-4184-fa28-4f93e6b6b131",
          "output": "match",
          "target": "3989c51e-5317-4699-a109-279efe476ef5",
          "input": "value"
        },
        {
          "source": "4dc188bb-88ef-432e-e436-846802b7a127",
          "output": "False",
          "target": "2de0e6a3-036c-41b1-d04e-7641e8592cbd",
          "input": "@seqin"
        },
        {
          "source": "3989c51e-5317-4699-a109-279efe476ef5",
          "output": "@seqout",
          "target": "05237948-a3a1-4184-fa28-4f93e6b6b131",
          "input": "next"
        },
        {
          "source": "05237948-a3a1-4184-fa28-4f93e6b6b131",
          "output": "done",
          "target": "4dc188bb-88ef-432e-e436-846802b7a127",
          "input": "@seqin"
        },
        {
          "source": "38929f79-5e0c-49e0-a9d1-85b799e12a30",
          "output": "stderr",
          "target": "05237948-a3a1-4184-fa28-4f93e6b6b131",
          "input": "data"
        },
        {
          "source": "38929f79-5e0c-49e0-a9d1-85b799e12a30",
          "output": "@seqout",
          "target": "05237948-a3a1-4184-fa28-4f93e6b6b131",
          "input": "@seqin"
        },
        {
          "source": "40002d2f-901c-487e-c9d8-bffb6fe13e67",
          "output": "@seqout",
          "target": "38929f79-5e0c-49e0-a9d1-85b799e12a30",
          "input": "@seqin"
        },
        {
          "source": "d6d7fa44-1ea2-4083-95b1-4f421408bce9",
          "output": "@seqout",
          "target": "ed4c600c-58be-4c3c-ea8d-8ea9e81c3bba",
          "input": "@seqin"
        },
        {
          "source": "2de0e6a3-036c-41b1-d04e-7641e8592cbd",
          "output": "@seqout",
          "target": "ed4c600c-58be-4c3c-ea8d-8ea9e81c3bba",
          "input": "@seqin"
        },
        {
          "source": "4dc188bb-88ef-432e-e436-846802b7a127",
          "output": "True",
          "target": "d6d7fa44-1ea2-4083-95b1-4f421408bce9",
          "input": "@seqin"
        },
        {
          "source": "38929f79-5e0c-49e0-a9d1-85b799e12a30",
          "output": "finished",
          "target": "4dc188bb-88ef-432e-e436-846802b7a127",
          "input": "result"
        }
      ],
      "localVariables": [
        {
          "name": "device",
          "type": "struct:Device",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "step",
          "type": "struct:StepStatus",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "connection",
          "type": "object:SerialConnection",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "match",
          "type": "any",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "start",
          "type": "integer",
          "defaultValue": "0",
          "persistent": false
        },
        {
          "name": "finished",
          "type": "boolean",
          "defaultValue": "false",
          "persistent": false
        }
      ],
      "name": "do_test_step_selftest_prog",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "InputActionComponent",
          "left": -386,
          "top": -67,
          "width": 87,
          "height": 29,
          "wireID": "bd00625a-ea3b-43ea-ebfa-45934e25d5ab",
          "customInputs": [],
          "customOutputs": [],
          "name": "device",
          "inputType": "struct:Device"
        },
        {
          "type": "StartActionComponent",
          "left": -386,
          "top": -116,
          "width": 87,
          "height": 29,
          "wireID": "2a06f1db-318e-443f-ea24-03da7d022343",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "SetVariableActionComponent",
          "left": 414,
          "top": -108,
          "width": 274,
          "height": 62,
          "wireID": "40002d2f-901c-487e-c9d8-bffb6fe13e67",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.InProgress"
        },
        {
          "type": "SetVariableActionComponent",
          "left": -52,
          "top": -107,
          "width": 199,
          "height": 62,
          "wireID": "437dbfe0-b3ea-4093-a1ba-4c9293260711",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step",
          "value": "device.stepStatus"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 197,
          "top": -108,
          "width": 152,
          "height": 62,
          "wireID": "cbe7ac28-3c74-4e02-c0cd-4d577dc2a6d2",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "0"
        },
        {
          "type": "SetVariableActionComponent",
          "left": -256,
          "top": -107,
          "width": 175,
          "height": 62,
          "wireID": "0bd70d71-6511-47bf-8cbe-7b7cb6c8def7",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "device",
          "value": "value"
        },
        {
          "type": "CommentActionComponent",
          "left": 280,
          "top": -190,
          "width": 435,
          "height": 57,
          "wireID": "d7c2aaef-cf49-4ab6-8ce6-f81d870ad528",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Start with progress 0%</div>"
        },
        {
          "type": "SerialConnect",
          "left": 1402,
          "top": -107,
          "width": 135,
          "height": 62,
          "wireID": "aaecf13d-1fe3-4732-ec06-e36a1dbb880d",
          "customInputs": [],
          "customOutputs": [],
          "connection": "connection"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1030,
          "top": -108,
          "width": 327,
          "height": 170,
          "wireID": "c4722d75-ca6d-4d24-e4b1-ca5a3f59739e",
          "customInputs": [],
          "customOutputs": [],
          "variable": "connection",
          "value": "{\n  port: device.serialPortPath,\n  baudRate: 115200,\n  dataBits: 8,\n  stopBits: 1,\n  parity: \"none\"\n}"
        },
        {
          "type": "SerialRead",
          "left": 1606,
          "top": -107,
          "width": 114,
          "height": 61,
          "wireID": "ac31d540-7a96-46fe-cd95-7c1ba8e20172",
          "customInputs": [],
          "customOutputs": [],
          "connection": "connection"
        },
        {
          "type": "OutputActionComponent",
          "left": 1794,
          "top": -198,
          "width": 87,
          "height": 29,
          "wireID": "437ae172-5596-4eaf-86ff-5544e24e7ed2",
          "customInputs": [],
          "customOutputs": [],
          "name": "stdout",
          "outputType": "string"
        },
        {
          "type": "Regexp",
          "left": 1778,
          "top": -107,
          "width": 702,
          "height": 83,
          "wireID": "60a96352-0e58-45aa-9e37-ce05694e20c0",
          "customInputs": [
            {
              "name": "data",
              "type": "string"
            }
          ],
          "customOutputs": [],
          "pattern": "\"DAC OK|ADC OK|FLASH OK|RTC OK|EDID OK|EDID EEPROM:\\d+ CRC=\\d+ OK|SD OK|BTN OK|all_ok=7\"",
          "data": "data"
        },
        {
          "type": "EndActionComponent",
          "left": 3762,
          "top": -65,
          "width": 87,
          "height": 29,
          "wireID": "35578f06-9ccc-4bbb-8539-a7ef32a39510",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "SetVariableActionComponent",
          "left": 3425,
          "top": -107,
          "width": 253,
          "height": 62,
          "wireID": "91797699-609e-4945-ca13-041a666016c8",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.Success"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 3425,
          "top": -36,
          "width": 240,
          "height": 62,
          "wireID": "e1f0401e-0ec0-4919-d481-5f8f04e1ece6",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.Error"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 3224,
          "top": -108,
          "width": 141,
          "height": 83,
          "wireID": "704845d4-c1eb-44a7-c267-6f8d2b0ebc90",
          "customInputs": [],
          "customOutputs": [],
          "value": "selfTest.HDMI"
        },
        {
          "type": "SerialDisconnect",
          "left": 3021,
          "top": -108,
          "width": 152,
          "height": 62,
          "wireID": "da8aa49c-661d-467c-88f3-cd269ab8be28",
          "customInputs": [],
          "customOutputs": [],
          "connection": "connection"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 744,
          "top": -108,
          "width": 199,
          "height": 62,
          "wireID": "b0a9f268-305d-4856-cde3-de450c400500",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.selfTest",
          "value": "selfTest"
        },
        {
          "type": "SwitchActionComponent",
          "left": 2067,
          "top": -658,
          "width": 378,
          "height": 216,
          "wireID": "c3a3475d-73ea-4f7c-e35c-11686f60c1ec",
          "customInputs": [
            {
              "name": "match",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "tests": [
            {
              "condition": "match[0] == \"DAC OK\"",
              "outputName": "DAC_OK"
            },
            {
              "condition": "match[0] == \"FLASH OK\"",
              "outputName": "FLASH_OK"
            },
            {
              "condition": "match[0] == \"ADC OK\"",
              "outputName": "ADC_OK"
            },
            {
              "condition": "match[0] == \"RTC OK\"",
              "outputName": "RTC_OK"
            },
            {
              "condition": "String.find(match[0], \"EDID\") != -1",
              "outputName": "EDID_OK"
            },
            {
              "condition": "match[0] == \"BTN OK\"",
              "outputName": "BTN_OK"
            },
            {
              "condition": "match[0] == \"SD OK\"",
              "outputName": "SD_OK"
            },
            {
              "condition": "match[0] == \"all_ok=7\"",
              "outputName": "ALL_OK"
            }
          ]
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2575,
          "top": -876,
          "width": 166,
          "height": 62,
          "wireID": "5b2d2bda-c96a-4cac-abb9-7caafa58cdd9",
          "customInputs": [],
          "customOutputs": [],
          "variable": "selfTest.DAC",
          "value": "true"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2575,
          "top": -797,
          "width": 179,
          "height": 62,
          "wireID": "90387b99-c3bd-416e-d69d-e7f1dac1bb93",
          "customInputs": [],
          "customOutputs": [],
          "variable": "selfTest.FLASH",
          "value": "true"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2575,
          "top": -720,
          "width": 166,
          "height": 62,
          "wireID": "bf4b51ff-f6cf-4e57-c27d-7f9f62b5113e",
          "customInputs": [],
          "customOutputs": [],
          "variable": "selfTest.ADC",
          "value": "true"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2575,
          "top": -642,
          "width": 166,
          "height": 62,
          "wireID": "dce11924-8fe1-4bc2-de73-1ea7f8b49b62",
          "customInputs": [],
          "customOutputs": [],
          "variable": "selfTest.RTC",
          "value": "true"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2575,
          "top": -564,
          "width": 173,
          "height": 62,
          "wireID": "dcc59159-7823-432a-9c34-aa9637f44a87",
          "customInputs": [],
          "customOutputs": [],
          "variable": "selfTest.EDID",
          "value": "true"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2575,
          "top": -486,
          "width": 166,
          "height": 62,
          "wireID": "e67e3522-f634-42cb-d179-12940e5fa627",
          "customInputs": [],
          "customOutputs": [],
          "variable": "selfTest.BTN",
          "value": "true"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2575,
          "top": -404,
          "width": 193,
          "height": 62,
          "wireID": "956a0423-4a55-4e9a-a859-ed990cdf298e",
          "customInputs": [],
          "customOutputs": [],
          "variable": "selfTest.SD_CARD",
          "value": "true"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 3958,
          "top": -312,
          "width": 173,
          "height": 62,
          "wireID": "0a5d35a4-c484-4ee5-f1b6-6719e5ff36ea",
          "customInputs": [],
          "customOutputs": [],
          "variable": "selfTest.HDMI",
          "value": "true"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2575,
          "top": -312,
          "width": 166,
          "height": 62,
          "wireID": "93876423-631c-42fc-8bc5-49d936cc3dd8",
          "customInputs": [],
          "customOutputs": [],
          "variable": "selfTest.DAC",
          "value": "true"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2768,
          "top": -312,
          "width": 179,
          "height": 62,
          "wireID": "deb21027-b228-4c30-e856-13a68785bc06",
          "customInputs": [],
          "customOutputs": [],
          "variable": "selfTest.FLASH",
          "value": "true"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2968,
          "top": -312,
          "width": 166,
          "height": 62,
          "wireID": "f9dd56c1-a809-4889-e55f-dfb3b5bbcc99",
          "customInputs": [],
          "customOutputs": [],
          "variable": "selfTest.ADC",
          "value": "true"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 3156,
          "top": -312,
          "width": 166,
          "height": 62,
          "wireID": "46b5b7e8-67eb-4318-d9eb-1ab2725e754c",
          "customInputs": [],
          "customOutputs": [],
          "variable": "selfTest.RTC",
          "value": "true"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 3344,
          "top": -312,
          "width": 173,
          "height": 62,
          "wireID": "c23c04cd-5df8-4282-e499-2861fe0675b9",
          "customInputs": [],
          "customOutputs": [],
          "variable": "selfTest.EDID",
          "value": "true"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 3543,
          "top": -312,
          "width": 166,
          "height": 62,
          "wireID": "ed70e750-c616-4395-e34d-fed6bc46b1b8",
          "customInputs": [],
          "customOutputs": [],
          "variable": "selfTest.BTN",
          "value": "true"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 3737,
          "top": -312,
          "width": 193,
          "height": 62,
          "wireID": "03fe01b3-aa0c-4bcf-fc53-598256d2761d",
          "customInputs": [],
          "customOutputs": [],
          "variable": "selfTest.SD_CARD",
          "value": "true"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 1489,
          "top": -369,
          "width": 189,
          "height": 83,
          "wireID": "61eeee71-c270-42f9-8e40-166b1322d3ad",
          "customInputs": [],
          "customOutputs": [],
          "value": "step.progress != 100"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 2575,
          "top": -107,
          "width": 189,
          "height": 83,
          "wireID": "1522fca9-2573-42f3-ab85-a18b8561a6b3",
          "customInputs": [],
          "customOutputs": [],
          "value": "step.progress != 100"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 2802,
          "top": -108,
          "width": 166,
          "height": 62,
          "wireID": "07b958ad-3301-40a8-b162-1ac53dcfa412",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "100"
        }
      ],
      "connectionLines": [
        {
          "source": "cbe7ac28-3c74-4e02-c0cd-4d577dc2a6d2",
          "output": "@seqout",
          "target": "40002d2f-901c-487e-c9d8-bffb6fe13e67",
          "input": "@seqin"
        },
        {
          "source": "2a06f1db-318e-443f-ea24-03da7d022343",
          "output": "@seqout",
          "target": "0bd70d71-6511-47bf-8cbe-7b7cb6c8def7",
          "input": "@seqin"
        },
        {
          "source": "437dbfe0-b3ea-4093-a1ba-4c9293260711",
          "output": "@seqout",
          "target": "cbe7ac28-3c74-4e02-c0cd-4d577dc2a6d2",
          "input": "@seqin"
        },
        {
          "source": "0bd70d71-6511-47bf-8cbe-7b7cb6c8def7",
          "output": "@seqout",
          "target": "437dbfe0-b3ea-4093-a1ba-4c9293260711",
          "input": "@seqin"
        },
        {
          "source": "bd00625a-ea3b-43ea-ebfa-45934e25d5ab",
          "output": "@seqout",
          "target": "0bd70d71-6511-47bf-8cbe-7b7cb6c8def7",
          "input": "value"
        },
        {
          "source": "c4722d75-ca6d-4d24-e4b1-ca5a3f59739e",
          "output": "@seqout",
          "target": "aaecf13d-1fe3-4732-ec06-e36a1dbb880d",
          "input": "@seqin"
        },
        {
          "source": "ac31d540-7a96-46fe-cd95-7c1ba8e20172",
          "output": "data",
          "target": "437ae172-5596-4eaf-86ff-5544e24e7ed2",
          "input": "@seqin"
        },
        {
          "source": "ac31d540-7a96-46fe-cd95-7c1ba8e20172",
          "output": "data",
          "target": "60a96352-0e58-45aa-9e37-ce05694e20c0",
          "input": "data"
        },
        {
          "source": "ac31d540-7a96-46fe-cd95-7c1ba8e20172",
          "output": "@seqout",
          "target": "60a96352-0e58-45aa-9e37-ce05694e20c0",
          "input": "@seqin"
        },
        {
          "source": "60a96352-0e58-45aa-9e37-ce05694e20c0",
          "output": "match",
          "target": "c3a3475d-73ea-4f7c-e35c-11686f60c1ec",
          "input": "match"
        },
        {
          "source": "91797699-609e-4945-ca13-041a666016c8",
          "output": "@seqout",
          "target": "35578f06-9ccc-4bbb-8539-a7ef32a39510",
          "input": "@seqin"
        },
        {
          "source": "e1f0401e-0ec0-4919-d481-5f8f04e1ece6",
          "output": "@seqout",
          "target": "35578f06-9ccc-4bbb-8539-a7ef32a39510",
          "input": "@seqin"
        },
        {
          "source": "704845d4-c1eb-44a7-c267-6f8d2b0ebc90",
          "output": "True",
          "target": "91797699-609e-4945-ca13-041a666016c8",
          "input": "@seqin"
        },
        {
          "source": "704845d4-c1eb-44a7-c267-6f8d2b0ebc90",
          "output": "False",
          "target": "e1f0401e-0ec0-4919-d481-5f8f04e1ece6",
          "input": "@seqin"
        },
        {
          "source": "aaecf13d-1fe3-4732-ec06-e36a1dbb880d",
          "output": "@seqout",
          "target": "ac31d540-7a96-46fe-cd95-7c1ba8e20172",
          "input": "@seqin"
        },
        {
          "source": "b0a9f268-305d-4856-cde3-de450c400500",
          "output": "@seqout",
          "target": "c4722d75-ca6d-4d24-e4b1-ca5a3f59739e",
          "input": "@seqin"
        },
        {
          "source": "c3a3475d-73ea-4f7c-e35c-11686f60c1ec",
          "output": "DAC_OK",
          "target": "5b2d2bda-c96a-4cac-abb9-7caafa58cdd9",
          "input": "@seqin"
        },
        {
          "source": "c3a3475d-73ea-4f7c-e35c-11686f60c1ec",
          "output": "FLASH_OK",
          "target": "90387b99-c3bd-416e-d69d-e7f1dac1bb93",
          "input": "@seqin"
        },
        {
          "source": "c3a3475d-73ea-4f7c-e35c-11686f60c1ec",
          "output": "ADC_OK",
          "target": "bf4b51ff-f6cf-4e57-c27d-7f9f62b5113e",
          "input": "@seqin"
        },
        {
          "source": "40002d2f-901c-487e-c9d8-bffb6fe13e67",
          "output": "@seqout",
          "target": "b0a9f268-305d-4856-cde3-de450c400500",
          "input": "@seqin"
        },
        {
          "source": "c3a3475d-73ea-4f7c-e35c-11686f60c1ec",
          "output": "@seqout",
          "target": "61eeee71-c270-42f9-8e40-166b1322d3ad",
          "input": "@seqin"
        },
        {
          "source": "c3a3475d-73ea-4f7c-e35c-11686f60c1ec",
          "output": "RTC_OK",
          "target": "dce11924-8fe1-4bc2-de73-1ea7f8b49b62",
          "input": "@seqin"
        },
        {
          "source": "c3a3475d-73ea-4f7c-e35c-11686f60c1ec",
          "output": "EDID_OK",
          "target": "dcc59159-7823-432a-9c34-aa9637f44a87",
          "input": "@seqin"
        },
        {
          "source": "c3a3475d-73ea-4f7c-e35c-11686f60c1ec",
          "output": "BTN_OK",
          "target": "e67e3522-f634-42cb-d179-12940e5fa627",
          "input": "@seqin"
        },
        {
          "source": "c3a3475d-73ea-4f7c-e35c-11686f60c1ec",
          "output": "SD_OK",
          "target": "956a0423-4a55-4e9a-a859-ed990cdf298e",
          "input": "@seqin"
        },
        {
          "source": "c3a3475d-73ea-4f7c-e35c-11686f60c1ec",
          "output": "ALL_OK",
          "target": "93876423-631c-42fc-8bc5-49d936cc3dd8",
          "input": "@seqin"
        },
        {
          "source": "0a5d35a4-c484-4ee5-f1b6-6719e5ff36ea",
          "output": "@seqout",
          "target": "1522fca9-2573-42f3-ab85-a18b8561a6b3",
          "input": "@seqin"
        },
        {
          "source": "60a96352-0e58-45aa-9e37-ce05694e20c0",
          "output": "done",
          "target": "1522fca9-2573-42f3-ab85-a18b8561a6b3",
          "input": "@seqin"
        },
        {
          "source": "93876423-631c-42fc-8bc5-49d936cc3dd8",
          "output": "@seqout",
          "target": "deb21027-b228-4c30-e856-13a68785bc06",
          "input": "@seqin"
        },
        {
          "source": "deb21027-b228-4c30-e856-13a68785bc06",
          "output": "@seqout",
          "target": "f9dd56c1-a809-4889-e55f-dfb3b5bbcc99",
          "input": "@seqin"
        },
        {
          "source": "f9dd56c1-a809-4889-e55f-dfb3b5bbcc99",
          "output": "@seqout",
          "target": "46b5b7e8-67eb-4318-d9eb-1ab2725e754c",
          "input": "@seqin"
        },
        {
          "source": "46b5b7e8-67eb-4318-d9eb-1ab2725e754c",
          "output": "@seqout",
          "target": "c23c04cd-5df8-4282-e499-2861fe0675b9",
          "input": "@seqin"
        },
        {
          "source": "c23c04cd-5df8-4282-e499-2861fe0675b9",
          "output": "@seqout",
          "target": "ed70e750-c616-4395-e34d-fed6bc46b1b8",
          "input": "@seqin"
        },
        {
          "source": "ed70e750-c616-4395-e34d-fed6bc46b1b8",
          "output": "@seqout",
          "target": "03fe01b3-aa0c-4bcf-fc53-598256d2761d",
          "input": "@seqin"
        },
        {
          "source": "03fe01b3-aa0c-4bcf-fc53-598256d2761d",
          "output": "@seqout",
          "target": "0a5d35a4-c484-4ee5-f1b6-6719e5ff36ea",
          "input": "@seqin"
        },
        {
          "source": "61eeee71-c270-42f9-8e40-166b1322d3ad",
          "output": "True",
          "target": "60a96352-0e58-45aa-9e37-ce05694e20c0",
          "input": "next"
        },
        {
          "source": "1522fca9-2573-42f3-ab85-a18b8561a6b3",
          "output": "True",
          "target": "07b958ad-3301-40a8-b162-1ac53dcfa412",
          "input": "@seqin"
        },
        {
          "source": "07b958ad-3301-40a8-b162-1ac53dcfa412",
          "output": "@seqout",
          "target": "da8aa49c-661d-467c-88f3-cd269ab8be28",
          "input": "@seqin"
        },
        {
          "source": "da8aa49c-661d-467c-88f3-cd269ab8be28",
          "output": "@seqout",
          "target": "704845d4-c1eb-44a7-c267-6f8d2b0ebc90",
          "input": "@seqin"
        }
      ],
      "localVariables": [
        {
          "name": "device",
          "type": "struct:Device",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "step",
          "type": "struct:StepStatus",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "connection",
          "type": "object:SerialConnection",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "selfTest",
          "type": "struct:SelfTest",
          "defaultValue": "{ DAC: false, FLASH: false, ADC: false, RTC: false, EDID: false, SD_CARD: false, BTN: false, HDMI: false }",
          "persistent": false
        }
      ],
      "name": "do_test_step_selftest",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "InputActionComponent",
          "left": -375,
          "top": -63,
          "width": 87,
          "height": 29,
          "wireID": "6c5a68d1-16f2-4142-8cdd-33d3d622292a",
          "customInputs": [],
          "customOutputs": [],
          "name": "device",
          "inputType": "struct:Device"
        },
        {
          "type": "EndActionComponent",
          "left": 2155,
          "top": -112,
          "width": 87,
          "height": 29,
          "wireID": "132e4c71-38e1-4d04-abbf-ec7c6f69b372",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "ExecuteCommand",
          "left": 788,
          "top": -103,
          "width": 410,
          "height": 170,
          "wireID": "385239a4-fc81-4288-c825-41e96776fcb3",
          "customInputs": [],
          "customOutputs": [],
          "command": "System.ProjectFolder + \"/fujprog\"",
          "arguments": "[\n  \"-j\", \"flash\",\n  \"-p\", device.deviceNumber, \n  System.ProjectFolder +\n    \"/ulx3s_\" + device.version + \"f_passthru.bit\"\n]"
        },
        {
          "type": "OutputActionComponent",
          "left": 1331,
          "top": -215,
          "width": 87,
          "height": 29,
          "wireID": "f08298b1-dffe-4864-92d7-c7e14af69242",
          "customInputs": [],
          "customOutputs": [],
          "name": "stdout",
          "outputType": "string"
        },
        {
          "type": "OutputActionComponent",
          "left": 1331,
          "top": -170,
          "width": 87,
          "height": 29,
          "wireID": "3b8a2cb3-7d45-4f51-9742-705f117c1761",
          "customInputs": [],
          "customOutputs": [],
          "name": "stderr",
          "outputType": "string"
        },
        {
          "type": "StartActionComponent",
          "left": -375,
          "top": -112,
          "width": 87,
          "height": 29,
          "wireID": "e8ef5b2b-e54e-47a2-bd37-7312e878f044",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "Regexp",
          "left": 1299,
          "top": 5,
          "width": 244,
          "height": 83,
          "wireID": "5516dec2-b3b8-4b94-8b29-3c1fe65752e8",
          "customInputs": [
            {
              "name": "data",
              "type": "string"
            }
          ],
          "customOutputs": [],
          "pattern": "\"Programming: (.+)%\"",
          "data": "data"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1424,
          "top": 182,
          "width": 243,
          "height": 62,
          "wireID": "d929f95d-c00f-4ac3-c1a0-5441f7101cfd",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "value[1]"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 476,
          "top": -103,
          "width": 274,
          "height": 62,
          "wireID": "fb35810c-ee82-4fdc-ceb5-f75f67133898",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.InProgress"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 1559,
          "top": -103,
          "width": 254,
          "height": 83,
          "wireID": "e9b7c4f6-796a-46ea-a332-20299b4fa0b1",
          "customInputs": [
            {
              "name": "result",
              "type": "integer"
            }
          ],
          "customOutputs": [],
          "value": "step.progress == 100 &&\nresult == 0"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1844,
          "top": -112,
          "width": 253,
          "height": 62,
          "wireID": "a121cbd7-3940-4ee3-c8aa-d5cc3352f8cf",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.Success"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1844,
          "top": -34,
          "width": 240,
          "height": 62,
          "wireID": "e9cb6f83-515f-44dd-c0db-aefca5883fb3",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.status",
          "value": "StepStatus.Error"
        },
        {
          "type": "SetVariableActionComponent",
          "left": -7,
          "top": -103,
          "width": 199,
          "height": 62,
          "wireID": "08276fca-1e0a-445c-d00c-c1414db805a2",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step",
          "value": "device.stepStatus"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 291,
          "top": -103,
          "width": 152,
          "height": 62,
          "wireID": "ef296883-beb6-4197-efe3-597ea15984c9",
          "customInputs": [],
          "customOutputs": [],
          "variable": "step.progress",
          "value": "0"
        },
        {
          "type": "SetVariableActionComponent",
          "left": -245,
          "top": -103,
          "width": 175,
          "height": 62,
          "wireID": "e757ed65-01b1-408d-e8a1-3535e549880d",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "device",
          "value": "value"
        },
        {
          "type": "CommentActionComponent",
          "left": 1543,
          "top": -186,
          "width": 435,
          "height": 57,
          "wireID": "4dabf28b-71b7-4c7c-a13a-2d76688df411",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Update progress</div>"
        },
        {
          "type": "CommentActionComponent",
          "left": 291,
          "top": -186,
          "width": 435,
          "height": 57,
          "wireID": "5777c40d-47c7-4f88-8178-75397918de92",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Start with progress 0%</div>"
        }
      ],
      "connectionLines": [
        {
          "source": "385239a4-fc81-4288-c825-41e96776fcb3",
          "output": "stdout",
          "target": "f08298b1-dffe-4864-92d7-c7e14af69242",
          "input": "@seqin"
        },
        {
          "source": "385239a4-fc81-4288-c825-41e96776fcb3",
          "output": "stderr",
          "target": "3b8a2cb3-7d45-4f51-9742-705f117c1761",
          "input": "@seqin"
        },
        {
          "source": "385239a4-fc81-4288-c825-41e96776fcb3",
          "output": "stderr",
          "target": "5516dec2-b3b8-4b94-8b29-3c1fe65752e8",
          "input": "data"
        },
        {
          "source": "5516dec2-b3b8-4b94-8b29-3c1fe65752e8",
          "output": "match",
          "target": "d929f95d-c00f-4ac3-c1a0-5441f7101cfd",
          "input": "value"
        },
        {
          "source": "ef296883-beb6-4197-efe3-597ea15984c9",
          "output": "@seqout",
          "target": "fb35810c-ee82-4fdc-ceb5-f75f67133898",
          "input": "@seqin"
        },
        {
          "source": "e9b7c4f6-796a-46ea-a332-20299b4fa0b1",
          "output": "True",
          "target": "a121cbd7-3940-4ee3-c8aa-d5cc3352f8cf",
          "input": "@seqin"
        },
        {
          "source": "a121cbd7-3940-4ee3-c8aa-d5cc3352f8cf",
          "output": "@seqout",
          "target": "132e4c71-38e1-4d04-abbf-ec7c6f69b372",
          "input": "@seqin"
        },
        {
          "source": "e9cb6f83-515f-44dd-c0db-aefca5883fb3",
          "output": "@seqout",
          "target": "132e4c71-38e1-4d04-abbf-ec7c6f69b372",
          "input": "@seqin"
        },
        {
          "source": "e9b7c4f6-796a-46ea-a332-20299b4fa0b1",
          "output": "False",
          "target": "e9cb6f83-515f-44dd-c0db-aefca5883fb3",
          "input": "@seqin"
        },
        {
          "source": "e8ef5b2b-e54e-47a2-bd37-7312e878f044",
          "output": "@seqout",
          "target": "e757ed65-01b1-408d-e8a1-3535e549880d",
          "input": "@seqin"
        },
        {
          "source": "08276fca-1e0a-445c-d00c-c1414db805a2",
          "output": "@seqout",
          "target": "ef296883-beb6-4197-efe3-597ea15984c9",
          "input": "@seqin"
        },
        {
          "source": "fb35810c-ee82-4fdc-ceb5-f75f67133898",
          "output": "@seqout",
          "target": "385239a4-fc81-4288-c825-41e96776fcb3",
          "input": "@seqin"
        },
        {
          "source": "d929f95d-c00f-4ac3-c1a0-5441f7101cfd",
          "output": "@seqout",
          "target": "5516dec2-b3b8-4b94-8b29-3c1fe65752e8",
          "input": "next"
        },
        {
          "source": "5516dec2-b3b8-4b94-8b29-3c1fe65752e8",
          "output": "done",
          "target": "e9b7c4f6-796a-46ea-a332-20299b4fa0b1",
          "input": "@seqin"
        },
        {
          "source": "385239a4-fc81-4288-c825-41e96776fcb3",
          "output": "stderr",
          "target": "5516dec2-b3b8-4b94-8b29-3c1fe65752e8",
          "input": "@seqin"
        },
        {
          "source": "e757ed65-01b1-408d-e8a1-3535e549880d",
          "output": "@seqout",
          "target": "08276fca-1e0a-445c-d00c-c1414db805a2",
          "input": "@seqin"
        },
        {
          "source": "6c5a68d1-16f2-4142-8cdd-33d3d622292a",
          "output": "@seqout",
          "target": "e757ed65-01b1-408d-e8a1-3535e549880d",
          "input": "value"
        },
        {
          "source": "385239a4-fc81-4288-c825-41e96776fcb3",
          "output": "finished",
          "target": "e9b7c4f6-796a-46ea-a332-20299b4fa0b1",
          "input": "result"
        }
      ],
      "localVariables": [
        {
          "name": "device",
          "type": "struct:Device",
          "defaultValue": "null",
          "persistent": false
        },
        {
          "name": "step",
          "type": "struct:StepStatus",
          "defaultValue": "null",
          "persistent": false
        }
      ],
      "name": "do_test_step_esp32_perm_prog",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "EndActionComponent",
          "left": 1582,
          "top": 208,
          "width": 87,
          "height": 29,
          "wireID": "6a1508a1-ac0e-4cdc-e21b-40cf18085030",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "InputActionComponent",
          "left": -573,
          "top": -12,
          "width": 87,
          "height": 29,
          "wireID": "171575fc-8624-4642-8ee6-7e84778fe98c",
          "customInputs": [],
          "customOutputs": [],
          "name": "device",
          "inputType": "struct:Device"
        },
        {
          "type": "eez-flow-ext-postgres/Postgres",
          "left": -258,
          "top": -12,
          "width": 525,
          "height": 62,
          "wireID": "6c12c3e5-b93e-4862-f021-8cd10067ebb9",
          "customInputs": [],
          "customOutputs": [],
          "connection": "db_connection",
          "sql": "SELECT * FROM devices WHERE \"serialNumber\" = '{device.serialNumber}'"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 168,
          "top": 102,
          "width": 245,
          "height": 83,
          "wireID": "45684e3a-0386-472e-fa9a-0114ec9fafb6",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "value": "value.rows.length != 0"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 518,
          "top": 830,
          "width": 155,
          "height": 83,
          "wireID": "64bf4812-51c0-4b77-8cb0-5c3d57ef7860",
          "customInputs": [],
          "customOutputs": [],
          "value": "update_database"
        },
        {
          "type": "eez-flow-ext-postgres/Postgres",
          "left": 518,
          "top": 976,
          "width": 1011,
          "height": 260,
          "wireID": "a86d6ef9-e4c7-4dd7-86c3-df1b89f92f09",
          "customInputs": [
            {
              "name": "serialNumber",
              "type": "string"
            }
          ],
          "customOutputs": [],
          "connection": "db_connection",
          "sql": "INSERT INTO devices(\"serialNumber\", \"version\", \"currentStep\", \"stepStatus\", \"allTestsOK\", \"addedBy\", \"createdAt\", \"updatedAt\") \nVALUES(\n  {serialNumber},\n  '{device.version}',\n  {device.currentStep},\n  {device.stepStatus.status},\n  false,\n  current_user,\n  NOW(),\n  NOW()\n)\nRETURNING *"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1558,
          "top": 976,
          "width": 404,
          "height": 62,
          "wireID": "5215838f-83f3-4f2c-f148-a3774ae3c1cb",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "device.serialNumber",
          "value": "value.rows[0].serialNumber"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 454,
          "top": -198,
          "width": 337,
          "height": 62,
          "wireID": "ca022600-fbe0-463c-c582-28c35b032ddd",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "device.version",
          "value": "value.rows[0].version"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 454,
          "top": -89,
          "width": 391,
          "height": 62,
          "wireID": "c0503519-dccd-41d2-f09b-6bfc7550a3c0",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "device.currentStep",
          "value": "value.rows[0].currentStep"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 454,
          "top": 17,
          "width": 425,
          "height": 62,
          "wireID": "86ebdf39-cbbd-44d2-f406-5ec7c3962d54",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "device.stepStatus.status",
          "value": "value.rows[0].stepStatus"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 454,
          "top": 110,
          "width": 377,
          "height": 62,
          "wireID": "570e6df0-b520-47d9-e2c2-c38c4a9cfee0",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "device.allTestsOK",
          "value": "value.rows[0].allTestsOK"
        },
        {
          "type": "CallActionActionComponent",
          "left": -213,
          "top": 420,
          "width": 153,
          "height": 105,
          "wireID": "6acf97b0-a2e4-4dda-e665-f248e047123e",
          "customInputs": [],
          "customOutputs": [],
          "action": "find_device_version"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 34,
          "top": 432,
          "width": 229,
          "height": 62,
          "wireID": "72532e2a-4fe0-4c03-f8fc-55fd270f3ee1",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "device.version",
          "value": "value"
        },
        {
          "type": "OutputActionComponent",
          "left": -25,
          "top": 350,
          "width": 87,
          "height": 29,
          "wireID": "7409c12c-f563-4178-b42d-c705259b7004",
          "customInputs": [],
          "customOutputs": [],
          "name": "stdout",
          "outputType": "string"
        },
        {
          "type": "OutputActionComponent",
          "left": 14,
          "top": 391,
          "width": 87,
          "height": 29,
          "wireID": "a30aa194-4aa3-4f2a-8fbb-c2fa4f63e767",
          "customInputs": [],
          "customOutputs": [],
          "name": "stderr",
          "outputType": "string"
        },
        {
          "type": "EvalExprActionComponent",
          "left": -371,
          "top": 420,
          "width": 126,
          "height": 62,
          "wireID": "233490cd-78fa-44d1-ea07-939e6f4290a1",
          "customInputs": [],
          "customOutputs": [],
          "expression": "device"
        },
        {
          "type": "CommentActionComponent",
          "left": -362,
          "top": 280,
          "width": 435,
          "height": 57,
          "wireID": "41b96eee-3a48-4291-e971-1e36a14d3c42",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Not in database, get device version first</div>"
        },
        {
          "type": "CommentActionComponent",
          "left": 454,
          "top": -270,
          "width": 435,
          "height": 57,
          "wireID": "387b120a-9c44-4b5b-8ec6-c2404977957d",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Already in database</div>"
        },
        {
          "type": "CommentActionComponent",
          "left": 506,
          "top": 750,
          "width": 435,
          "height": 57,
          "wireID": "4bee8e5a-b5b0-4091-a74c-94a2607da007",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Insert in database if update_database enabled</div>"
        },
        {
          "type": "SetVariableActionComponent",
          "left": -458,
          "top": -12,
          "width": 175,
          "height": 62,
          "wireID": "ef75c953-cdce-49f9-c3d5-b5cba8da8787",
          "customInputs": [
            {
              "name": "value",
              "type": "any"
            }
          ],
          "customOutputs": [],
          "variable": "device",
          "value": "value"
        },
        {
          "type": "IsTrueActionComponent",
          "left": -1317,
          "top": 1038,
          "width": 189,
          "height": 83,
          "wireID": "5bedd02a-c482-43ac-b8c5-54fc5205ec9c",
          "customInputs": [],
          "customOutputs": [],
          "value": "test_step_enabled[0]"
        },
        {
          "type": "EvalExprActionComponent",
          "left": -1071,
          "top": 990,
          "width": 1495,
          "height": 62,
          "wireID": "74aeb248-364d-4d14-b94a-a254a8bd0fb9",
          "customInputs": [],
          "customOutputs": [],
          "expression": "\"(SELECT (\\'D\\' || LPAD(CAST((COALESCE(MAX(CAST(SUBSTRING(\\\"serialNumber\\\" from 2) AS DECIMAL)), -1) + 1) AS TEXT), 5, \\'0\\')) AS serialNumber FROM devices WHERE SUBSTRING(\\\"serialNumber\\\" FROM 1 FOR 1) = \\'D\\')\""
        },
        {
          "type": "EvalExprActionComponent",
          "left": 104,
          "top": 1081,
          "width": 276,
          "height": 62,
          "wireID": "b1d0590e-5fce-4f9d-8b31-b4d9dee7e210",
          "customInputs": [],
          "customOutputs": [],
          "expression": "\"'\" + device.serialNumber + \"'\""
        },
        {
          "type": "ConstantActionComponent",
          "left": -382,
          "top": 606,
          "width": 89,
          "height": 61,
          "wireID": "720ecc48-f2ff-4706-b505-97585c74450e",
          "customInputs": [],
          "customOutputs": [],
          "value": "-1"
        },
        {
          "type": "CallActionActionComponent",
          "left": -255,
          "top": 606,
          "width": 155,
          "height": 61,
          "wireID": "e68edd04-b9c9-4a94-d541-7e0bb0c21c84",
          "customInputs": [],
          "customOutputs": [],
          "action": "next_step"
        },
        {
          "type": "SetVariableActionComponent",
          "left": -58,
          "top": 606,
          "width": 343,
          "height": 62,
          "wireID": "a75f5cfa-60ea-4d65-aba2-9cb92005dbbd",
          "customInputs": [
            {
              "name": "current_step",
              "type": "integer"
            }
          ],
          "customOutputs": [],
          "variable": "device.currentStep",
          "value": "current_step"
        },
        {
          "type": "CommentActionComponent",
          "left": -382,
          "top": 539,
          "width": 435,
          "height": 57,
          "wireID": "bdb1b500-e067-4197-8a87-38f8595c23ea",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->Get current_step</div>"
        },
        {
          "type": "IsTrueActionComponent",
          "left": 879,
          "top": -89,
          "width": 391,
          "height": 83,
          "wireID": "5f691458-fa30-4908-e736-94c57af275e1",
          "customInputs": [],
          "customOutputs": [],
          "value": "device.currentStep >= 1 && device.currentStep <= 4"
        },
        {
          "type": "SetVariableActionComponent",
          "left": 1320,
          "top": -89,
          "width": 186,
          "height": 62,
          "wireID": "0f3158ba-dfd8-4793-e639-4b0958b0f63c",
          "customInputs": [],
          "customOutputs": [],
          "variable": "device.currentStep",
          "value": "1"
        },
        {
          "type": "CommentActionComponent",
          "left": 879,
          "top": -180,
          "width": 435,
          "height": 78,
          "wireID": "670a03cc-7bd4-47f4-db4a-76a8d69740bc",
          "customInputs": [],
          "customOutputs": [],
          "text": "<div><!--block-->If currentStep is \"ESP32 erase\", \"ESP32 programming\" or \"MP test\" then we go&nbsp; back to \"ESP32 passthru\"</div>"
        }
      ],
      "connectionLines": [
        {
          "source": "171575fc-8624-4642-8ee6-7e84778fe98c",
          "output": "@seqout",
          "target": "ef75c953-cdce-49f9-c3d5-b5cba8da8787",
          "input": "value"
        },
        {
          "source": "6c12c3e5-b93e-4862-f021-8cd10067ebb9",
          "output": "result",
          "target": "45684e3a-0386-472e-fa9a-0114ec9fafb6",
          "input": "value"
        },
        {
          "source": "45684e3a-0386-472e-fa9a-0114ec9fafb6",
          "output": "False",
          "target": "233490cd-78fa-44d1-ea07-939e6f4290a1",
          "input": "@seqin"
        },
        {
          "source": "64bf4812-51c0-4b77-8cb0-5c3d57ef7860",
          "output": "False",
          "target": "6a1508a1-ac0e-4cdc-e21b-40cf18085030",
          "input": "@seqin"
        },
        {
          "source": "64bf4812-51c0-4b77-8cb0-5c3d57ef7860",
          "output": "True",
          "target": "5bedd02a-c482-43ac-b8c5-54fc5205ec9c",
          "input": "@seqin"
        },
        {
          "source": "5215838f-83f3-4f2c-f148-a3774ae3c1cb",
          "output": "@seqout",
          "target": "6a1508a1-ac0e-4cdc-e21b-40cf18085030",
          "input": "@seqin"
        },
        {
          "source": "6c12c3e5-b93e-4862-f021-8cd10067ebb9",
          "output": "result",
          "target": "ca022600-fbe0-463c-c582-28c35b032ddd",
          "input": "value"
        },
        {
          "source": "ca022600-fbe0-463c-c582-28c35b032ddd",
          "output": "@seqout",
          "target": "c0503519-dccd-41d2-f09b-6bfc7550a3c0",
          "input": "@seqin"
        },
        {
          "source": "c0503519-dccd-41d2-f09b-6bfc7550a3c0",
          "output": "@seqout",
          "target": "5f691458-fa30-4908-e736-94c57af275e1",
          "input": "@seqin"
        },
        {
          "source": "6c12c3e5-b93e-4862-f021-8cd10067ebb9",
          "output": "result",
          "target": "c0503519-dccd-41d2-f09b-6bfc7550a3c0",
          "input": "value"
        },
        {
          "source": "6c12c3e5-b93e-4862-f021-8cd10067ebb9",
          "output": "result",
          "target": "86ebdf39-cbbd-44d2-f406-5ec7c3962d54",
          "input": "value"
        },
        {
          "source": "86ebdf39-cbbd-44d2-f406-5ec7c3962d54",
          "output": "@seqout",
          "target": "570e6df0-b520-47d9-e2c2-c38c4a9cfee0",
          "input": "@seqin"
        },
        {
          "source": "6c12c3e5-b93e-4862-f021-8cd10067ebb9",
          "output": "result",
          "target": "570e6df0-b520-47d9-e2c2-c38c4a9cfee0",
          "input": "value"
        },
        {
          "source": "570e6df0-b520-47d9-e2c2-c38c4a9cfee0",
          "output": "@seqout",
          "target": "6a1508a1-ac0e-4cdc-e21b-40cf18085030",
          "input": "@seqin"
        },
        {
          "source": "6acf97b0-a2e4-4dda-e665-f248e047123e",
          "output": "e087430e-0c46-4e7e-c104-08e0d377cdf8",
          "target": "72532e2a-4fe0-4c03-f8fc-55fd270f3ee1",
          "input": "value"
        },
        {
          "source": "6acf97b0-a2e4-4dda-e665-f248e047123e",
          "output": "6eb08fef-9d0b-490c-f889-9deb5fdd550f",
          "target": "7409c12c-f563-4178-b42d-c705259b7004",
          "input": "@seqin"
        },
        {
          "source": "6acf97b0-a2e4-4dda-e665-f248e047123e",
          "output": "d89c4ad0-fb95-4473-f033-22de07339232",
          "target": "a30aa194-4aa3-4f2a-8fbb-c2fa4f63e767",
          "input": "@seqin"
        },
        {
          "source": "233490cd-78fa-44d1-ea07-939e6f4290a1",
          "output": "result",
          "target": "6acf97b0-a2e4-4dda-e665-f248e047123e",
          "input": "3fc58eb5-8399-4235-a489-bef5db4f2b4f"
        },
        {
          "source": "72532e2a-4fe0-4c03-f8fc-55fd270f3ee1",
          "output": "@seqout",
          "target": "720ecc48-f2ff-4706-b505-97585c74450e",
          "input": "@seqin"
        },
        {
          "source": "45684e3a-0386-472e-fa9a-0114ec9fafb6",
          "output": "True",
          "target": "ca022600-fbe0-463c-c582-28c35b032ddd",
          "input": "@seqin"
        },
        {
          "source": "ef75c953-cdce-49f9-c3d5-b5cba8da8787",
          "output": "@seqout",
          "target": "6c12c3e5-b93e-4862-f021-8cd10067ebb9",
          "input": "@seqin"
        },
        {
          "source": "a86d6ef9-e4c7-4dd7-86c3-df1b89f92f09",
          "output": "result",
          "target": "5215838f-83f3-4f2c-f148-a3774ae3c1cb",
          "input": "value"
        },
        {
          "source": "5bedd02a-c482-43ac-b8c5-54fc5205ec9c",
          "output": "True",
          "target": "74aeb248-364d-4d14-b94a-a254a8bd0fb9",
          "input": "@seqin"
        },
        {
          "source": "74aeb248-364d-4d14-b94a-a254a8bd0fb9",
          "output": "result",
          "target": "a86d6ef9-e4c7-4dd7-86c3-df1b89f92f09",
          "input": "serialNumber"
        },
        {
          "source": "5bedd02a-c482-43ac-b8c5-54fc5205ec9c",
          "output": "False",
          "target": "b1d0590e-5fce-4f9d-8b31-b4d9dee7e210",
          "input": "@seqin"
        },
        {
          "source": "b1d0590e-5fce-4f9d-8b31-b4d9dee7e210",
          "output": "result",
          "target": "a86d6ef9-e4c7-4dd7-86c3-df1b89f92f09",
          "input": "serialNumber"
        },
        {
          "source": "720ecc48-f2ff-4706-b505-97585c74450e",
          "output": "value",
          "target": "e68edd04-b9c9-4a94-d541-7e0bb0c21c84",
          "input": "5052d1e0-a07a-48e4-f9c1-8dab11cf5733"
        },
        {
          "source": "e68edd04-b9c9-4a94-d541-7e0bb0c21c84",
          "output": "f799f405-c02a-4bcc-a6d0-e14522382ea8",
          "target": "a75f5cfa-60ea-4d65-aba2-9cb92005dbbd",
          "input": "current_step"
        },
        {
          "source": "a75f5cfa-60ea-4d65-aba2-9cb92005dbbd",
          "output": "@seqout",
          "target": "64bf4812-51c0-4b77-8cb0-5c3d57ef7860",
          "input": "@seqin"
        },
        {
          "source": "5f691458-fa30-4908-e736-94c57af275e1",
          "output": "False",
          "target": "86ebdf39-cbbd-44d2-f406-5ec7c3962d54",
          "input": "@seqin"
        },
        {
          "source": "5f691458-fa30-4908-e736-94c57af275e1",
          "output": "True",
          "target": "0f3158ba-dfd8-4793-e639-4b0958b0f63c",
          "input": "@seqin"
        },
        {
          "source": "0f3158ba-dfd8-4793-e639-4b0958b0f63c",
          "output": "@seqout",
          "target": "86ebdf39-cbbd-44d2-f406-5ec7c3962d54",
          "input": "@seqin"
        }
      ],
      "localVariables": [
        {
          "name": "device",
          "type": "struct:Device",
          "defaultValue": "null",
          "persistent": false
        }
      ],
      "name": "db_get_device",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "InputActionComponent",
          "left": -396,
          "top": -134,
          "width": 87,
          "height": 29,
          "wireID": "2cad6570-0fe7-4965-e995-6525559a83b3",
          "customInputs": [],
          "customOutputs": [],
          "name": "device",
          "inputType": "struct:Device"
        },
        {
          "type": "EndActionComponent",
          "left": 499,
          "top": 45,
          "width": 87,
          "height": 29,
          "wireID": "56fe56b1-b885-4b78-a095-f626352c9b20",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "eez-flow-ext-postgres/Postgres",
          "left": 0,
          "top": -134,
          "width": 426,
          "height": 134,
          "wireID": "5c4542d8-a5b7-4181-fbd9-688b6adbb1e3",
          "customInputs": [
            {
              "name": "device",
              "type": "struct:Device"
            }
          ],
          "customOutputs": [],
          "connection": "db_connection",
          "sql": "UPDATE devices SET\n  \"currentStep\" = {device.currentStep},\n  \"stepStatus\" = {device.stepStatus.status},\n  \"allTestsOK\" = {device.allTestsOK}\nWHERE \"serialNumber\" = '{device.serialNumber}'"
        },
        {
          "type": "IsTrueActionComponent",
          "left": -253,
          "top": -9,
          "width": 155,
          "height": 83,
          "wireID": "578f066c-91bb-4dbb-e36b-6809bb9fdd58",
          "customInputs": [],
          "customOutputs": [],
          "value": "update_database"
        },
        {
          "type": "LogActionComponent",
          "left": 499,
          "top": -134,
          "width": 87,
          "height": 61,
          "wireID": "35986504-4b2a-4c48-d045-ef8756e19818",
          "customInputs": [
            {
              "name": "value",
              "type": "string"
            }
          ],
          "customOutputs": [],
          "value": "value"
        }
      ],
      "connectionLines": [
        {
          "source": "2cad6570-0fe7-4965-e995-6525559a83b3",
          "output": "@seqout",
          "target": "5c4542d8-a5b7-4181-fbd9-688b6adbb1e3",
          "input": "device"
        },
        {
          "source": "5c4542d8-a5b7-4181-fbd9-688b6adbb1e3",
          "output": "@seqout",
          "target": "56fe56b1-b885-4b78-a095-f626352c9b20",
          "input": "@seqin"
        },
        {
          "source": "2cad6570-0fe7-4965-e995-6525559a83b3",
          "output": "@seqout",
          "target": "578f066c-91bb-4dbb-e36b-6809bb9fdd58",
          "input": "@seqin"
        },
        {
          "source": "578f066c-91bb-4dbb-e36b-6809bb9fdd58",
          "output": "True",
          "target": "5c4542d8-a5b7-4181-fbd9-688b6adbb1e3",
          "input": "@seqin"
        },
        {
          "source": "578f066c-91bb-4dbb-e36b-6809bb9fdd58",
          "output": "False",
          "target": "56fe56b1-b885-4b78-a095-f626352c9b20",
          "input": "@seqin"
        },
        {
          "source": "5c4542d8-a5b7-4181-fbd9-688b6adbb1e3",
          "output": "result",
          "target": "35986504-4b2a-4c48-d045-ef8756e19818",
          "input": "value"
        }
      ],
      "localVariables": [],
      "name": "db_update_device",
      "implementationType": "flow"
    },
    {
      "components": [
        {
          "type": "InputActionComponent",
          "left": -365,
          "top": -150,
          "width": 87,
          "height": 29,
          "wireID": "2cad6570-0fe7-4965-e995-6525559a83b3",
          "customInputs": [],
          "customOutputs": [],
          "name": "device",
          "inputType": "struct:Device"
        },
        {
          "type": "EndActionComponent",
          "left": 385,
          "top": 255,
          "width": 87,
          "height": 29,
          "wireID": "56fe56b1-b885-4b78-a095-f626352c9b20",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "eez-flow-ext-postgres/Postgres",
          "left": 0,
          "top": -134,
          "width": 312,
          "height": 350,
          "wireID": "5c4542d8-a5b7-4181-fbd9-688b6adbb1e3",
          "customInputs": [
            {
              "name": "device",
              "type": "struct:Device"
            },
            {
              "name": "stdout",
              "type": "string"
            },
            {
              "name": "stderr",
              "type": "string"
            }
          ],
          "customOutputs": [],
          "connection": "db_connection",
          "sql": "INSERT INTO tests(\n  \"serialNumber\",\n  \"currentStep\",\n  \"stepStatus\",\n  \"stdout\",\n  \"stderr\",\n  \"addedBy\",\n  \"createdAt\"\n) VALUES(\n  '{device.serialNumber}',\n  {device.currentStep},\n  {device.stepStatus.status},\n  '{stdout}',\n  '{stderr}',\n  current_user,\n  NOW()\n)"
        },
        {
          "type": "IsTrueActionComponent",
          "left": -262,
          "top": 201,
          "width": 155,
          "height": 83,
          "wireID": "578f066c-91bb-4dbb-e36b-6809bb9fdd58",
          "customInputs": [],
          "customOutputs": [],
          "value": "update_database"
        },
        {
          "type": "LogActionComponent",
          "left": 394,
          "top": -121,
          "width": 87,
          "height": 61,
          "wireID": "35986504-4b2a-4c48-d045-ef8756e19818",
          "customInputs": [
            {
              "name": "value",
              "type": "string"
            }
          ],
          "customOutputs": [],
          "value": "value"
        },
        {
          "type": "InputActionComponent",
          "left": -229,
          "top": -91,
          "width": 87,
          "height": 29,
          "wireID": "695ccaf5-9e26-4177-ec2e-8fd17c90b2a0",
          "customInputs": [],
          "customOutputs": [],
          "name": "stdout",
          "inputType": "string"
        },
        {
          "type": "InputActionComponent",
          "left": -229,
          "top": -48,
          "width": 87,
          "height": 29,
          "wireID": "3ae807e7-d4b6-4d90-d55a-9b141374f351",
          "customInputs": [],
          "customOutputs": [],
          "name": "stderr",
          "inputType": "string"
        }
      ],
      "connectionLines": [
        {
          "source": "2cad6570-0fe7-4965-e995-6525559a83b3",
          "output": "@seqout",
          "target": "5c4542d8-a5b7-4181-fbd9-688b6adbb1e3",
          "input": "device"
        },
        {
          "source": "5c4542d8-a5b7-4181-fbd9-688b6adbb1e3",
          "output": "@seqout",
          "target": "56fe56b1-b885-4b78-a095-f626352c9b20",
          "input": "@seqin"
        },
        {
          "source": "2cad6570-0fe7-4965-e995-6525559a83b3",
          "output": "@seqout",
          "target": "578f066c-91bb-4dbb-e36b-6809bb9fdd58",
          "input": "@seqin"
        },
        {
          "source": "578f066c-91bb-4dbb-e36b-6809bb9fdd58",
          "output": "True",
          "target": "5c4542d8-a5b7-4181-fbd9-688b6adbb1e3",
          "input": "@seqin"
        },
        {
          "source": "578f066c-91bb-4dbb-e36b-6809bb9fdd58",
          "output": "False",
          "target": "56fe56b1-b885-4b78-a095-f626352c9b20",
          "input": "@seqin"
        },
        {
          "source": "5c4542d8-a5b7-4181-fbd9-688b6adbb1e3",
          "output": "result",
          "target": "35986504-4b2a-4c48-d045-ef8756e19818",
          "input": "value"
        },
        {
          "source": "695ccaf5-9e26-4177-ec2e-8fd17c90b2a0",
          "output": "@seqout",
          "target": "5c4542d8-a5b7-4181-fbd9-688b6adbb1e3",
          "input": "stdout"
        },
        {
          "source": "3ae807e7-d4b6-4d90-d55a-9b141374f351",
          "output": "@seqout",
          "target": "5c4542d8-a5b7-4181-fbd9-688b6adbb1e3",
          "input": "stderr"
        }
      ],
      "localVariables": [],
      "name": "db_insert_test",
      "implementationType": "flow"
    }
  ],
  "pages": [
    {
      "components": [
        {
          "type": "StartActionComponent",
          "left": 0,
          "top": -86,
          "width": 87,
          "height": 29,
          "wireID": "3ac1fc9c-664c-4ebc-d2f3-3e9834f0dbd2",
          "customInputs": [],
          "customOutputs": []
        },
        {
          "type": "List",
          "left": 10,
          "top": 10,
          "width": 480,
          "height": 860,
          "wireID": "5b8201d0-a212-41a3-b10a-b3070ade1c35",
          "customInputs": [],
          "customOutputs": [],
          "data": "devices",
          "style": {
            "inheritFrom": "default"
          },
          "itemWidget": {
            "type": "Container",
            "left": 0,
            "top": 0,
            "width": 480,
            "height": 86,
            "wireID": "4179923f-07b8-49c8-b3bf-7ce4d14fe6e3",
            "customInputs": [],
            "customOutputs": [],
            "className": "",
            "style": {
              "inheritFrom": "default"
            },
            "widgets": [
              {
                "type": "Container",
                "left": 0,
                "top": 0,
                "width": 480,
                "height": 76,
                "wireID": "c5a66d82-b20c-4849-bfc0-192b0c75e9db",
                "customInputs": [],
                "customOutputs": [],
                "className": "device",
                "style": {
                  "inheritFrom": "default"
                },
                "widgets": [
                  {
                    "type": "LayoutViewWidget",
                    "left": 5,
                    "top": 0,
                    "width": 470,
                    "height": 76,
                    "wireID": "47943f98-2256-4660-9e2b-44c5f77c96d1",
                    "customInputs": [],
                    "customOutputs": [],
                    "className": "",
                    "style": {
                      "inheritFrom": "default"
                    },
                    "layout": "device"
                  }
                ]
              }
            ],
            "visible": ""
          },
          "listType": "vertical",
          "gap": 0
        },
        {
          "type": "CheckboxWidget",
          "left": 500,
          "top": 10,
          "width": 150,
          "height": 22,
          "wireID": "4ee65bbb-45e2-444e-9a21-7034deefcc0a",
          "customInputs": [],
          "customOutputs": [],
          "asOutputProperties": [],
          "data": "automatic_testing",
          "label": "\"Automatic testing\""
        },
        {
          "type": "Container",
          "left": 500,
          "top": 44,
          "width": 400,
          "height": 32,
          "wireID": "94e69b05-f54e-4a87-de4b-41f0595ced07",
          "customInputs": [],
          "customOutputs": [],
          "style": {
            "inheritFrom": "default"
          },
          "widgets": [
            {
              "type": "Container",
              "left": 0,
              "top": 0,
              "width": 100,
              "height": 32,
              "wireID": "15110cc2-4da4-41d4-cc00-a3f46ae65982",
              "customInputs": [],
              "customOutputs": [],
              "style": {
                "inheritFrom": "default"
              },
              "widgets": [
                {
                  "type": "ButtonWidget",
                  "left": 0,
                  "top": 0,
                  "width": 100,
                  "height": 32,
                  "wireID": "8d495d53-3bfe-4ad9-925a-b3537497cf6f",
                  "customInputs": [],
                  "customOutputs": [],
                  "asOutputProperties": [
                    "action"
                  ],
                  "data": "\"Refresh\"",
                  "style": {
                    "inheritFrom": "default"
                  },
                  "disabledStyle": {
                    "inheritFrom": "default"
                  }
                }
              ],
              "visible": "!auto_refresh"
            },
            {
              "type": "ButtonWidget",
              "left": 192,
              "top": 0,
              "width": 100,
              "height": 32,
              "wireID": "e7b0216b-8591-4a18-a7f9-a469cfa1a500",
              "customInputs": [],
              "customOutputs": [],
              "asOutputProperties": [
                "action"
              ],
              "data": "\"Help\"",
              "style": {
                "inheritFrom": "default"
              },
              "disabledStyle": {
                "inheritFrom": "default"
              }
            },
            {
              "type": "ButtonWidget",
              "left": 300,
              "top": 0,
              "width": 100,
              "height": 32,
              "wireID": "fce171ed-0cea-42f7-f784-71f05a2d2ea0",
              "customInputs": [],
              "customOutputs": [],
              "asOutputProperties": [
                "action"
              ],
              "data": "\"Settings\"",
              "style": {
                "inheritFrom": "default"
              },
              "disabledStyle": {
                "inheritFrom": "default"
              }
            }
          ]
        },
        {
          "type": "Container",
          "left": 500,
          "top": 76,
          "width": 400,
          "height": 794,
          "wireID": "56487202-2294-4223-d44a-775a153559b9",
          "customInputs": [],
          "customOutputs": [],
          "style": {
            "inheritFrom": "default"
          },
          "widgets": [
            {
              "type": "TextWidget",
              "left": 0,
              "top": 0,
              "width": 400,
              "height": 32,
              "wireID": "38091ef3-3d17-4b52-e987-52b2145df9a2",
              "customInputs": [],
              "customOutputs": [],
              "data": "\"STDOUT\"",
              "style": {
                "inheritFrom": "default"
              },
              "name": ""
            },
            {
              "type": "TerminalWidget",
              "left": 0,
              "top": 32,
              "width": 400,
              "height": 368,
              "wireID": "06b3b7be-ee9c-4de5-e1fd-1e258ad83a42",
              "customInputs": [],
              "customOutputs": []
            },
            {
              "type": "TextWidget",
              "left": 0,
              "top": 394,
              "width": 400,
              "height": 32,
              "wireID": "2298eba3-5b56-4b26-defd-a784f328999b",
              "customInputs": [],
              "customOutputs": [],
              "data": "\"STDERR\"",
              "style": {
                "inheritFrom": "default"
              },
              "name": ""
            },
            {
              "type": "TerminalWidget",
              "left": 0,
              "top": 426,
              "width": 400,
              "height": 368,
              "wireID": "c3b3866a-3796-4fcb-9ce5-3ec1ab9ef9c5",
              "customInputs": [],
              "customOutputs": []
            }
          ]
        },
        {
          "type": "LogActionComponent",
          "left": 957,
          "top": 446,
          "width": 87,
          "height": 61,
          "wireID": "9ccd170c-ed25-42a3-ce7c-c3a140e085b8",
          "customInputs": [
            {
              "name": "value",
              "type": "string"
            }
          ],
          "customOutputs": [],
          "value": "value"
        },
        {
          "type": "ShowPageActionComponent",
          "left": 1070,
          "top": 0,
          "width": 110,
          "height": 62,
          "wireID": "f36a40e5-c8dd-41c3-b5a5-728dc0aa0931",
          "customInputs": [],
          "customOutputs": [],
          "page": "settings_page"
        },
        {
          "type": "CallActionActionComponent",
          "left": 849,
          "top": -98,
          "width": 120,
          "height": 83,
          "wireID": "00e16497-04a1-4769-86ab-3009384a8f99",
          "customInputs": [],
          "customOutputs": [],
          "action": "enum_devices"
        },
        {
          "type": "CallActionActionComponent",
          "left": 182,
          "top": -107,
          "width": 98,
          "height": 83,
          "wireID": "8d7c4b43-cdc8-408a-d6cf-480e72ff6bf9",
          "customInputs": [],
          "customOutputs": [],
          "action": "main_loop"
        },
        {
          "type": "ShowPageActionComponent",
          "left": 1070,
          "top": 76,
          "width": 102,
          "height": 62,
          "wireID": "ed058437-1585-409d-c108-ad67e85349e6",
          "customInputs": [],
          "customOutputs": [],
          "page": "help"
        }
      ],
      "connectionLines": [
        {
          "source": "06b3b7be-ee9c-4de5-e1fd-1e258ad83a42",
          "output": "onData",
          "target": "9ccd170c-ed25-42a3-ce7c-c3a140e085b8",
          "input": "value"
        },
        {
          "source": "c3b3866a-3796-4fcb-9ce5-3ec1ab9ef9c5",
          "output": "onData",
          "target": "9ccd170c-ed25-42a3-ce7c-c3a140e085b8",
          "input": "value"
        },
        {
          "source": "e7b0216b-8591-4a18-a7f9-a469cfa1a500",
          "output": "action",
          "target": "ed058437-1585-409d-c108-ad67e85349e6",
          "input": "@seqin"
        },
        {
          "source": "8d495d53-3bfe-4ad9-925a-b3537497cf6f",
          "output": "action",
          "target": "00e16497-04a1-4769-86ab-3009384a8f99",
          "input": "@seqin"
        },
        {
          "source": "3ac1fc9c-664c-4ebc-d2f3-3e9834f0dbd2",
          "output": "@seqout",
          "target": "8d7c4b43-cdc8-408a-d6cf-480e72ff6bf9",
          "input": "@seqin"
        },
        {
          "source": "47943f98-2256-4660-9e2b-44c5f77c96d1",
          "output": "721c9ab8-443d-4693-9191-9a16e96ce776",
          "target": "06b3b7be-ee9c-4de5-e1fd-1e258ad83a42",
          "input": "data"
        },
        {
          "source": "47943f98-2256-4660-9e2b-44c5f77c96d1",
          "output": "662f055a-e57e-44e9-e869-88020f1154b7",
          "target": "c3b3866a-3796-4fcb-9ce5-3ec1ab9ef9c5",
          "input": "data"
        },
        {
          "source": "8d7c4b43-cdc8-408a-d6cf-480e72ff6bf9",
          "output": "4dce99dd-a04a-4b68-847c-45a8215faea4",
          "target": "06b3b7be-ee9c-4de5-e1fd-1e258ad83a42",
          "input": "data"
        },
        {
          "source": "8d7c4b43-cdc8-408a-d6cf-480e72ff6bf9",
          "output": "a18c72ae-c708-47fd-cfd9-d13bb899e1a6",
          "target": "c3b3866a-3796-4fcb-9ce5-3ec1ab9ef9c5",
          "input": "data"
        },
        {
          "source": "00e16497-04a1-4769-86ab-3009384a8f99",
          "output": "245a891f-9fce-4e4b-a94b-37b2a018e1b9",
          "target": "06b3b7be-ee9c-4de5-e1fd-1e258ad83a42",
          "input": "data"
        },
        {
          "source": "00e16497-04a1-4769-86ab-3009384a8f99",
          "output": "a61f4b3b-2c7a-447b-82da-9cec0ad5721a",
          "target": "c3b3866a-3796-4fcb-9ce5-3ec1ab9ef9c5",
          "input": "data"
        },
        {
          "source": "fce171ed-0cea-42f7-f784-71f05a2d2ea0",
          "output": "action",
          "target": "f36a40e5-c8dd-41c3-b5a5-728dc0aa0931",
          "input": "@seqin"
        }
      ],
      "localVariables": [],
      "name": "main_page",
      "left": 0,
      "top": 0,
      "width": 910,
      "height": 870,
      "css": "page"
    },
    {
      "components": [
        {
          "type": "Select",
          "left": 0,
          "top": 0,
          "width": 470,
          "height": 76,
          "wireID": "db8d6262-938d-4801-db21-a80267bd01e1",
          "customInputs": [],
          "customOutputs": [],
          "data": "devices[$index] == null ? 2 :\nautomatic_testing && devices[$index].allTestsOK ? 1 :\n0",
          "style": {
            "inheritFrom": "default"
          },
          "widgets": [
            {
              "type": "Container",
              "left": 0,
              "top": 0,
              "width": 470,
              "height": 76,
              "wireID": "714c0b60-4486-453f-b8d9-07e21d8fd460",
              "customInputs": [],
              "customOutputs": [],
              "style": {
                "inheritFrom": "default"
              },
              "widgets": [
                {
                  "type": "TextWidget",
                  "left": 0,
                  "top": 0,
                  "width": 362,
                  "height": 24,
                  "wireID": "40f8c216-2f84-4098-be09-b22cbbc0aa0c",
                  "customInputs": [],
                  "customOutputs": [],
                  "data": "\"#\" + devices[$index].deviceNumber + \" ULX32S \" + devices[$index].version + \"F at \" + devices[$index].serialPortPath + \", Serial: \" + devices[$index].serialNumber",
                  "className": "device_title",
                  "style": {
                    "inheritFrom": "default"
                  }
                },
                {
                  "type": "Select",
                  "left": 362,
                  "top": 4,
                  "width": 108,
                  "height": 24,
                  "wireID": "d16affd3-ff39-4024-a5cc-5590e0a05cf8",
                  "customInputs": [],
                  "customOutputs": [],
                  "data": "!automatic_testing && devices[$index].stepStatus.status != StepStatus.InProgress ? 0 :\nautomatic_testing && devices[$index].stepStatus.status == StepStatus.Error ? 1 :\n2",
                  "style": {
                    "inheritFrom": "default"
                  },
                  "widgets": [
                    {
                      "type": "Container",
                      "left": 0,
                      "top": 0,
                      "width": 108,
                      "height": 24,
                      "wireID": "154c434d-6e5a-4da7-990c-fa90dca1f5ca",
                      "customInputs": [],
                      "customOutputs": [],
                      "style": {
                        "inheritFrom": "default"
                      },
                      "widgets": [
                        {
                          "type": "ButtonWidget",
                          "left": 0,
                          "top": 0,
                          "width": 24,
                          "height": 24,
                          "wireID": "2b3e6912-7d13-496e-9764-d7f00ca7ad7a",
                          "customInputs": [],
                          "customOutputs": [],
                          "asOutputProperties": [
                            "action"
                          ],
                          "data": "\"<\"",
                          "style": {
                            "inheritFrom": "default"
                          },
                          "enabled": "",
                          "disabledStyle": {
                            "inheritFrom": "default"
                          }
                        },
                        {
                          "type": "ButtonWidget",
                          "left": 30,
                          "top": 0,
                          "width": 24,
                          "height": 24,
                          "wireID": "a80d00c0-a644-4a5a-a90d-d30a10cde85d",
                          "customInputs": [],
                          "customOutputs": [],
                          "asOutputProperties": [
                            "action"
                          ],
                          "data": "\">\"",
                          "style": {
                            "inheritFrom": "default"
                          },
                          "enabled": "",
                          "disabledStyle": {
                            "inheritFrom": "default"
                          }
                        },
                        {
                          "type": "ButtonWidget",
                          "left": 60,
                          "top": 0,
                          "width": 48,
                          "height": 24,
                          "wireID": "60dd7df9-a01d-4c54-84be-44017e03bd63",
                          "customInputs": [],
                          "customOutputs": [],
                          "asOutputProperties": [
                            "action"
                          ],
                          "data": "\"Run\"",
                          "style": {
                            "inheritFrom": "default"
                          },
                          "enabled": "test_step_enabled[devices[$index].currentStep]",
                          "disabledStyle": {
                            "inheritFrom": "default"
                          }
                        }
                      ],
                      "visible": ""
                    },
                    {
                      "type": "Container",
                      "left": 0,
                      "top": 0,
                      "width": 108,
                      "height": 24,
                      "wireID": "3e77b959-b516-4f11-d609-fb800e02bb13",
                      "customInputs": [],
                      "customOutputs": [],
                      "style": {
                        "inheritFrom": "default"
                      },
                      "widgets": [
                        {
                          "type": "ButtonWidget",
                          "left": 35,
                          "top": 0,
                          "width": 73,
                          "height": 24,
                          "wireID": "3425d712-5ed7-4286-82cc-aaa100c4aa58",
                          "customInputs": [],
                          "customOutputs": [],
                          "asOutputProperties": [
                            "action"
                          ],
                          "data": "\"Try again\"",
                          "style": {
                            "inheritFrom": "default"
                          },
                          "enabled": "test_step_enabled[devices[$index].currentStep]",
                          "disabledStyle": {
                            "inheritFrom": "default"
                          }
                        }
                      ],
                      "visible": ""
                    },
                    {
                      "type": "ContainerWidget",
                      "left": 0,
                      "top": 0,
                      "width": 108,
                      "height": 24,
                      "wireID": "05a436eb-525d-4276-add7-7132a75e84af",
                      "customInputs": [],
                      "customOutputs": [],
                      "style": {
                        "inheritFrom": "default"
                      },
                      "widgets": []
                    }
                  ]
                },
                {
                  "type": "Container",
                  "left": 0,
                  "top": 26,
                  "width": 362,
                  "height": 24,
                  "wireID": "cc3db59c-6f49-4b9c-92e4-6bf709eec7af",
                  "customInputs": [],
                  "customOutputs": [],
                  "style": {
                    "inheritFrom": "default"
                  },
                  "widgets": [
                    {
                      "type": "TextWidget",
                      "left": 0,
                      "top": 0,
                      "width": 362,
                      "height": 24,
                      "wireID": "1a759a30-cc07-480f-c75d-56d1c39ea266",
                      "customInputs": [],
                      "customOutputs": [],
                      "data": "(devices[$index].currentStep + 1) + \"/\" + Array.length(test_steps) + \": \" + test_steps[devices[$index].currentStep].name",
                      "style": {
                        "inheritFrom": "default"
                      }
                    }
                  ]
                },
                {
                  "type": "Select",
                  "left": 0,
                  "top": 52,
                  "width": 470,
                  "height": 24,
                  "wireID": "e06a22ec-d348-4d46-98f0-d67da7d8eef2",
                  "customInputs": [],
                  "customOutputs": [],
                  "data": "devices[$index].stepStatus.status",
                  "style": {
                    "inheritFrom": "default"
                  },
                  "widgets": [
                    {
                      "type": "TextWidget",
                      "left": 0,
                      "top": 0,
                      "width": 470,
                      "height": 24,
                      "wireID": "31c1e4c1-baac-483f-b8a2-83bc3a392804",
                      "customInputs": [],
                      "customOutputs": [],
                      "data": "\"Not started\"",
                      "style": {
                        "inheritFrom": "default"
                      }
                    },
                    {
                      "type": "Select",
                      "left": 0,
                      "top": 0,
                      "width": 470,
                      "height": 24,
                      "wireID": "efaf2a6c-4ae6-4ec6-c68a-9a73575eaef4",
                      "customInputs": [],
                      "customOutputs": [],
                      "data": "devices[$index].currentStep != 6 ? 0 : 1",
                      "style": {
                        "inheritFrom": "default"
                      },
                      "widgets": [
                        {
                          "type": "Container",
                          "left": 0,
                          "top": 0,
                          "width": 470,
                          "height": 24,
                          "wireID": "bf2bd58d-fd63-41f4-f216-f995850f4335",
                          "customInputs": [],
                          "customOutputs": [],
                          "style": {
                            "inheritFrom": "default"
                          },
                          "widgets": [
                            {
                              "type": "ProgressWidget",
                              "left": 0,
                              "top": 4,
                              "width": 470,
                              "height": 16,
                              "wireID": "7eba42a3-60a3-4ec3-aa40-25e7dd3be75c",
                              "customInputs": [],
                              "customOutputs": [],
                              "data": "devices[$index].stepStatus.progress",
                              "style": {
                                "inheritFrom": "default"
                              }
                            }
                          ]
                        },
                        {
                          "type": "Container",
                          "left": 0,
                          "top": 0,
                          "width": 470,
                          "height": 24,
                          "wireID": "b61771c1-bbeb-43fa-d84f-72d35ee80f24",
                          "customInputs": [],
                          "customOutputs": [],
                          "style": {
                            "inheritFrom": "default"
                          },
                          "widgets": [
                            {
                              "type": "Select",
                              "left": 0,
                              "top": 0,
                              "width": 50,
                              "height": 24,
                              "wireID": "ba834355-28ed-490d-dcbb-4a3b4d25528b",
                              "customInputs": [],
                              "customOutputs": [],
                              "data": "devices[$index].stepStatus.selfTest && devices[$index].stepStatus.selfTest.DAC ? 1: 0",
                              "action": "",
                              "style": {
                                "inheritFrom": "default"
                              },
                              "widgets": [
                                {
                                  "type": "TextWidget",
                                  "left": 0,
                                  "top": 0,
                                  "width": 50,
                                  "height": 24,
                                  "wireID": "02aa1689-fd50-47f8-b107-c9044f9156b6",
                                  "customInputs": [],
                                  "customOutputs": [],
                                  "data": "\"DAC\"",
                                  "action": "",
                                  "className": "blink_status",
                                  "style": {
                                    "inheritFrom": "default"
                                  },
                                  "name": ""
                                },
                                {
                                  "type": "TextWidget",
                                  "left": 0,
                                  "top": 0,
                                  "width": 50,
                                  "height": 24,
                                  "wireID": "b869894f-0ba5-4afe-d9d2-253113e52e3c",
                                  "customInputs": [],
                                  "customOutputs": [],
                                  "data": "\"DAC\"",
                                  "action": "",
                                  "className": "success_status",
                                  "style": {
                                    "inheritFrom": "default"
                                  },
                                  "name": ""
                                }
                              ]
                            },
                            {
                              "type": "Select",
                              "left": 50,
                              "top": 0,
                              "width": 60,
                              "height": 24,
                              "wireID": "a40aceb8-eb8a-4cb1-af95-270345ef4192",
                              "customInputs": [],
                              "customOutputs": [],
                              "data": "devices[$index].stepStatus.selfTest && devices[$index].stepStatus.selfTest.FLASH ? 1 : 0",
                              "style": {
                                "inheritFrom": "default"
                              },
                              "widgets": [
                                {
                                  "type": "TextWidget",
                                  "left": 0,
                                  "top": 0,
                                  "width": 60,
                                  "height": 24,
                                  "wireID": "b069f5e0-cb6f-4297-c9d9-6d45cb33204c",
                                  "customInputs": [],
                                  "customOutputs": [],
                                  "data": "\"FLASH\"",
                                  "className": "blink_status",
                                  "style": {
                                    "inheritFrom": "default"
                                  },
                                  "name": ""
                                },
                                {
                                  "type": "TextWidget",
                                  "left": 0,
                                  "top": 0,
                                  "width": 60,
                                  "height": 24,
                                  "wireID": "595aad25-c889-44df-e3a1-ba12101070b8",
                                  "customInputs": [],
                                  "customOutputs": [],
                                  "data": "\"FLASH\"",
                                  "className": "success_status",
                                  "style": {
                                    "inheritFrom": "default"
                                  },
                                  "name": ""
                                }
                              ]
                            },
                            {
                              "type": "Select",
                              "left": 110,
                              "top": 0,
                              "width": 50,
                              "height": 24,
                              "wireID": "a9717729-f8f1-4788-b146-5c1cf1791c13",
                              "customInputs": [],
                              "customOutputs": [],
                              "data": "devices[$index].stepStatus.selfTest && devices[$index].stepStatus.selfTest.RTC ? 1: 0",
                              "style": {
                                "inheritFrom": "default"
                              },
                              "widgets": [
                                {
                                  "type": "TextWidget",
                                  "left": 0,
                                  "top": 0,
                                  "width": 50,
                                  "height": 24,
                                  "wireID": "1450b1cd-89a3-4b9b-fbf9-b10cec14728f",
                                  "customInputs": [],
                                  "customOutputs": [],
                                  "data": "\"RTC\"",
                                  "className": "blink_status",
                                  "style": {
                                    "inheritFrom": "default"
                                  },
                                  "name": ""
                                },
                                {
                                  "type": "TextWidget",
                                  "left": 0,
                                  "top": 0,
                                  "width": 50,
                                  "height": 24,
                                  "wireID": "c0fb9b46-94a9-4d91-d6e4-622d0c248308",
                                  "customInputs": [],
                                  "customOutputs": [],
                                  "data": "\"RTC\"",
                                  "className": "success_status",
                                  "style": {
                                    "inheritFrom": "default"
                                  },
                                  "name": ""
                                }
                              ]
                            },
                            {
                              "type": "Select",
                              "left": 160,
                              "top": 0,
                              "width": 50,
                              "height": 24,
                              "wireID": "2b3fa17f-90f1-4246-f02d-10e853af6b0e",
                              "customInputs": [],
                              "customOutputs": [],
                              "data": "devices[$index].stepStatus.selfTest && devices[$index].stepStatus.selfTest.ADC ? 1: 0",
                              "style": {
                                "inheritFrom": "default"
                              },
                              "widgets": [
                                {
                                  "type": "TextWidget",
                                  "left": 0,
                                  "top": 0,
                                  "width": 50,
                                  "height": 24,
                                  "wireID": "e99dfc52-2017-477e-c24a-64a5d295ef3b",
                                  "customInputs": [],
                                  "customOutputs": [],
                                  "data": "\"ADC\"",
                                  "className": "blink_status",
                                  "style": {
                                    "inheritFrom": "default"
                                  },
                                  "name": ""
                                },
                                {
                                  "type": "TextWidget",
                                  "left": 0,
                                  "top": 0,
                                  "width": 50,
                                  "height": 24,
                                  "wireID": "49a4bef6-7f6f-437b-9b5f-8054ca7042ad",
                                  "customInputs": [],
                                  "customOutputs": [],
                                  "data": "\"ADC\"",
                                  "className": "success_status",
                                  "style": {
                                    "inheritFrom": "default"
                                  },
                                  "name": ""
                                }
                              ]
                            },
                            {
                              "type": "Select",
                              "left": 210,
                              "top": 0,
                              "width": 68,
                              "height": 24,
                              "wireID": "1837db09-0838-49e8-b95a-3dd9e423b7a9",
                              "customInputs": [],
                              "customOutputs": [],
                              "data": "devices[$index].stepStatus.selfTest && devices[$index].stepStatus.selfTest.SD_CARD ? 1: 0",
                              "style": {
                                "inheritFrom": "default"
                              },
                              "widgets": [
                                {
                                  "type": "TextWidget",
                                  "left": 0,
                                  "top": 0,
                                  "width": 68,
                                  "height": 24,
                                  "wireID": "ccbc62f5-e464-41f3-a470-4fbe421fa27e",
                                  "customInputs": [],
                                  "customOutputs": [],
                                  "data": "\"SD card\"",
                                  "className": "blink_status",
                                  "style": {
                                    "inheritFrom": "default"
                                  },
                                  "name": ""
                                },
                                {
                                  "type": "TextWidget",
                                  "left": 0,
                                  "top": 0,
                                  "width": 68,
                                  "height": 24,
                                  "wireID": "5117f3f6-931b-4bac-b1d1-41ac38ef3ac8",
                                  "customInputs": [],
                                  "customOutputs": [],
                                  "data": "\"SD card\"",
                                  "className": "success_status",
                                  "style": {
                                    "inheritFrom": "default"
                                  },
                                  "name": ""
                                }
                              ]
                            },
                            {
                              "type": "Select",
                              "left": 278,
                              "top": 0,
                              "width": 68,
                              "height": 24,
                              "wireID": "74d3e55a-28d6-4d68-aecd-f251134b9d65",
                              "customInputs": [],
                              "customOutputs": [],
                              "data": "devices[$index].stepStatus.selfTest && devices[$index].stepStatus.selfTest.BTN ? 1: 0",
                              "style": {
                                "inheritFrom": "default"
                              },
                              "widgets": [
                                {
                                  "type": "TextWidget",
                                  "left": 0,
                                  "top": 0,
                                  "width": 68,
                                  "height": 24,
                                  "wireID": "4a6a379e-c58c-4b51-9449-712d94c7f171",
                                  "customInputs": [],
                                  "customOutputs": [],
                                  "data": "\"Buttons\"",
                                  "className": "blink_status",
                                  "style": {
                                    "inheritFrom": "default"
                                  },
                                  "name": ""
                                },
                                {
                                  "type": "TextWidget",
                                  "left": 0,
                                  "top": 0,
                                  "width": 68,
                                  "height": 24,
                                  "wireID": "bc74dae2-3320-4dfa-a54f-d4a5f7c1c83b",
                                  "customInputs": [],
                                  "customOutputs": [],
                                  "data": "\"Buttons\"",
                                  "className": "success_status",
                                  "style": {
                                    "inheritFrom": "default"
                                  },
                                  "name": ""
                                }
                              ]
                            },
                            {
                              "type": "Select",
                              "left": 346,
                              "top": 0,
                              "width": 58,
                              "height": 24,
                              "wireID": "8592563c-052c-456a-8354-b0ebdf32467a",
                              "customInputs": [],
                              "customOutputs": [],
                              "data": "devices[$index].stepStatus.selfTest && devices[$index].stepStatus.selfTest.HDMI ? 1: 0",
                              "style": {
                                "inheritFrom": "default"
                              },
                              "widgets": [
                                {
                                  "type": "TextWidget",
                                  "left": 0,
                                  "top": 0,
                                  "width": 58,
                                  "height": 24,
                                  "wireID": "2e2e47cd-63d9-40d8-dd3d-1549fe7d46eb",
                                  "customInputs": [],
                                  "customOutputs": [],
                                  "data": "\"HDMI\"",
                                  "className": "blink_status",
                                  "style": {
                                    "inheritFrom": "default"
                                  }
                                },
                                {
                                  "type": "TextWidget",
                                  "left": 0,
                                  "top": 0,
                                  "width": 58,
                                  "height": 24,
                                  "wireID": "fadca84d-a952-4e59-a861-3d9ec71f1dda",
                                  "customInputs": [],
                                  "customOutputs": [],
                                  "data": "\"HDMI\"",
                                  "className": "success_status",
                                  "style": {
                                    "inheritFrom": "default"
                                  }
                                }
                              ]
                            },
                            {
                              "type": "Select",
                              "left": 404,
                              "top": 0,
                              "width": 55,
                              "height": 24,
                              "wireID": "380f1f7c-25d5-4eb0-8921-e85bbed6d24f",
                              "customInputs": [],
                              "customOutputs": [],
                              "data": "devices[$index].stepStatus.selfTest && devices[$index].stepStatus.selfTest.EDID ? 1: 0",
                              "style": {
                                "inheritFrom": "default"
                              },
                              "widgets": [
                                {
                                  "type": "TextWidget",
                                  "left": 0,
                                  "top": 0,
                                  "width": 55,
                                  "height": 24,
                                  "wireID": "e9a0c1e5-79c0-40ba-a7e7-30e4e71d4ab4",
                                  "customInputs": [],
                                  "customOutputs": [],
                                  "data": "\"EDID\"",
                                  "className": "blink_status",
                                  "style": {
                                    "inheritFrom": "default"
                                  },
                                  "name": ""
                                },
                                {
                                  "type": "TextWidget",
                                  "left": 0,
                                  "top": 0,
                                  "width": 55,
                                  "height": 24,
                                  "wireID": "99bd8273-b35d-4350-8a68-c203baf4fd40",
                                  "customInputs": [],
                                  "customOutputs": [],
                                  "data": "\"EDID\"",
                                  "className": "success_status",
                                  "style": {
                                    "inheritFrom": "default"
                                  },
                                  "name": ""
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "TextWidget",
                      "left": 0,
                      "top": 0,
                      "width": 470,
                      "height": 24,
                      "wireID": "5c781ff7-ac00-4acb-ad98-c96856bad006",
                      "customInputs": [],
                      "customOutputs": [],
                      "data": "\"OK\"",
                      "className": "success",
                      "style": {
                        "inheritFrom": "default"
                      }
                    },
                    {
                      "type": "TextWidget",
                      "left": 0,
                      "top": 0,
                      "width": 470,
                      "height": 24,
                      "wireID": "7dc36a60-b363-4f69-ee77-1c457fc1808f",
                      "customInputs": [],
                      "customOutputs": [],
                      "data": "\"Failed\"",
                      "className": "error",
                      "style": {
                        "inheritFrom": "default"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "type": "Container",
              "left": 0,
              "top": 0,
              "width": 470,
              "height": 76,
              "wireID": "c3d2d404-016a-4a17-c0f8-a11bbbe79594",
              "customInputs": [],
              "customOutputs": [],
              "style": {
                "inheritFrom": "default"
              },
              "widgets": [
                {
                  "type": "TextWidget",
                  "left": 0,
                  "top": 0,
                  "width": 362,
                  "height": 24,
                  "wireID": "3bc12b6e-22ad-4314-eb12-5ec724d3d168",
                  "customInputs": [],
                  "customOutputs": [],
                  "data": "\"#\" + devices[$index].deviceNumber + \" ULX32S \" + devices[$index].version + \"F at \" + devices[$index].serialPortPath + \", Serial: \" + devices[$index].serialNumber",
                  "className": "device_title",
                  "style": {
                    "inheritFrom": "default"
                  }
                },
                {
                  "type": "TextWidget",
                  "left": 0,
                  "top": 35,
                  "width": 362,
                  "height": 24,
                  "wireID": "d1efb230-22ee-4750-c0a0-6f056d80cde6",
                  "customInputs": [],
                  "customOutputs": [],
                  "data": "\"All tests OK\"",
                  "action": "",
                  "className": "success",
                  "style": {
                    "inheritFrom": "default"
                  },
                  "name": ""
                }
              ]
            },
            {
              "type": "ContainerWidget",
              "left": 0,
              "top": 0,
              "width": 470,
              "height": 76,
              "wireID": "c2bcc166-8f92-41e3-be87-15f52bda8929",
              "customInputs": [],
              "customOutputs": [],
              "style": {
                "inheritFrom": "default"
              },
              "widgets": []
            }
          ]
        },
        {
          "type": "CallActionActionComponent",
          "left": 500,
          "top": 0,
          "width": 127,
          "height": 83,
          "wireID": "b6981322-dbee-41c4-efa3-09d55c41067d",
          "customInputs": [],
          "customOutputs": [],
          "action": "do_test_step"
        },
        {
          "type": "OutputActionComponent",
          "left": 668,
          "top": 0,
          "width": 87,
          "height": 29,
          "wireID": "721c9ab8-443d-4693-9191-9a16e96ce776",
          "customInputs": [],
          "customOutputs": [],
          "name": "stdout",
          "outputType": "any"
        },
        {
          "type": "OutputActionComponent",
          "left": 668,
          "top": 75,
          "width": 87,
          "height": 29,
          "wireID": "662f055a-e57e-44e9-e869-88020f1154b7",
          "customInputs": [],
          "customOutputs": [],
          "name": "stderr",
          "outputType": "any"
        },
        {
          "type": "CallActionActionComponent",
          "left": 500,
          "top": 104,
          "width": 151,
          "height": 61,
          "wireID": "bb2aaf59-3c8f-48af-8c18-9a403f856554",
          "customInputs": [],
          "customOutputs": [],
          "action": "move_to_next_step"
        },
        {
          "type": "CallActionActionComponent",
          "left": 499,
          "top": 184,
          "width": 152,
          "height": 61,
          "wireID": "257246ed-83e9-4f31-ac63-86c695d3fbdc",
          "customInputs": [],
          "customOutputs": [],
          "action": "move_to_prev_step"
        }
      ],
      "connectionLines": [
        {
          "source": "60dd7df9-a01d-4c54-84be-44017e03bd63",
          "output": "action",
          "target": "b6981322-dbee-41c4-efa3-09d55c41067d",
          "input": "33f7ba7d-f940-42c1-ae57-e14ad7625976"
        },
        {
          "source": "b6981322-dbee-41c4-efa3-09d55c41067d",
          "output": "a7528088-85ca-4e84-f248-89f546e1b7f9",
          "target": "721c9ab8-443d-4693-9191-9a16e96ce776",
          "input": "@seqin"
        },
        {
          "source": "b6981322-dbee-41c4-efa3-09d55c41067d",
          "output": "4161fdc3-14ad-4a71-c67d-e12cc282f7b9",
          "target": "662f055a-e57e-44e9-e869-88020f1154b7",
          "input": "@seqin"
        },
        {
          "source": "a80d00c0-a644-4a5a-a90d-d30a10cde85d",
          "output": "action",
          "target": "bb2aaf59-3c8f-48af-8c18-9a403f856554",
          "input": "5052d1e0-a07a-48e4-f9c1-8dab11cf5733"
        },
        {
          "source": "2b3e6912-7d13-496e-9764-d7f00ca7ad7a",
          "output": "action",
          "target": "257246ed-83e9-4f31-ac63-86c695d3fbdc",
          "input": "c925fa05-7e25-452d-c3ef-5f11cae2c077"
        },
        {
          "source": "3425d712-5ed7-4286-82cc-aaa100c4aa58",
          "output": "action",
          "target": "b6981322-dbee-41c4-efa3-09d55c41067d",
          "input": "33f7ba7d-f940-42c1-ae57-e14ad7625976"
        }
      ],
      "localVariables": [],
      "name": "device",
      "left": 0,
      "top": 0,
      "width": 470,
      "height": 76,
      "isUsedAsCustomWidget": true
    },
    {
      "components": [
        {
          "type": "CheckboxWidget",
          "left": 20,
          "top": 20,
          "width": 160,
          "height": 20,
          "wireID": "5a165dcc-9860-4a5e-8906-129a9667def9",
          "customInputs": [],
          "customOutputs": [],
          "asOutputProperties": [],
          "data": "auto_refresh",
          "label": "\"Auto refresh\""
        },
        {
          "type": "CheckboxWidget",
          "left": 20,
          "top": 45,
          "width": 160,
          "height": 20,
          "wireID": "ee062fe0-37f9-4d9f-a03d-3abc9c37fba2",
          "customInputs": [],
          "customOutputs": [],
          "asOutputProperties": [],
          "data": "update_database",
          "label": "\"Update database\""
        },
        {
          "type": "TextWidget",
          "left": 201,
          "top": 20,
          "width": 187,
          "height": 20,
          "wireID": "903d7db2-ad93-4e8e-8311-11530ab58d79",
          "customInputs": [],
          "customOutputs": [],
          "data": "\"Enabled tests:\"",
          "style": {
            "inheritFrom": "default"
          }
        },
        {
          "type": "List",
          "left": 220,
          "top": 45,
          "width": 168,
          "height": 192,
          "wireID": "dbc87553-5c25-4c9d-84fa-b811b94f2cb1",
          "customInputs": [],
          "customOutputs": [],
          "data": "test_steps",
          "style": {
            "inheritFrom": "default"
          },
          "itemWidget": {
            "type": "Container",
            "left": 0,
            "top": 0,
            "width": 168,
            "height": 24,
            "wireID": "83ef6374-903d-4717-956f-84820e408eb9",
            "customInputs": [],
            "customOutputs": [],
            "style": {
              "inheritFrom": "default"
            },
            "widgets": [
              {
                "type": "CheckboxWidget",
                "left": 0,
                "top": 0,
                "width": 168,
                "height": 20,
                "wireID": "8900d1b2-df22-4b1c-e3a9-48ea3ea49b7b",
                "customInputs": [],
                "customOutputs": [],
                "asOutputProperties": [],
                "data": "test_step_enabled[$index]",
                "label": "test_steps[$index].name"
              }
            ]
          },
          "listType": "vertical",
          "gap": 0
        },
        {
          "type": "ButtonWidget",
          "left": 144,
          "top": 261,
          "width": 120,
          "height": 32,
          "wireID": "46312faa-b447-44a0-cb9e-6f0b9ec8df5c",
          "customInputs": [],
          "customOutputs": [],
          "asOutputProperties": [
            "action"
          ],
          "data": "\"Close\"",
          "style": {
            "inheritFrom": "default"
          },
          "disabledStyle": {
            "inheritFrom": "default"
          }
        },
        {
          "type": "ShowPageActionComponent",
          "left": 434,
          "top": 261,
          "width": 102,
          "height": 62,
          "wireID": "bd5707d5-a596-45da-ca96-1fb06c0d5499",
          "customInputs": [],
          "customOutputs": [],
          "page": "main_page"
        }
      ],
      "connectionLines": [
        {
          "source": "46312faa-b447-44a0-cb9e-6f0b9ec8df5c",
          "output": "action",
          "target": "bd5707d5-a596-45da-ca96-1fb06c0d5499",
          "input": "@seqin"
        }
      ],
      "localVariables": [],
      "name": "settings_page",
      "left": 0,
      "top": 0,
      "width": 408,
      "height": 313,
      "css": "page"
    },
    {
      "components": [
        {
          "type": "ButtonWidget",
          "left": 440,
          "top": 640,
          "width": 120,
          "height": 32,
          "wireID": "a8987013-9cf6-4998-c84a-c17cdec19c05",
          "customInputs": [],
          "customOutputs": [],
          "asOutputProperties": [
            "action"
          ],
          "data": "\"Close\"",
          "style": {
            "inheritFrom": "default"
          },
          "disabledStyle": {
            "inheritFrom": "default"
          }
        },
        {
          "type": "ShowPageActionComponent",
          "left": 790,
          "top": 705,
          "width": 102,
          "height": 62,
          "wireID": "ffa0a5cc-4692-4d8e-a9b5-3a72cf940923",
          "customInputs": [],
          "customOutputs": [],
          "page": "main_page"
        },
        {
          "type": "MarkdownWidget",
          "left": 20,
          "top": 20,
          "width": 1000,
          "height": 600,
          "wireID": "2ca25ba2-fc32-4ae4-95e4-bd6747c4593c",
          "customInputs": [],
          "customOutputs": [],
          "className": "help",
          "text": "BOM lista: https://github.com/emard/ulx3s/blob/master/1-click-bom.tsv\n\nAssembly guide: https://kitspace.org/interactive_bom/?github.com/emard/ulx3s\n\nČeste greške u proizvodnji:\n\n- HDMI ne sjedne do kraja pa se ne zalemi dobro\n- ADC čip krivo okrenut (postoji šansa da ih u pakiranju krivo okrenu pa pazite)\n- Krivo okrenut 25MHz kristal - molim pogledajte na sample pločici koju sam poslao\n- D28 se ne montira\n- RV2 se ne montira\n- RV3 se new montira\n- USB zna biti nezalemljen ali rijetko\n- ADC i FTDI često budu odlemljeni\n- ESP32: pogledajte kako stoji na sample pločici koju sam poslao\n\nDo sada problemi sa 3.1.7 koje sam primjetio:\n\n- Wrong ID - fujprog ne radi - FTDI čip nije zalemljen - FPGA nije zalemljen\n- Ne pali se - vjerojatno nije dobro zalemljen ili je US1 loše zalemljen - brika na BGA\n- HDMI - fale boje, EDID fail - nema slike\n- Ne pali kada je spojeno na US2 konektoru - US2 nije dobro zalemljen\n- ADC - ne radi neki od kanala ili ne radi niti jedan kanal - ADC nije dobro spojen - FPGA nije dobro zalemljen\n- Ne prolazi SDRAM memtest - FPGA ili SDRAM nisu dobro zalemljeni\n- Ne može se pristupiti ESP32 - HDMI je spojen pa su velike smetnje - ESP32 nije dobro spojen, FTDI nije dobro spojen - FPGA nije dobro spojen\n\n### Predkoraci prije uključivanja\n\n**Obavezno provjeriti da li je ADC dobro okrenut prije uključivanja, ako se uključi u USB ovisno kako je okrenut može izgoriti ADC čip ili FPGA.**\n     \nJa obično pogledam i HDMI pod mikroskopom, ali to se više manje vidi na testu ako nešto nije spojeno - nema slike ili nema neke boje.\n\n### Koraci koji se automatski testiraju\n\n1. FTDI programming\n\n\tAko ova naredba javi error - onda je vjerojatno FTDI ili US1 loše zalemljen.\n\n\tProbajte prvo na ispravnoj pločici. Ako ne prolazi na testnoj može biti i krivi driver instaliran.\n\thttps://github.com/kost/fujprog#change-ulx3s-driver-to-ftdi\n\thttps://ftdichip.com/drivers/d2xx-drivers/\n\n2. ESP32 passthru\n\n     Ako ovo javi error onda je vjerojatno loše zalemljen FTDI ili FPGA.\n     Obično javi neki krivi ID tipa ID 000000000 ili FFFFFFFFF - to znači da FPGA nije dobro spojen prema FPGA\n\n3. ESP32 erase\n\t\n4. ESP32 programming\n\n5. MP test\n\n6. Self-test programming\n\n7. Self-test\n\n     SDRAM možete provjeriti i sa - on će dati sliku na HDMI izlazu i smije smao brojati na zelenom brojaču - ledice se ne smiju paliti - ako se pale ledice ili broji crveno onda nešto ne radi sa SDRAM\n\n8. ESP32 passthru flash\n\n     Trajno programiranje passtrue - sa time isporučujemo korisniku.\n\n### Dodatni koraci koji se ručno obavljaju:\n\n9. Odspojiti US1 - spoijiti US2 da se vidi da li napajanje preko US2 radi\n\n10. Pakiranje, itd.\n"
        }
      ],
      "connectionLines": [
        {
          "source": "a8987013-9cf6-4998-c84a-c17cdec19c05",
          "output": "action",
          "target": "ffa0a5cc-4692-4d8e-a9b5-3a72cf940923",
          "input": "@seqin"
        }
      ],
      "localVariables": [],
      "name": "help",
      "left": 0,
      "top": 0,
      "width": 1040,
      "height": 692,
      "css": "page"
    }
  ],
  "colors": [],
  "themes": []
}